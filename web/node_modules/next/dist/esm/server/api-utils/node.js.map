{"version":3,"sources":["../../../src/server/api-utils/node.ts"],"names":["checkIsOnDemandRevalidate","bytes","generateETag","sendEtagResponse","Stream","parse","isError","isResSent","interopDefault","setLazyProp","sendStatusCode","redirect","clearPreviewData","sendError","ApiError","COOKIE_NAME_PRERENDER_BYPASS","COOKIE_NAME_PRERENDER_DATA","SYMBOL_PREVIEW_DATA","RESPONSE_LIMIT_DEFAULT","getCookieParser","getTracer","NodeSpan","RequestCookies","HeadersAdapter","PRERENDER_REVALIDATE_HEADER","PRERENDER_REVALIDATE_ONLY_GENERATED_HEADER","tryGetPreviewData","req","res","options","cookies","isOnDemandRevalidate","headers","from","previewModeId","get","value","tokenPreviewData","data","Object","defineProperty","enumerable","encryptedPreviewData","jsonwebtoken","require","verify","previewModeSigningKey","decryptWithSecret","decryptedPreviewData","Buffer","previewModeEncryptionKey","JSON","parseJson","str","length","e","parseBody","limit","contentType","type","parameters","encoding","charset","buffer","getRawBody","body","toString","qs","decode","getMaxContentLength","responseLimit","sendData","undefined","end","statusCode","removeHeader","process","env","NODE_ENV","console","warn","url","getHeader","setHeader","pipe","isJSONLike","includes","stringifiedBody","stringify","etag","isBuffer","byteLength","sendJson","jsonBody","send","isValidData","setDraftMode","Error","expires","enable","Date","serialize","previous","Array","isArray","httpOnly","sameSite","secure","path","setPreviewData","encryptWithSecret","payload","sign","algorithm","maxAge","expiresIn","revalidate","urlPath","opts","context","startsWith","revalidateHeaders","unstable_onlyGenerated","allowedRevalidateHeaderKeys","trustHostHeader","key","keys","fetch","host","method","cacheHeader","toUpperCase","status","err","message","apiResolver","query","resolverModule","apiContext","propagateError","dev","page","apiReq","apiRes","config","bodyParser","api","externalResolver","previewData","preview","sizeLimit","contentLength","maxContentLength","writeData","write","endResponse","args","apply","format","json","statusOrUrl","assign","resolver","wasPiped","once","getRootSpanAttributes","set","apiRouteResult","trace","runHandler","spanName","Response","error"],"mappings":"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"}