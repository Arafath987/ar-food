(()=>{var __webpack_modules__={"../next-env/dist/index.js":(e,t,r)=>{(()=>{var t={840:e=>{"use strict";function t(e,r,s){const n=e.match(/(.?\${*[\w]*(?::-)?[\w]*}*)/g)||[];return n.reduce((function(e,i,a){const o=/(.?)\${*([\w]*(?::-)?[\w]*)?}*/g.exec(i);if(!o||0===o.length)return e;const l=o[1];let c,h;if("\\"===l)h=o[0],c=h.replace("\\$","$");else{const i=o[2].split(":-"),d=i[0];if(h=o[0].substring(l.length),c=Object.prototype.hasOwnProperty.call(r,d)?r[d]:s.parsed[d]||i[1]||"",i.length>1&&c){const t=n[a+1];n[a+1]="",e=e.replace(t,"")}c=t(c,r,s)}return e.replace(h,c)}),e)}e.exports.j=function(e){const r=e.ignoreProcessEnv?{}:process.env;for(const s in e.parsed){const n=Object.prototype.hasOwnProperty.call(r,s)?r[s]:e.parsed[s];e.parsed[s]=t(n,r,e)}for(const t in e.parsed)r[t]=e.parsed[t];return e}},358:(e,t,r)=>{r(147),r(17),r(37);const s=/^\s*([\w.-]+)\s*=\s*(.*)?\s*$/,n=/\\n/g,i=/\r\n|\n|\r/;e.exports.Q=function(e,t){const r=Boolean(t&&t.debug),a={};return e.toString().split(i).forEach((function(e,t){const i=e.match(s);if(null!=i){const e=i[1];let t=i[2]||"";const r=t.length-1,s='"'===t[0]&&'"'===t[r];"'"===t[0]&&"'"===t[r]||s?(t=t.substring(1,r),s&&(t=t.replace(n,"\n"))):t=t.trim(),a[e]=t}else r&&function(e){console.log(`[dotenv][DEBUG] ${e}`)}(`did not match key and value when parsing line ${t+1}: ${e}`)})),a}},147:e=>{"use strict";e.exports=r("fs")},37:e=>{"use strict";e.exports=r("os")},17:e=>{"use strict";e.exports=r("path")}},s={};function n(e){var r=s[e];if(void 0!==r)return r.exports;var i=s[e]={exports:{}},a=!0;try{t[e](i,i.exports,n),a=!1}finally{a&&delete s[e]}return i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},void 0!==n&&(n.ab=__dirname+"/");var i={};(()=>{"use strict";n.r(i),n.d(i,{initialEnv:()=>a,updateInitialEnv:()=>h,processEnv:()=>u,resetEnv:()=>p,loadEnvConfig:()=>f});var e=n(147),t=(n.n(e),n(17)),r=(n.n(t),n(358)),s=n(840);let a,o,l=[],c=[];function h(e){Object.assign(a||{},e)}function d(e){Object.keys(process.env).forEach((t=>{t.startsWith("__NEXT_PRIVATE")||void 0!==e[t]&&""!==e[t]||delete process.env[t]})),Object.entries(e).forEach((([e,t])=>{process.env[e]=t}))}function u(e,n,i=console,o=!1,l){var h;if(a||(a=Object.assign({},process.env)),!o&&(process.env.__NEXT_PROCESSED_ENV||0===e.length))return process.env;process.env.__NEXT_PROCESSED_ENV="true";const d=Object.assign({},a),u={};for(const a of e)try{let e={};e.parsed=r.Q(a.contents),e=(0,s.j)(e),e.parsed&&!c.some((e=>e.contents===a.contents&&e.path===a.path))&&(null==l||l(a.path));for(const t of Object.keys(e.parsed||{}))void 0===u[t]&&void 0===d[t]&&(u[t]=null===(h=e.parsed)||void 0===h?void 0:h[t])}catch(e){i.error(`Failed to load env from ${t.join(n||"",a.path)}`,e)}return Object.assign(process.env,u)}function p(){a&&d(a)}function f(r,s,n=console,i=!1,h){if(a||(a=Object.assign({},process.env)),o&&!i)return{combinedEnv:o,loadedEnvFiles:l};d(a),c=l,l=[];const p=s?"development":"production",f=[`.env.${p}.local`,"test"!==p&&".env.local",`.env.${p}`,".env"].filter(Boolean);for(const s of f){const i=t.join(r,s);try{if(!e.statSync(i).isFile())continue;const t=e.readFileSync(i,"utf8");l.push({path:s,contents:t})}catch(e){"ENOENT"!==e.code&&n.error(`Failed to load env from ${s}`,e)}}return o=u(l,r,n,i,h),{combinedEnv:o,loadedEnvFiles:l}}})(),e.exports=i})()},"./dist/compiled/@edge-runtime/cookies/index.js":e=>{"use strict";var t,r=Object.defineProperty,s=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,a={};function o(e){var t;const r=["path"in e&&e.path&&`Path=${e.path}`,"expires"in e&&(e.expires||0===e.expires)&&`Expires=${("number"==typeof e.expires?new Date(e.expires):e.expires).toUTCString()}`,"maxAge"in e&&"number"==typeof e.maxAge&&`Max-Age=${e.maxAge}`,"domain"in e&&e.domain&&`Domain=${e.domain}`,"secure"in e&&e.secure&&"Secure","httpOnly"in e&&e.httpOnly&&"HttpOnly","sameSite"in e&&e.sameSite&&`SameSite=${e.sameSite}`].filter(Boolean);return`${e.name}=${encodeURIComponent(null!=(t=e.value)?t:"")}; ${r.join("; ")}`}function l(e){const t=new Map;for(const r of e.split(/; */)){if(!r)continue;const e=r.indexOf("=");if(-1===e){t.set(r,"true");continue}const[s,n]=[r.slice(0,e),r.slice(e+1)];try{t.set(s,decodeURIComponent(null!=n?n:"true"))}catch{}}return t}function c(e){if(!e)return;const[[t,r],...s]=l(e),{domain:n,expires:i,httponly:a,maxage:o,path:c,samesite:d,secure:u}=Object.fromEntries(s.map((([e,t])=>[e.toLowerCase(),t])));return function(e){const t={};for(const r in e)e[r]&&(t[r]=e[r]);return t}({name:t,value:decodeURIComponent(r),domain:n,...i&&{expires:new Date(i)},...a&&{httpOnly:!0},..."string"==typeof o&&{maxAge:Number(o)},path:c,...d&&{sameSite:(p=d,p=p.toLowerCase(),h.includes(p)?p:void 0)},...u&&{secure:!0}});var p}((e,t)=>{for(var s in t)r(e,s,{get:t[s],enumerable:!0})})(a,{RequestCookies:()=>u,ResponseCookies:()=>p,parseCookie:()=>l,parseSetCookie:()=>c,splitCookiesString:()=>d,stringifyCookie:()=>o}),e.exports=(t=a,((e,t,a,o)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let a of n(t))i.call(e,a)||undefined===a||r(e,a,{get:()=>t[a],enumerable:!(o=s(t,a))||o.enumerable});return e})(r({},"__esModule",{value:!0}),t));var h=["strict","lax","none"];function d(e){if(!e)return[];var t,r,s,n,i,a=[],o=0;function l(){for(;o<e.length&&/\s/.test(e.charAt(o));)o+=1;return o<e.length}for(;o<e.length;){for(t=o,i=!1;l();)if(","===(r=e.charAt(o))){for(s=o,o+=1,l(),n=o;o<e.length&&"="!==(r=e.charAt(o))&&";"!==r&&","!==r;)o+=1;o<e.length&&"="===e.charAt(o)?(i=!0,o=n,a.push(e.substring(t,s)),t=o):o=s+1}else o+=1;(!i||o>=e.length)&&a.push(e.substring(t,e.length))}return a}var u=class{constructor(e){this._parsed=new Map,this._headers=e;const t=e.get("cookie");if(t){const e=l(t);for(const[t,r]of e)this._parsed.set(t,{name:t,value:r})}}[Symbol.iterator](){return this._parsed[Symbol.iterator]()}get size(){return this._parsed.size}get(...e){const t="string"==typeof e[0]?e[0]:e[0].name;return this._parsed.get(t)}getAll(...e){var t;const r=Array.from(this._parsed);if(!e.length)return r.map((([e,t])=>t));const s="string"==typeof e[0]?e[0]:null==(t=e[0])?void 0:t.name;return r.filter((([e])=>e===s)).map((([e,t])=>t))}has(e){return this._parsed.has(e)}set(...e){const[t,r]=1===e.length?[e[0].name,e[0].value]:e,s=this._parsed;return s.set(t,{name:t,value:r}),this._headers.set("cookie",Array.from(s).map((([e,t])=>o(t))).join("; ")),this}delete(e){const t=this._parsed,r=Array.isArray(e)?e.map((e=>t.delete(e))):t.delete(e);return this._headers.set("cookie",Array.from(t).map((([e,t])=>o(t))).join("; ")),r}clear(){return this.delete(Array.from(this._parsed.keys())),this}[Symbol.for("edge-runtime.inspect.custom")](){return`RequestCookies ${JSON.stringify(Object.fromEntries(this._parsed))}`}toString(){return[...this._parsed.values()].map((e=>`${e.name}=${encodeURIComponent(e.value)}`)).join("; ")}},p=class{constructor(e){var t;this._parsed=new Map,this._headers=e;const r=null==(t=e.getSetCookie)?void 0:t.call(e);e.get("set-cookie");const s=Array.isArray(r)?r:d(r);for(const e of s){const t=c(e);t&&this._parsed.set(t.name,t)}}get(...e){const t="string"==typeof e[0]?e[0]:e[0].name;return this._parsed.get(t)}getAll(...e){var t;const r=Array.from(this._parsed.values());if(!e.length)return r;const s="string"==typeof e[0]?e[0]:null==(t=e[0])?void 0:t.name;return r.filter((e=>e.name===s))}has(e){return this._parsed.has(e)}set(...e){const[t,r,s]=1===e.length?[e[0].name,e[0].value,e[0]]:e,n=this._parsed;return n.set(t,function(e={name:"",value:""}){return"number"==typeof e.expires&&(e.expires=new Date(e.expires)),e.maxAge&&(e.expires=new Date(Date.now()+1e3*e.maxAge)),null!==e.path&&void 0!==e.path||(e.path="/"),e}({name:t,value:r,...s})),function(e,t){t.delete("set-cookie");for(const[,r]of e){const e=o(r);t.append("set-cookie",e)}}(n,this._headers),this}delete(...e){const[t,r,s]="string"==typeof e[0]?[e[0]]:[e[0].name,e[0].path,e[0].domain];return this.set({name:t,path:r,domain:s,value:"",expires:new Date(0)})}[Symbol.for("edge-runtime.inspect.custom")](){return`ResponseCookies ${JSON.stringify(Object.fromEntries(this._parsed))}`}toString(){return[...this._parsed.values()].map(o).join("; ")}}},"./dist/compiled/bytes/index.js":e=>{(()=>{"use strict";var t={56:e=>{e.exports=function(e,t){return"string"==typeof e?a(e):"number"==typeof e?i(e,t):null},e.exports.format=i,e.exports.parse=a;var t=/\B(?=(\d{3})+(?!\d))/g,r=/(?:\.0*|(\.[^0]+)0+)$/,s={b:1,kb:1024,mb:1<<20,gb:1<<30,tb:Math.pow(1024,4),pb:Math.pow(1024,5)},n=/^((-|\+)?(\d+(?:\.\d+)?)) *(kb|mb|gb|tb|pb)$/i;function i(e,n){if(!Number.isFinite(e))return null;var i=Math.abs(e),a=n&&n.thousandsSeparator||"",o=n&&n.unitSeparator||"",l=n&&void 0!==n.decimalPlaces?n.decimalPlaces:2,c=Boolean(n&&n.fixedDecimals),h=n&&n.unit||"";h&&s[h.toLowerCase()]||(h=i>=s.pb?"PB":i>=s.tb?"TB":i>=s.gb?"GB":i>=s.mb?"MB":i>=s.kb?"KB":"B");var d=(e/s[h.toLowerCase()]).toFixed(l);return c||(d=d.replace(r,"$1")),a&&(d=d.split(".").map((function(e,r){return 0===r?e.replace(t,a):e})).join(".")),d+o+h}function a(e){if("number"==typeof e&&!isNaN(e))return e;if("string"!=typeof e)return null;var t,r=n.exec(e),i="b";return r?(t=parseFloat(r[1]),i=r[4].toLowerCase()):(t=parseInt(e,10),i="b"),Math.floor(s[i]*t)}}},r={};function s(e){var n=r[e];if(void 0!==n)return n.exports;var i=r[e]={exports:{}},a=!0;try{t[e](i,i.exports,s),a=!1}finally{a&&delete r[e]}return i.exports}void 0!==s&&(s.ab=__dirname+"/");var n=s(56);e.exports=n})()},"./dist/compiled/content-type/index.js":e=>{(()=>{"use strict";"undefined"!=typeof __nccwpck_require__&&(__nccwpck_require__.ab=__dirname+"/");var t={};(()=>{var e=t,r=/; *([!#$%&'*+.^_`|~0-9A-Za-z-]+) *= *("(?:[\u000b\u0020\u0021\u0023-\u005b\u005d-\u007e\u0080-\u00ff]|\\[\u000b\u0020-\u00ff])*"|[!#$%&'*+.^_`|~0-9A-Za-z-]+) */g,s=/^[\u000b\u0020-\u007e\u0080-\u00ff]+$/,n=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+$/,i=/\\([\u000b\u0020-\u00ff])/g,a=/([\\"])/g,o=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+\/[!#$%&'*+.^_`|~0-9A-Za-z-]+$/;function l(e){var t=String(e);if(n.test(t))return t;if(t.length>0&&!s.test(t))throw new TypeError("invalid parameter value");return'"'+t.replace(a,"\\$1")+'"'}function c(e){this.parameters=Object.create(null),this.type=e}e.format=function(e){if(!e||"object"!=typeof e)throw new TypeError("argument obj is required");var t=e.parameters,r=e.type;if(!r||!o.test(r))throw new TypeError("invalid type");var s=r;if(t&&"object"==typeof t)for(var i,a=Object.keys(t).sort(),c=0;c<a.length;c++){if(i=a[c],!n.test(i))throw new TypeError("invalid parameter name");s+="; "+i+"="+l(t[i])}return s},e.parse=function(e){if(!e)throw new TypeError("argument string is required");var t="object"==typeof e?function(e){var t;if("function"==typeof e.getHeader?t=e.getHeader("content-type"):"object"==typeof e.headers&&(t=e.headers&&e.headers["content-type"]),"string"!=typeof t)throw new TypeError("content-type header is missing from object");return t}(e):e;if("string"!=typeof t)throw new TypeError("argument string is required to be a string");var s=t.indexOf(";"),n=-1!==s?t.substr(0,s).trim():t.trim();if(!o.test(n))throw new TypeError("invalid media type");var a=new c(n.toLowerCase());if(-1!==s){var l,h,d;for(r.lastIndex=s;h=r.exec(t);){if(h.index!==s)throw new TypeError("invalid parameter format");s+=h[0].length,l=h[1].toLowerCase(),'"'===(d=h[2])[0]&&(d=d.substr(1,d.length-2).replace(i,"$1")),a.parameters[l]=d}if(s!==t.length)throw new TypeError("invalid parameter format")}return a}})(),e.exports=t})()},"./dist/compiled/cookie/index.js":e=>{(()=>{"use strict";"undefined"!=typeof __nccwpck_require__&&(__nccwpck_require__.ab=__dirname+"/");var t={};(()=>{var e=t;e.parse=function(e,t){if("string"!=typeof e)throw new TypeError("argument str must be a string");for(var s={},i=t||{},o=e.split(n),l=i.decode||r,c=0;c<o.length;c++){var h=o[c],d=h.indexOf("=");if(!(d<0)){var u=h.substr(0,d).trim(),p=h.substr(++d,h.length).trim();'"'==p[0]&&(p=p.slice(1,-1)),null==s[u]&&(s[u]=a(p,l))}}return s},e.serialize=function(e,t,r){var n=r||{},a=n.encode||s;if("function"!=typeof a)throw new TypeError("option encode is invalid");if(!i.test(e))throw new TypeError("argument name is invalid");var o=a(t);if(o&&!i.test(o))throw new TypeError("argument val is invalid");var l=e+"="+o;if(null!=n.maxAge){var c=n.maxAge-0;if(isNaN(c)||!isFinite(c))throw new TypeError("option maxAge is invalid");l+="; Max-Age="+Math.floor(c)}if(n.domain){if(!i.test(n.domain))throw new TypeError("option domain is invalid");l+="; Domain="+n.domain}if(n.path){if(!i.test(n.path))throw new TypeError("option path is invalid");l+="; Path="+n.path}if(n.expires){if("function"!=typeof n.expires.toUTCString)throw new TypeError("option expires is invalid");l+="; Expires="+n.expires.toUTCString()}if(n.httpOnly&&(l+="; HttpOnly"),n.secure&&(l+="; Secure"),n.sameSite)switch("string"==typeof n.sameSite?n.sameSite.toLowerCase():n.sameSite){case!0:l+="; SameSite=Strict";break;case"lax":l+="; SameSite=Lax";break;case"strict":l+="; SameSite=Strict";break;case"none":l+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return l};var r=decodeURIComponent,s=encodeURIComponent,n=/; */,i=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function a(e,t){try{return t(e)}catch(t){return e}}})(),e.exports=t})()},"./dist/compiled/fresh/index.js":e=>{(()=>{"use strict";var t={695:e=>{var t=/(?:^|,)\s*?no-cache\s*?(?:,|$)/;function r(e){var t=e&&Date.parse(e);return"number"==typeof t?t:NaN}e.exports=function(e,s){var n=e["if-modified-since"],i=e["if-none-match"];if(!n&&!i)return!1;var a=e["cache-control"];if(a&&t.test(a))return!1;if(i&&"*"!==i){var o=s.etag;if(!o)return!1;for(var l=!0,c=function(e){for(var t=0,r=[],s=0,n=0,i=e.length;n<i;n++)switch(e.charCodeAt(n)){case 32:s===t&&(s=t=n+1);break;case 44:r.push(e.substring(s,t)),s=t=n+1;break;default:t=n+1}return r.push(e.substring(s,t)),r}(i),h=0;h<c.length;h++){var d=c[h];if(d===o||d==="W/"+o||"W/"+d===o){l=!1;break}}if(l)return!1}if(n){var u=s["last-modified"];if(!(u&&r(u)<=r(n)))return!1}return!0}}},r={};function s(e){var n=r[e];if(void 0!==n)return n.exports;var i=r[e]={exports:{}},a=!0;try{t[e](i,i.exports,s),a=!1}finally{a&&delete r[e]}return i.exports}void 0!==s&&(s.ab=__dirname+"/");var n=s(695);e.exports=n})()},"./dist/compiled/lru-cache/index.js":e=>{(()=>{"use strict";var t={806:(e,t,r)=>{const s=r(190),n=Symbol("max"),i=Symbol("length"),a=Symbol("lengthCalculator"),o=Symbol("allowStale"),l=Symbol("maxAge"),c=Symbol("dispose"),h=Symbol("noDisposeOnSet"),d=Symbol("lruList"),u=Symbol("cache"),p=Symbol("updateAgeOnGet"),f=()=>1,m=(e,t,r)=>{const s=e[u].get(t);if(s){const t=s.value;if(g(e,t)){if(v(e,s),!e[o])return}else r&&(e[p]&&(s.value.now=Date.now()),e[d].unshiftNode(s));return t.value}},g=(e,t)=>{if(!t||!t.maxAge&&!e[l])return!1;const r=Date.now()-t.now;return t.maxAge?r>t.maxAge:e[l]&&r>e[l]},_=e=>{if(e[i]>e[n])for(let t=e[d].tail;e[i]>e[n]&&null!==t;){const r=t.prev;v(e,t),t=r}},v=(e,t)=>{if(t){const r=t.value;e[c]&&e[c](r.key,r.value),e[i]-=r.length,e[u].delete(r.key),e[d].removeNode(t)}};class y{constructor(e,t,r,s,n){this.key=e,this.value=t,this.length=r,this.now=s,this.maxAge=n||0}}const w=(e,t,r,s)=>{let n=r.value;g(e,n)&&(v(e,r),e[o]||(n=void 0)),n&&t.call(s,n.value,n.key,e)};e.exports=class{constructor(e){if("number"==typeof e&&(e={max:e}),e||(e={}),e.max&&("number"!=typeof e.max||e.max<0))throw new TypeError("max must be a non-negative number");this[n]=e.max||1/0;const t=e.length||f;if(this[a]="function"!=typeof t?f:t,this[o]=e.stale||!1,e.maxAge&&"number"!=typeof e.maxAge)throw new TypeError("maxAge must be a number");this[l]=e.maxAge||0,this[c]=e.dispose,this[h]=e.noDisposeOnSet||!1,this[p]=e.updateAgeOnGet||!1,this.reset()}set max(e){if("number"!=typeof e||e<0)throw new TypeError("max must be a non-negative number");this[n]=e||1/0,_(this)}get max(){return this[n]}set allowStale(e){this[o]=!!e}get allowStale(){return this[o]}set maxAge(e){if("number"!=typeof e)throw new TypeError("maxAge must be a non-negative number");this[l]=e,_(this)}get maxAge(){return this[l]}set lengthCalculator(e){"function"!=typeof e&&(e=f),e!==this[a]&&(this[a]=e,this[i]=0,this[d].forEach((e=>{e.length=this[a](e.value,e.key),this[i]+=e.length}))),_(this)}get lengthCalculator(){return this[a]}get length(){return this[i]}get itemCount(){return this[d].length}rforEach(e,t){t=t||this;for(let r=this[d].tail;null!==r;){const s=r.prev;w(this,e,r,t),r=s}}forEach(e,t){t=t||this;for(let r=this[d].head;null!==r;){const s=r.next;w(this,e,r,t),r=s}}keys(){return this[d].toArray().map((e=>e.key))}values(){return this[d].toArray().map((e=>e.value))}reset(){this[c]&&this[d]&&this[d].length&&this[d].forEach((e=>this[c](e.key,e.value))),this[u]=new Map,this[d]=new s,this[i]=0}dump(){return this[d].map((e=>!g(this,e)&&{k:e.key,v:e.value,e:e.now+(e.maxAge||0)})).toArray().filter((e=>e))}dumpLru(){return this[d]}set(e,t,r){if((r=r||this[l])&&"number"!=typeof r)throw new TypeError("maxAge must be a number");const s=r?Date.now():0,o=this[a](t,e);if(this[u].has(e)){if(o>this[n])return v(this,this[u].get(e)),!1;const a=this[u].get(e).value;return this[c]&&(this[h]||this[c](e,a.value)),a.now=s,a.maxAge=r,a.value=t,this[i]+=o-a.length,a.length=o,this.get(e),_(this),!0}const p=new y(e,t,o,s,r);return p.length>this[n]?(this[c]&&this[c](e,t),!1):(this[i]+=p.length,this[d].unshift(p),this[u].set(e,this[d].head),_(this),!0)}has(e){if(!this[u].has(e))return!1;const t=this[u].get(e).value;return!g(this,t)}get(e){return m(this,e,!0)}peek(e){return m(this,e,!1)}pop(){const e=this[d].tail;return e?(v(this,e),e.value):null}del(e){v(this,this[u].get(e))}load(e){this.reset();const t=Date.now();for(let r=e.length-1;r>=0;r--){const s=e[r],n=s.e||0;if(0===n)this.set(s.k,s.v);else{const e=n-t;e>0&&this.set(s.k,s.v,e)}}}prune(){this[u].forEach(((e,t)=>m(this,t,!1)))}}},76:e=>{e.exports=function(e){e.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}},190:(e,t,r)=>{function s(e){var t=this;if(t instanceof s||(t=new s),t.tail=null,t.head=null,t.length=0,e&&"function"==typeof e.forEach)e.forEach((function(e){t.push(e)}));else if(arguments.length>0)for(var r=0,n=arguments.length;r<n;r++)t.push(arguments[r]);return t}function n(e,t,r){var s=t===e.head?new o(r,null,t,e):new o(r,t,t.next,e);return null===s.next&&(e.tail=s),null===s.prev&&(e.head=s),e.length++,s}function i(e,t){e.tail=new o(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function a(e,t){e.head=new o(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function o(e,t,r,s){if(!(this instanceof o))return new o(e,t,r,s);this.list=s,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}e.exports=s,s.Node=o,s.create=s,s.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,r=e.prev;return t&&(t.prev=r),r&&(r.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=r),e.list.length--,e.next=null,e.prev=null,e.list=null,t},s.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}},s.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}},s.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)i(this,arguments[e]);return this.length},s.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)a(this,arguments[e]);return this.length},s.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}},s.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}},s.prototype.forEach=function(e,t){t=t||this;for(var r=this.head,s=0;null!==r;s++)e.call(t,r.value,s,this),r=r.next},s.prototype.forEachReverse=function(e,t){t=t||this;for(var r=this.tail,s=this.length-1;null!==r;s--)e.call(t,r.value,s,this),r=r.prev},s.prototype.get=function(e){for(var t=0,r=this.head;null!==r&&t<e;t++)r=r.next;if(t===e&&null!==r)return r.value},s.prototype.getReverse=function(e){for(var t=0,r=this.tail;null!==r&&t<e;t++)r=r.prev;if(t===e&&null!==r)return r.value},s.prototype.map=function(e,t){t=t||this;for(var r=new s,n=this.head;null!==n;)r.push(e.call(t,n.value,this)),n=n.next;return r},s.prototype.mapReverse=function(e,t){t=t||this;for(var r=new s,n=this.tail;null!==n;)r.push(e.call(t,n.value,this)),n=n.prev;return r},s.prototype.reduce=function(e,t){var r,s=this.head;if(arguments.length>1)r=t;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");s=this.head.next,r=this.head.value}for(var n=0;null!==s;n++)r=e(r,s.value,n),s=s.next;return r},s.prototype.reduceReverse=function(e,t){var r,s=this.tail;if(arguments.length>1)r=t;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");s=this.tail.prev,r=this.tail.value}for(var n=this.length-1;null!==s;n--)r=e(r,s.value,n),s=s.prev;return r},s.prototype.toArray=function(){for(var e=new Array(this.length),t=0,r=this.head;null!==r;t++)e[t]=r.value,r=r.next;return e},s.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,r=this.tail;null!==r;t++)e[t]=r.value,r=r.prev;return e},s.prototype.slice=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var r=new s;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var n=0,i=this.head;null!==i&&n<e;n++)i=i.next;for(;null!==i&&n<t;n++,i=i.next)r.push(i.value);return r},s.prototype.sliceReverse=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var r=new s;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var n=this.length,i=this.tail;null!==i&&n>t;n--)i=i.prev;for(;null!==i&&n>e;n--,i=i.prev)r.push(i.value);return r},s.prototype.splice=function(e,t){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var r=0,s=this.head;null!==s&&r<e;r++)s=s.next;var i=[];for(r=0;s&&r<t;r++)i.push(s.value),s=this.removeNode(s);for(null===s&&(s=this.tail),s!==this.head&&s!==this.tail&&(s=s.prev),r=2;r<arguments.length;r++)s=n(this,s,arguments[r]);return i},s.prototype.reverse=function(){for(var e=this.head,t=this.tail,r=e;null!==r;r=r.prev){var s=r.prev;r.prev=r.next,r.next=s}return this.head=t,this.tail=e,this};try{r(76)(s)}catch(e){}}},r={};function s(e){var n=r[e];if(void 0!==n)return n.exports;var i=r[e]={exports:{}},a=!0;try{t[e](i,i.exports,s),a=!1}finally{a&&delete r[e]}return i.exports}void 0!==s&&(s.ab=__dirname+"/");var n=s(806);e.exports=n})()},"./dist/compiled/path-to-regexp/index.js":(e,t)=>{"use strict";function r(e,t){void 0===t&&(t={});for(var r=function(e){for(var t=[],r=0;r<e.length;){var s=e[r];if("*"!==s&&"+"!==s&&"?"!==s)if("\\"!==s)if("{"!==s)if("}"!==s)if(":"!==s)if("("!==s)t.push({type:"CHAR",index:r,value:e[r++]});else{var n=1,i="";if("?"===e[o=r+1])throw new TypeError('Pattern cannot start with "?" at '+o);for(;o<e.length;)if("\\"!==e[o]){if(")"===e[o]){if(0==--n){o++;break}}else if("("===e[o]&&(n++,"?"!==e[o+1]))throw new TypeError("Capturing groups are not allowed at "+o);i+=e[o++]}else i+=e[o++]+e[o++];if(n)throw new TypeError("Unbalanced pattern at "+r);if(!i)throw new TypeError("Missing pattern at "+r);t.push({type:"PATTERN",index:r,value:i}),r=o}else{for(var a="",o=r+1;o<e.length;){var l=e.charCodeAt(o);if(!(l>=48&&l<=57||l>=65&&l<=90||l>=97&&l<=122||95===l))break;a+=e[o++]}if(!a)throw new TypeError("Missing parameter name at "+r);t.push({type:"NAME",index:r,value:a}),r=o}else t.push({type:"CLOSE",index:r,value:e[r++]});else t.push({type:"OPEN",index:r,value:e[r++]});else t.push({type:"ESCAPED_CHAR",index:r++,value:e[r++]});else t.push({type:"MODIFIER",index:r,value:e[r++]})}return t.push({type:"END",index:r,value:""}),t}(e),n=t.prefixes,i=void 0===n?"./":n,a="[^"+s(t.delimiter||"/#?")+"]+?",o=[],l=0,c=0,h="",d=function(e){if(c<r.length&&r[c].type===e)return r[c++].value},u=function(e){var t=d(e);if(void 0!==t)return t;var s=r[c],n=s.type,i=s.index;throw new TypeError("Unexpected "+n+" at "+i+", expected "+e)},p=function(){for(var e,t="";e=d("CHAR")||d("ESCAPED_CHAR");)t+=e;return t};c<r.length;){var f=d("CHAR"),m=d("NAME"),g=d("PATTERN");if(m||g){var _=f||"";-1===i.indexOf(_)&&(h+=_,_=""),h&&(o.push(h),h=""),o.push({name:m||l++,prefix:_,suffix:"",pattern:g||a,modifier:d("MODIFIER")||""})}else{var v=f||d("ESCAPED_CHAR");if(v)h+=v;else if(h&&(o.push(h),h=""),d("OPEN")){_=p();var y=d("NAME")||"",w=d("PATTERN")||"",b=p();u("CLOSE"),o.push({name:y||(w?l++:""),pattern:y&&!w?a:w,prefix:_,suffix:b,modifier:d("MODIFIER")||""})}else u("END")}}return o}function s(e){return e.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function n(e){return e&&e.sensitive?"":"i"}t.MY=function(e,t){return function(e,t){void 0===t&&(t={});var r=n(t),s=t.encode,i=void 0===s?function(e){return e}:s,a=t.validate,o=void 0===a||a,l=e.map((function(e){if("object"==typeof e)return new RegExp("^(?:"+e.pattern+")$",r)}));return function(t){for(var r="",s=0;s<e.length;s++){var n=e[s];if("string"!=typeof n){var a=t?t[n.name]:void 0,c="?"===n.modifier||"*"===n.modifier,h="*"===n.modifier||"+"===n.modifier;if(Array.isArray(a)){if(!h)throw new TypeError('Expected "'+n.name+'" to not repeat, but got an array');if(0===a.length){if(c)continue;throw new TypeError('Expected "'+n.name+'" to not be empty')}for(var d=0;d<a.length;d++){var u=i(a[d],n);if(o&&!l[s].test(u))throw new TypeError('Expected all "'+n.name+'" to match "'+n.pattern+'", but got "'+u+'"');r+=n.prefix+u+n.suffix}}else if("string"!=typeof a&&"number"!=typeof a){if(!c){var p=h?"an array":"a string";throw new TypeError('Expected "'+n.name+'" to be '+p)}}else{if(u=i(String(a),n),o&&!l[s].test(u))throw new TypeError('Expected "'+n.name+'" to match "'+n.pattern+'", but got "'+u+'"');r+=n.prefix+u+n.suffix}}else r+=n}return r}}(r(e,t),t)},t.WS=function(e,t,r){void 0===r&&(r={});var s=r.decode,n=void 0===s?function(e){return e}:s;return function(r){var s=e.exec(r);if(!s)return!1;for(var i=s[0],a=s.index,o=Object.create(null),l=function(e){if(void 0===s[e])return"continue";var r=t[e-1];"*"===r.modifier||"+"===r.modifier?o[r.name]=s[e].split(r.prefix+r.suffix).map((function(e){return n(e,r)})):o[r.name]=n(s[e],r)},c=1;c<s.length;c++)l(c);return{path:i,index:a,params:o}}},t.Bo=function e(t,i,a){return t instanceof RegExp?function(e,t){if(!t)return e;var r=e.source.match(/\((?!\?)/g);if(r)for(var s=0;s<r.length;s++)t.push({name:s,prefix:"",suffix:"",modifier:"",pattern:""});return e}(t,i):Array.isArray(t)?function(t,r,s){var i=t.map((function(t){return e(t,r,s).source}));return new RegExp("(?:"+i.join("|")+")",n(s))}(t,i,a):function(e,t,i){return function(e,t,r){void 0===r&&(r={});for(var i=r.strict,a=void 0!==i&&i,o=r.start,l=void 0===o||o,c=r.end,h=void 0===c||c,d=r.encode,u=void 0===d?function(e){return e}:d,p="["+s(r.endsWith||"")+"]|$",f="["+s(r.delimiter||"/#?")+"]",m=l?"^":"",g=0,_=e;g<_.length;g++){var v=_[g];if("string"==typeof v)m+=s(u(v));else{var y=s(u(v.prefix)),w=s(u(v.suffix));if(v.pattern)if(t&&t.push(v),y||w)if("+"===v.modifier||"*"===v.modifier){var b="*"===v.modifier?"?":"";m+="(?:"+y+"((?:"+v.pattern+")(?:"+w+y+"(?:"+v.pattern+"))*)"+w+")"+b}else m+="(?:"+y+"("+v.pattern+")"+w+")"+v.modifier;else m+="("+v.pattern+")"+v.modifier;else m+="(?:"+y+w+")"+v.modifier}}if(h)a||(m+=f+"?"),m+=r.endsWith?"(?="+p+")":"$";else{var x=e[e.length-1],E="string"==typeof x?f.indexOf(x[x.length-1])>-1:void 0===x;a||(m+="(?:"+f+"(?="+p+"))?"),E||(m+="(?="+f+"|"+p+")")}return new RegExp(m,n(r))}(r(e,i),t,i)}(t,i,a)}},"./dist/compiled/ws/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{(()=>{var __webpack_modules__={28:(e,t,r)=>{"use strict";const s=r(335);s.createWebSocketStream=r(551),s.Server=r(597),s.Receiver=r(157),s.Sender=r(769),s.WebSocket=s,s.WebSocketServer=s.Server,e.exports=s},214:(e,t,r)=>{"use strict";const{EMPTY_BUFFER:s}=r(217);function n(e,t){if(0===e.length)return s;if(1===e.length)return e[0];const r=Buffer.allocUnsafe(t);let n=0;for(let t=0;t<e.length;t++){const s=e[t];r.set(s,n),n+=s.length}return n<t?r.slice(0,n):r}function i(e,t,r,s,n){for(let i=0;i<n;i++)r[s+i]=e[i]^t[3&i]}function a(e,t){for(let r=0;r<e.length;r++)e[r]^=t[3&r]}function o(e){return e.byteLength===e.buffer.byteLength?e.buffer:e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}function l(e){if(l.readOnly=!0,Buffer.isBuffer(e))return e;let t;return e instanceof ArrayBuffer?t=Buffer.from(e):ArrayBuffer.isView(e)?t=Buffer.from(e.buffer,e.byteOffset,e.byteLength):(t=Buffer.from(e),l.readOnly=!1),t}try{const t=r(605);e.exports={concat:n,mask(e,r,s,n,a){a<48?i(e,r,s,n,a):t.mask(e,r,s,n,a)},toArrayBuffer:o,toBuffer:l,unmask(e,r){e.length<32?a(e,r):t.unmask(e,r)}}}catch(t){e.exports={concat:n,mask:i,toArrayBuffer:o,toBuffer:l,unmask:a}}},217:e=>{"use strict";e.exports={BINARY_TYPES:["nodebuffer","arraybuffer","fragments"],EMPTY_BUFFER:Buffer.alloc(0),GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",kForOnEventAttribute:Symbol("kIsForOnEventAttribute"),kListener:Symbol("kListener"),kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),NOOP:()=>{}}},874:(e,t,r)=>{"use strict";const{kForOnEventAttribute:s,kListener:n}=r(217),i=Symbol("kCode"),a=Symbol("kData"),o=Symbol("kError"),l=Symbol("kMessage"),c=Symbol("kReason"),h=Symbol("kTarget"),d=Symbol("kType"),u=Symbol("kWasClean");class p{constructor(e){this[h]=null,this[d]=e}get target(){return this[h]}get type(){return this[d]}}Object.defineProperty(p.prototype,"target",{enumerable:!0}),Object.defineProperty(p.prototype,"type",{enumerable:!0});class f extends p{constructor(e,t={}){super(e),this[i]=void 0===t.code?0:t.code,this[c]=void 0===t.reason?"":t.reason,this[u]=void 0!==t.wasClean&&t.wasClean}get code(){return this[i]}get reason(){return this[c]}get wasClean(){return this[u]}}Object.defineProperty(f.prototype,"code",{enumerable:!0}),Object.defineProperty(f.prototype,"reason",{enumerable:!0}),Object.defineProperty(f.prototype,"wasClean",{enumerable:!0});class m extends p{constructor(e,t={}){super(e),this[o]=void 0===t.error?null:t.error,this[l]=void 0===t.message?"":t.message}get error(){return this[o]}get message(){return this[l]}}Object.defineProperty(m.prototype,"error",{enumerable:!0}),Object.defineProperty(m.prototype,"message",{enumerable:!0});class g extends p{constructor(e,t={}){super(e),this[a]=void 0===t.data?null:t.data}get data(){return this[a]}}Object.defineProperty(g.prototype,"data",{enumerable:!0});const _={addEventListener(e,t,r={}){let i;if("message"===e)i=function(e,r){const s=new g("message",{data:r?e:e.toString()});s[h]=this,t.call(this,s)};else if("close"===e)i=function(e,r){const s=new f("close",{code:e,reason:r.toString(),wasClean:this._closeFrameReceived&&this._closeFrameSent});s[h]=this,t.call(this,s)};else if("error"===e)i=function(e){const r=new m("error",{error:e,message:e.message});r[h]=this,t.call(this,r)};else{if("open"!==e)return;i=function(){const e=new p("open");e[h]=this,t.call(this,e)}}i[s]=!!r[s],i[n]=t,r.once?this.once(e,i):this.on(e,i)},removeEventListener(e,t){for(const r of this.listeners(e))if(r[n]===t&&!r[s]){this.removeListener(e,r);break}}};e.exports={CloseEvent:f,ErrorEvent:m,Event:p,EventTarget:_,MessageEvent:g}},725:(e,t,r)=>{"use strict";const{tokenChars:s}=r(848);function n(e,t,r){void 0===e[t]?e[t]=[r]:e[t].push(r)}e.exports={format:function(e){return Object.keys(e).map((t=>{let r=e[t];return Array.isArray(r)||(r=[r]),r.map((e=>[t].concat(Object.keys(e).map((t=>{let r=e[t];return Array.isArray(r)||(r=[r]),r.map((e=>!0===e?t:`${t}=${e}`)).join("; ")}))).join("; "))).join(", ")})).join(", ")},parse:function(e){const t=Object.create(null);let r,i,a=Object.create(null),o=!1,l=!1,c=!1,h=-1,d=-1,u=-1,p=0;for(;p<e.length;p++)if(d=e.charCodeAt(p),void 0===r)if(-1===u&&1===s[d])-1===h&&(h=p);else if(0===p||32!==d&&9!==d){if(59!==d&&44!==d)throw new SyntaxError(`Unexpected character at index ${p}`);{if(-1===h)throw new SyntaxError(`Unexpected character at index ${p}`);-1===u&&(u=p);const s=e.slice(h,u);44===d?(n(t,s,a),a=Object.create(null)):r=s,h=u=-1}}else-1===u&&-1!==h&&(u=p);else if(void 0===i)if(-1===u&&1===s[d])-1===h&&(h=p);else if(32===d||9===d)-1===u&&-1!==h&&(u=p);else if(59===d||44===d){if(-1===h)throw new SyntaxError(`Unexpected character at index ${p}`);-1===u&&(u=p),n(a,e.slice(h,u),!0),44===d&&(n(t,r,a),a=Object.create(null),r=void 0),h=u=-1}else{if(61!==d||-1===h||-1!==u)throw new SyntaxError(`Unexpected character at index ${p}`);i=e.slice(h,p),h=u=-1}else if(l){if(1!==s[d])throw new SyntaxError(`Unexpected character at index ${p}`);-1===h?h=p:o||(o=!0),l=!1}else if(c)if(1===s[d])-1===h&&(h=p);else if(34===d&&-1!==h)c=!1,u=p;else{if(92!==d)throw new SyntaxError(`Unexpected character at index ${p}`);l=!0}else if(34===d&&61===e.charCodeAt(p-1))c=!0;else if(-1===u&&1===s[d])-1===h&&(h=p);else if(-1===h||32!==d&&9!==d){if(59!==d&&44!==d)throw new SyntaxError(`Unexpected character at index ${p}`);{if(-1===h)throw new SyntaxError(`Unexpected character at index ${p}`);-1===u&&(u=p);let s=e.slice(h,u);o&&(s=s.replace(/\\/g,""),o=!1),n(a,i,s),44===d&&(n(t,r,a),a=Object.create(null),r=void 0),i=void 0,h=u=-1}}else-1===u&&(u=p);if(-1===h||c||32===d||9===d)throw new SyntaxError("Unexpected end of input");-1===u&&(u=p);const f=e.slice(h,u);return void 0===r?n(t,f,a):(void 0===i?n(a,f,!0):n(a,i,o?f.replace(/\\/g,""):f),n(t,r,a)),t}}},462:e=>{"use strict";const t=Symbol("kDone"),r=Symbol("kRun");e.exports=class{constructor(e){this[t]=()=>{this.pending--,this[r]()},this.concurrency=e||1/0,this.jobs=[],this.pending=0}add(e){this.jobs.push(e),this[r]()}[r](){if(this.pending!==this.concurrency&&this.jobs.length){const e=this.jobs.shift();this.pending++,e(this[t])}}}},290:(e,t,r)=>{"use strict";const s=r(796),n=r(214),i=r(462),{kStatusCode:a}=r(217),o=Buffer.from([0,0,255,255]),l=Symbol("permessage-deflate"),c=Symbol("total-length"),h=Symbol("callback"),d=Symbol("buffers"),u=Symbol("error");let p;function f(e){this[d].push(e),this[c]+=e.length}function m(e){this[c]+=e.length,this[l]._maxPayload<1||this[c]<=this[l]._maxPayload?this[d].push(e):(this[u]=new RangeError("Max payload size exceeded"),this[u].code="WS_ERR_UNSUPPORTED_MESSAGE_LENGTH",this[u][a]=1009,this.removeListener("data",m),this.reset())}function g(e){this[l]._inflate=null,e[a]=1007,this[h](e)}e.exports=class{constructor(e,t,r){if(this._maxPayload=0|r,this._options=e||{},this._threshold=void 0!==this._options.threshold?this._options.threshold:1024,this._isServer=!!t,this._deflate=null,this._inflate=null,this.params=null,!p){const e=void 0!==this._options.concurrencyLimit?this._options.concurrencyLimit:10;p=new i(e)}}static get extensionName(){return"permessage-deflate"}offer(){const e={};return this._options.serverNoContextTakeover&&(e.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(e.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(e.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?e.client_max_window_bits=this._options.clientMaxWindowBits:null==this._options.clientMaxWindowBits&&(e.client_max_window_bits=!0),e}accept(e){return e=this.normalizeParams(e),this.params=this._isServer?this.acceptAsServer(e):this.acceptAsClient(e),this.params}cleanup(){if(this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate){const e=this._deflate[h];this._deflate.close(),this._deflate=null,e&&e(new Error("The deflate stream was closed while data was being processed"))}}acceptAsServer(e){const t=this._options,r=e.find((e=>!(!1===t.serverNoContextTakeover&&e.server_no_context_takeover||e.server_max_window_bits&&(!1===t.serverMaxWindowBits||"number"==typeof t.serverMaxWindowBits&&t.serverMaxWindowBits>e.server_max_window_bits)||"number"==typeof t.clientMaxWindowBits&&!e.client_max_window_bits)));if(!r)throw new Error("None of the extension offers can be accepted");return t.serverNoContextTakeover&&(r.server_no_context_takeover=!0),t.clientNoContextTakeover&&(r.client_no_context_takeover=!0),"number"==typeof t.serverMaxWindowBits&&(r.server_max_window_bits=t.serverMaxWindowBits),"number"==typeof t.clientMaxWindowBits?r.client_max_window_bits=t.clientMaxWindowBits:!0!==r.client_max_window_bits&&!1!==t.clientMaxWindowBits||delete r.client_max_window_bits,r}acceptAsClient(e){const t=e[0];if(!1===this._options.clientNoContextTakeover&&t.client_no_context_takeover)throw new Error('Unexpected parameter "client_no_context_takeover"');if(t.client_max_window_bits){if(!1===this._options.clientMaxWindowBits||"number"==typeof this._options.clientMaxWindowBits&&t.client_max_window_bits>this._options.clientMaxWindowBits)throw new Error('Unexpected or invalid parameter "client_max_window_bits"')}else"number"==typeof this._options.clientMaxWindowBits&&(t.client_max_window_bits=this._options.clientMaxWindowBits);return t}normalizeParams(e){return e.forEach((e=>{Object.keys(e).forEach((t=>{let r=e[t];if(r.length>1)throw new Error(`Parameter "${t}" must have only a single value`);if(r=r[0],"client_max_window_bits"===t){if(!0!==r){const e=+r;if(!Number.isInteger(e)||e<8||e>15)throw new TypeError(`Invalid value for parameter "${t}": ${r}`);r=e}else if(!this._isServer)throw new TypeError(`Invalid value for parameter "${t}": ${r}`)}else if("server_max_window_bits"===t){const e=+r;if(!Number.isInteger(e)||e<8||e>15)throw new TypeError(`Invalid value for parameter "${t}": ${r}`);r=e}else{if("client_no_context_takeover"!==t&&"server_no_context_takeover"!==t)throw new Error(`Unknown parameter "${t}"`);if(!0!==r)throw new TypeError(`Invalid value for parameter "${t}": ${r}`)}e[t]=r}))})),e}decompress(e,t,r){p.add((s=>{this._decompress(e,t,((e,t)=>{s(),r(e,t)}))}))}compress(e,t,r){p.add((s=>{this._compress(e,t,((e,t)=>{s(),r(e,t)}))}))}_decompress(e,t,r){const i=this._isServer?"client":"server";if(!this._inflate){const e=`${i}_max_window_bits`,t="number"!=typeof this.params[e]?s.Z_DEFAULT_WINDOWBITS:this.params[e];this._inflate=s.createInflateRaw({...this._options.zlibInflateOptions,windowBits:t}),this._inflate[l]=this,this._inflate[c]=0,this._inflate[d]=[],this._inflate.on("error",g),this._inflate.on("data",m)}this._inflate[h]=r,this._inflate.write(e),t&&this._inflate.write(o),this._inflate.flush((()=>{const e=this._inflate[u];if(e)return this._inflate.close(),this._inflate=null,void r(e);const s=n.concat(this._inflate[d],this._inflate[c]);this._inflate._readableState.endEmitted?(this._inflate.close(),this._inflate=null):(this._inflate[c]=0,this._inflate[d]=[],t&&this.params[`${i}_no_context_takeover`]&&this._inflate.reset()),r(null,s)}))}_compress(e,t,r){const i=this._isServer?"server":"client";if(!this._deflate){const e=`${i}_max_window_bits`,t="number"!=typeof this.params[e]?s.Z_DEFAULT_WINDOWBITS:this.params[e];this._deflate=s.createDeflateRaw({...this._options.zlibDeflateOptions,windowBits:t}),this._deflate[c]=0,this._deflate[d]=[],this._deflate.on("data",f)}this._deflate[h]=r,this._deflate.write(e),this._deflate.flush(s.Z_SYNC_FLUSH,(()=>{if(!this._deflate)return;let e=n.concat(this._deflate[d],this._deflate[c]);t&&(e=e.slice(0,e.length-4)),this._deflate[h]=null,this._deflate[c]=0,this._deflate[d]=[],t&&this.params[`${i}_no_context_takeover`]&&this._deflate.reset(),r(null,e)}))}}},157:(e,t,r)=>{"use strict";const{Writable:s}=r(781),n=r(290),{BINARY_TYPES:i,EMPTY_BUFFER:a,kStatusCode:o,kWebSocket:l}=r(217),{concat:c,toArrayBuffer:h,unmask:d}=r(214),{isValidStatusCode:u,isValidUTF8:p}=r(848);function f(e,t,r,s,n){const i=new e(r?`Invalid WebSocket frame: ${t}`:t);return Error.captureStackTrace(i,f),i.code=n,i[o]=s,i}e.exports=class extends s{constructor(e={}){super(),this._binaryType=e.binaryType||i[0],this._extensions=e.extensions||{},this._isServer=!!e.isServer,this._maxPayload=0|e.maxPayload,this._skipUTF8Validation=!!e.skipUTF8Validation,this[l]=void 0,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._state=0,this._loop=!1}_write(e,t,r){if(8===this._opcode&&0==this._state)return r();this._bufferedBytes+=e.length,this._buffers.push(e),this.startLoop(r)}consume(e){if(this._bufferedBytes-=e,e===this._buffers[0].length)return this._buffers.shift();if(e<this._buffers[0].length){const t=this._buffers[0];return this._buffers[0]=t.slice(e),t.slice(0,e)}const t=Buffer.allocUnsafe(e);do{const r=this._buffers[0],s=t.length-e;e>=r.length?t.set(this._buffers.shift(),s):(t.set(new Uint8Array(r.buffer,r.byteOffset,e),s),this._buffers[0]=r.slice(e)),e-=r.length}while(e>0);return t}startLoop(e){let t;this._loop=!0;do{switch(this._state){case 0:t=this.getInfo();break;case 1:t=this.getPayloadLength16();break;case 2:t=this.getPayloadLength64();break;case 3:this.getMask();break;case 4:t=this.getData(e);break;default:return void(this._loop=!1)}}while(this._loop);e(t)}getInfo(){if(this._bufferedBytes<2)return void(this._loop=!1);const e=this.consume(2);if(0!=(48&e[0]))return this._loop=!1,f(RangeError,"RSV2 and RSV3 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_2_3");const t=64==(64&e[0]);if(t&&!this._extensions[n.extensionName])return this._loop=!1,f(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(this._fin=128==(128&e[0]),this._opcode=15&e[0],this._payloadLength=127&e[1],0===this._opcode){if(t)return this._loop=!1,f(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(!this._fragmented)return this._loop=!1,f(RangeError,"invalid opcode 0",!0,1002,"WS_ERR_INVALID_OPCODE");this._opcode=this._fragmented}else if(1===this._opcode||2===this._opcode){if(this._fragmented)return this._loop=!1,f(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");this._compressed=t}else{if(!(this._opcode>7&&this._opcode<11))return this._loop=!1,f(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");if(!this._fin)return this._loop=!1,f(RangeError,"FIN must be set",!0,1002,"WS_ERR_EXPECTED_FIN");if(t)return this._loop=!1,f(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(this._payloadLength>125)return this._loop=!1,f(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH")}if(this._fin||this._fragmented||(this._fragmented=this._opcode),this._masked=128==(128&e[1]),this._isServer){if(!this._masked)return this._loop=!1,f(RangeError,"MASK must be set",!0,1002,"WS_ERR_EXPECTED_MASK")}else if(this._masked)return this._loop=!1,f(RangeError,"MASK must be clear",!0,1002,"WS_ERR_UNEXPECTED_MASK");if(126===this._payloadLength)this._state=1;else{if(127!==this._payloadLength)return this.haveLength();this._state=2}}getPayloadLength16(){if(!(this._bufferedBytes<2))return this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength();this._loop=!1}getPayloadLength64(){if(this._bufferedBytes<8)return void(this._loop=!1);const e=this.consume(8),t=e.readUInt32BE(0);return t>Math.pow(2,21)-1?(this._loop=!1,f(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009,"WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH")):(this._payloadLength=t*Math.pow(2,32)+e.readUInt32BE(4),this.haveLength())}haveLength(){if(this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0))return this._loop=!1,f(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");this._masked?this._state=3:this._state=4}getMask(){this._bufferedBytes<4?this._loop=!1:(this._mask=this.consume(4),this._state=4)}getData(e){let t=a;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength)return void(this._loop=!1);t=this.consume(this._payloadLength),this._masked&&d(t,this._mask)}return this._opcode>7?this.controlMessage(t):this._compressed?(this._state=5,void this.decompress(t,e)):(t.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(t)),this.dataMessage())}decompress(e,t){this._extensions[n.extensionName].decompress(e,this._fin,((e,r)=>{if(e)return t(e);if(r.length){if(this._messageLength+=r.length,this._messageLength>this._maxPayload&&this._maxPayload>0)return t(f(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH"));this._fragments.push(r)}const s=this.dataMessage();if(s)return t(s);this.startLoop(t)}))}dataMessage(){if(this._fin){const e=this._messageLength,t=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],2===this._opcode){let r;r="nodebuffer"===this._binaryType?c(t,e):"arraybuffer"===this._binaryType?h(c(t,e)):t,this.emit("message",r,!0)}else{const r=c(t,e);if(!this._skipUTF8Validation&&!p(r))return this._loop=!1,f(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");this.emit("message",r,!1)}}this._state=0}controlMessage(e){if(8===this._opcode)if(this._loop=!1,0===e.length)this.emit("conclude",1005,a),this.end();else{if(1===e.length)return f(RangeError,"invalid payload length 1",!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH");{const t=e.readUInt16BE(0);if(!u(t))return f(RangeError,`invalid status code ${t}`,!0,1002,"WS_ERR_INVALID_CLOSE_CODE");const r=e.slice(2);if(!this._skipUTF8Validation&&!p(r))return f(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");this.emit("conclude",t,r),this.end()}}else 9===this._opcode?this.emit("ping",e):this.emit("pong",e);this._state=0}}},769:(e,t,r)=>{"use strict";r(808),r(404);const{randomFillSync:s}=r(113),n=r(290),{EMPTY_BUFFER:i}=r(217),{isValidStatusCode:a}=r(848),{mask:o,toBuffer:l}=r(214),c=Buffer.alloc(4);class h{constructor(e,t){this._extensions=t||{},this._socket=e,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._deflating=!1,this._queue=[]}static frame(e,t){const r=t.mask&&t.readOnly;let n=t.mask?6:2,i=e.length;e.length>=65536?(n+=8,i=127):e.length>125&&(n+=2,i=126);const a=Buffer.allocUnsafe(r?e.length+n:n);return a[0]=t.fin?128|t.opcode:t.opcode,t.rsv1&&(a[0]|=64),a[1]=i,126===i?a.writeUInt16BE(e.length,2):127===i&&(a.writeUInt32BE(0,2),a.writeUInt32BE(e.length,6)),t.mask?(s(c,0,4),a[1]|=128,a[n-4]=c[0],a[n-3]=c[1],a[n-2]=c[2],a[n-1]=c[3],r?(o(e,c,a,n,e.length),[a]):(o(e,c,e,0,e.length),[a,e])):[a,e]}close(e,t,r,s){let n;if(void 0===e)n=i;else{if("number"!=typeof e||!a(e))throw new TypeError("First argument must be a valid error code number");if(void 0!==t&&t.length){const r=Buffer.byteLength(t);if(r>123)throw new RangeError("The message must not be greater than 123 bytes");n=Buffer.allocUnsafe(2+r),n.writeUInt16BE(e,0),"string"==typeof t?n.write(t,2):n.set(t,2)}else n=Buffer.allocUnsafe(2),n.writeUInt16BE(e,0)}this._deflating?this.enqueue([this.doClose,n,r,s]):this.doClose(n,r,s)}doClose(e,t,r){this.sendFrame(h.frame(e,{fin:!0,rsv1:!1,opcode:8,mask:t,readOnly:!1}),r)}ping(e,t,r){const s=l(e);if(s.length>125)throw new RangeError("The data size must not be greater than 125 bytes");this._deflating?this.enqueue([this.doPing,s,t,l.readOnly,r]):this.doPing(s,t,l.readOnly,r)}doPing(e,t,r,s){this.sendFrame(h.frame(e,{fin:!0,rsv1:!1,opcode:9,mask:t,readOnly:r}),s)}pong(e,t,r){const s=l(e);if(s.length>125)throw new RangeError("The data size must not be greater than 125 bytes");this._deflating?this.enqueue([this.doPong,s,t,l.readOnly,r]):this.doPong(s,t,l.readOnly,r)}doPong(e,t,r,s){this.sendFrame(h.frame(e,{fin:!0,rsv1:!1,opcode:10,mask:t,readOnly:r}),s)}send(e,t,r){const s=l(e),i=this._extensions[n.extensionName];let a=t.binary?2:1,o=t.compress;if(this._firstFragment?(this._firstFragment=!1,o&&i&&i.params[i._isServer?"server_no_context_takeover":"client_no_context_takeover"]&&(o=s.length>=i._threshold),this._compress=o):(o=!1,a=0),t.fin&&(this._firstFragment=!0),i){const e={fin:t.fin,rsv1:o,opcode:a,mask:t.mask,readOnly:l.readOnly};this._deflating?this.enqueue([this.dispatch,s,this._compress,e,r]):this.dispatch(s,this._compress,e,r)}else this.sendFrame(h.frame(s,{fin:t.fin,rsv1:!1,opcode:a,mask:t.mask,readOnly:l.readOnly}),r)}dispatch(e,t,r,s){if(!t)return void this.sendFrame(h.frame(e,r),s);const i=this._extensions[n.extensionName];this._bufferedBytes+=e.length,this._deflating=!0,i.compress(e,r.fin,((t,n)=>{if(this._socket.destroyed){const e=new Error("The socket was closed while data was being compressed");"function"==typeof s&&s(e);for(let t=0;t<this._queue.length;t++){const r=this._queue[t][4];"function"==typeof r&&r(e)}}else this._bufferedBytes-=e.length,this._deflating=!1,r.readOnly=!1,this.sendFrame(h.frame(n,r),s),this.dequeue()}))}dequeue(){for(;!this._deflating&&this._queue.length;){const e=this._queue.shift();this._bufferedBytes-=e[1].length,Reflect.apply(e[0],this,e.slice(1))}}enqueue(e){this._bufferedBytes+=e[1].length,this._queue.push(e)}sendFrame(e,t){2===e.length?(this._socket.cork(),this._socket.write(e[0]),this._socket.write(e[1],t),this._socket.uncork()):this._socket.write(e[0],t)}}e.exports=h},551:(e,t,r)=>{"use strict";const{Duplex:s}=r(781);function n(e){e.emit("close")}function i(){!this.destroyed&&this._writableState.finished&&this.destroy()}function a(e){this.removeListener("error",a),this.destroy(),0===this.listenerCount("error")&&this.emit("error",e)}e.exports=function(e,t){let r=!0,o=!0;function l(){r&&e._socket.resume()}e.readyState===e.CONNECTING?e.once("open",(function(){e._receiver.removeAllListeners("drain"),e._receiver.on("drain",l)})):(e._receiver.removeAllListeners("drain"),e._receiver.on("drain",l));const c=new s({...t,autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1});return e.on("message",(function(t,s){const n=!s&&c._readableState.objectMode?t.toString():t;c.push(n)||(r=!1,e._socket.pause())})),e.once("error",(function(e){c.destroyed||(o=!1,c.destroy(e))})),e.once("close",(function(){c.destroyed||c.push(null)})),c._destroy=function(t,r){if(e.readyState===e.CLOSED)return r(t),void process.nextTick(n,c);let s=!1;e.once("error",(function(e){s=!0,r(e)})),e.once("close",(function(){s||r(t),process.nextTick(n,c)})),o&&e.terminate()},c._final=function(t){e.readyState!==e.CONNECTING?null!==e._socket&&(e._socket._writableState.finished?(t(),c._readableState.endEmitted&&c.destroy()):(e._socket.once("finish",(function(){t()})),e.close())):e.once("open",(function(){c._final(t)}))},c._read=function(){e.readyState!==e.OPEN||r||(r=!0,e._receiver._writableState.needDrain||e._socket.resume())},c._write=function(t,r,s){e.readyState!==e.CONNECTING?e.send(t,s):e.once("open",(function(){c._write(t,r,s)}))},c.on("end",i),c.on("error",a),c}},955:(e,t,r)=>{"use strict";const{tokenChars:s}=r(848);e.exports={parse:function(e){const t=new Set;let r=-1,n=-1,i=0;for(;i<e.length;i++){const a=e.charCodeAt(i);if(-1===n&&1===s[a])-1===r&&(r=i);else if(0===i||32!==a&&9!==a){if(44!==a)throw new SyntaxError(`Unexpected character at index ${i}`);{if(-1===r)throw new SyntaxError(`Unexpected character at index ${i}`);-1===n&&(n=i);const s=e.slice(r,n);if(t.has(s))throw new SyntaxError(`The "${s}" subprotocol is duplicated`);t.add(s),r=n=-1}}else-1===n&&-1!==r&&(n=i)}if(-1===r||-1!==n)throw new SyntaxError("Unexpected end of input");const a=e.slice(r,i);if(t.has(a))throw new SyntaxError(`The "${a}" subprotocol is duplicated`);return t.add(a),t}}},848:(e,t,r)=>{"use strict";const s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0];function n(e){return e>=1e3&&e<=1014&&1004!==e&&1005!==e&&1006!==e||e>=3e3&&e<=4999}function i(e){const t=e.length;let r=0;for(;r<t;)if(0==(128&e[r]))r++;else if(192==(224&e[r])){if(r+1===t||128!=(192&e[r+1])||192==(254&e[r]))return!1;r+=2}else if(224==(240&e[r])){if(r+2>=t||128!=(192&e[r+1])||128!=(192&e[r+2])||224===e[r]&&128==(224&e[r+1])||237===e[r]&&160==(224&e[r+1]))return!1;r+=3}else{if(240!=(248&e[r]))return!1;if(r+3>=t||128!=(192&e[r+1])||128!=(192&e[r+2])||128!=(192&e[r+3])||240===e[r]&&128==(240&e[r+1])||244===e[r]&&e[r+1]>143||e[r]>244)return!1;r+=4}return!0}try{const t=r(12);e.exports={isValidStatusCode:n,isValidUTF8:e=>e.length<150?i(e):t(e),tokenChars:s}}catch(t){e.exports={isValidStatusCode:n,isValidUTF8:i,tokenChars:s}}},597:(e,t,r)=>{"use strict";const s=r(361),n=r(685),{createHash:i}=(r(687),r(808),r(404),r(113)),a=r(725),o=r(290),l=r(955),c=r(335),{GUID:h,kWebSocket:d}=r(217),u=/^[+/0-9A-Za-z]{22}==$/;function p(e){e._state=2,e.emit("close")}function f(){this.destroy()}function m(e,t,r,s){e.writable&&(r=r||n.STATUS_CODES[t],s={Connection:"close","Content-Type":"text/html","Content-Length":Buffer.byteLength(r),...s},e.write(`HTTP/1.1 ${t} ${n.STATUS_CODES[t]}\r\n`+Object.keys(s).map((e=>`${e}: ${s[e]}`)).join("\r\n")+"\r\n\r\n"+r)),e.removeListener("error",f),e.destroy()}e.exports=class extends s{constructor(e,t){if(super(),null==(e={maxPayload:104857600,skipUTF8Validation:!1,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,...e}).port&&!e.server&&!e.noServer||null!=e.port&&(e.server||e.noServer)||e.server&&e.noServer)throw new TypeError('One and only one of the "port", "server", or "noServer" options must be specified');if(null!=e.port?(this._server=n.createServer(((e,t)=>{const r=n.STATUS_CODES[426];t.writeHead(426,{"Content-Length":r.length,"Content-Type":"text/plain"}),t.end(r)})),this._server.listen(e.port,e.host,e.backlog,t)):e.server&&(this._server=e.server),this._server){const e=this.emit.bind(this,"connection");this._removeListeners=function(e,t){for(const r of Object.keys(t))e.on(r,t[r]);return function(){for(const r of Object.keys(t))e.removeListener(r,t[r])}}(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(t,r,s)=>{this.handleUpgrade(t,r,s,e)}})}!0===e.perMessageDeflate&&(e.perMessageDeflate={}),e.clientTracking&&(this.clients=new Set,this._shouldEmitClose=!1),this.options=e,this._state=0}address(){if(this.options.noServer)throw new Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(e){if(2===this._state)return e&&this.once("close",(()=>{e(new Error("The server is not running"))})),void process.nextTick(p,this);if(e&&this.once("close",e),1!==this._state)if(this._state=1,this.options.noServer||this.options.server)this._server&&(this._removeListeners(),this._removeListeners=this._server=null),this.clients&&this.clients.size?this._shouldEmitClose=!0:process.nextTick(p,this);else{const e=this._server;this._removeListeners(),this._removeListeners=this._server=null,e.close((()=>{p(this)}))}}shouldHandle(e){if(this.options.path){const t=e.url.indexOf("?");if((-1!==t?e.url.slice(0,t):e.url)!==this.options.path)return!1}return!0}handleUpgrade(e,t,r,s){t.on("error",f);const n=void 0!==e.headers["sec-websocket-key"]&&e.headers["sec-websocket-key"],i=+e.headers["sec-websocket-version"];if("GET"!==e.method||"websocket"!==e.headers.upgrade.toLowerCase()||!n||!u.test(n)||8!==i&&13!==i||!this.shouldHandle(e))return m(t,400);const c=e.headers["sec-websocket-protocol"];let h=new Set;if(void 0!==c)try{h=l.parse(c)}catch(e){return m(t,400)}const d=e.headers["sec-websocket-extensions"],p={};if(this.options.perMessageDeflate&&void 0!==d){const r=new o(this.options.perMessageDeflate,!0,this.options.maxPayload);try{const e=a.parse(d);e[o.extensionName]&&(r.accept(e[o.extensionName]),p[o.extensionName]=r)}catch(e){return m(t,400)}}if(this.options.verifyClient){const a={origin:e.headers[8===i?"sec-websocket-origin":"origin"],secure:!(!e.socket.authorized&&!e.socket.encrypted),req:e};if(2===this.options.verifyClient.length)return void this.options.verifyClient(a,((i,a,o,l)=>{if(!i)return m(t,a||401,o,l);this.completeUpgrade(p,n,h,e,t,r,s)}));if(!this.options.verifyClient(a))return m(t,401)}this.completeUpgrade(p,n,h,e,t,r,s)}completeUpgrade(e,t,r,s,n,l,u){if(!n.readable||!n.writable)return n.destroy();if(n[d])throw new Error("server.handleUpgrade() was called more than once with the same socket, possibly due to a misconfiguration");if(this._state>0)return m(n,503);const g=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${i("sha1").update(t+h).digest("base64")}`],_=new c(null);if(r.size){const e=this.options.handleProtocols?this.options.handleProtocols(r,s):r.values().next().value;e&&(g.push(`Sec-WebSocket-Protocol: ${e}`),_._protocol=e)}if(e[o.extensionName]){const t=e[o.extensionName].params,r=a.format({[o.extensionName]:[t]});g.push(`Sec-WebSocket-Extensions: ${r}`),_._extensions=e}this.emit("headers",g,s),n.write(g.concat("\r\n").join("\r\n")),n.removeListener("error",f),_.setSocket(n,l,{maxPayload:this.options.maxPayload,skipUTF8Validation:this.options.skipUTF8Validation}),this.clients&&(this.clients.add(_),_.on("close",(()=>{this.clients.delete(_),this._shouldEmitClose&&!this.clients.size&&process.nextTick(p,this)}))),u(_,s)}}},335:(e,t,r)=>{"use strict";const s=r(361),n=r(687),i=r(685),a=r(808),o=r(404),{randomBytes:l,createHash:c}=r(113),{Readable:h}=r(781),{URL:d}=r(310),u=r(290),p=r(157),f=r(769),{BINARY_TYPES:m,EMPTY_BUFFER:g,GUID:_,kForOnEventAttribute:v,kListener:y,kStatusCode:w,kWebSocket:b,NOOP:x}=r(217),{EventTarget:{addEventListener:E,removeEventListener:S}}=r(874),{format:C,parse:P}=r(725),{toBuffer:k}=r(214),R=["CONNECTING","OPEN","CLOSING","CLOSED"],T=/^[!#$%&'*+\-.0-9A-Z^_`|a-z~]+$/,N=[8,13];class A extends s{constructor(e,t,r){super(),this._binaryType=m[0],this._closeCode=1006,this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage=g,this._closeTimer=null,this._extensions={},this._protocol="",this._readyState=A.CONNECTING,this._receiver=null,this._sender=null,this._socket=null,null!==e?(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,void 0===t?t=[]:Array.isArray(t)||("object"==typeof t&&null!==t?(r=t,t=[]):t=[t]),O(this,e,t,r)):this._isServer=!0}get binaryType(){return this._binaryType}set binaryType(e){m.includes(e)&&(this._binaryType=e,this._receiver&&(this._receiver._binaryType=e))}get bufferedAmount(){return this._socket?this._socket._writableState.length+this._sender._bufferedBytes:this._bufferedAmount}get extensions(){return Object.keys(this._extensions).join()}get onclose(){return null}get onerror(){return null}get onopen(){return null}get onmessage(){return null}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket(e,t,r){const s=new p({binaryType:this.binaryType,extensions:this._extensions,isServer:this._isServer,maxPayload:r.maxPayload,skipUTF8Validation:r.skipUTF8Validation});this._sender=new f(e,this._extensions),this._receiver=s,this._socket=e,s[b]=this,e[b]=this,s.on("conclude",j),s.on("drain",I),s.on("error",H),s.on("message",U),s.on("ping",F),s.on("pong",B),e.setTimeout(0),e.setNoDelay(),t.length>0&&e.unshift(t),e.on("close",z),e.on("data",G),e.on("end",X),e.on("error",K),this._readyState=A.OPEN,this.emit("open")}emitClose(){if(!this._socket)return this._readyState=A.CLOSED,void this.emit("close",this._closeCode,this._closeMessage);this._extensions[u.extensionName]&&this._extensions[u.extensionName].cleanup(),this._receiver.removeAllListeners(),this._readyState=A.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close(e,t){if(this.readyState!==A.CLOSED){if(this.readyState===A.CONNECTING){const e="WebSocket was closed before the connection was established";return D(this,this._req,e)}this.readyState!==A.CLOSING?(this._readyState=A.CLOSING,this._sender.close(e,t,!this._isServer,(e=>{e||(this._closeFrameSent=!0,(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end())})),this._closeTimer=setTimeout(this._socket.destroy.bind(this._socket),3e4)):this._closeFrameSent&&(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end()}}ping(e,t,r){if(this.readyState===A.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");"function"==typeof e?(r=e,e=t=void 0):"function"==typeof t&&(r=t,t=void 0),"number"==typeof e&&(e=e.toString()),this.readyState===A.OPEN?(void 0===t&&(t=!this._isServer),this._sender.ping(e||g,t,r)):L(this,e,r)}pong(e,t,r){if(this.readyState===A.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");"function"==typeof e?(r=e,e=t=void 0):"function"==typeof t&&(r=t,t=void 0),"number"==typeof e&&(e=e.toString()),this.readyState===A.OPEN?(void 0===t&&(t=!this._isServer),this._sender.pong(e||g,t,r)):L(this,e,r)}send(e,t,r){if(this.readyState===A.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if("function"==typeof t&&(r=t,t={}),"number"==typeof e&&(e=e.toString()),this.readyState!==A.OPEN)return void L(this,e,r);const s={binary:"string"!=typeof e,mask:!this._isServer,compress:!0,fin:!0,...t};this._extensions[u.extensionName]||(s.compress=!1),this._sender.send(e||g,s,r)}terminate(){if(this.readyState!==A.CLOSED){if(this.readyState===A.CONNECTING){const e="WebSocket was closed before the connection was established";return D(this,this._req,e)}this._socket&&(this._readyState=A.CLOSING,this._socket.destroy())}}}function O(e,t,r,s){const a={protocolVersion:N[1],maxPayload:104857600,skipUTF8Validation:!1,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10,...s,createConnection:void 0,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:void 0,host:void 0,path:void 0,port:void 0};if(!N.includes(a.protocolVersion))throw new RangeError(`Unsupported protocol version: ${a.protocolVersion} (supported versions: ${N.join(", ")})`);let o;if(t instanceof d)o=t,e._url=t.href;else{try{o=new d(t)}catch(e){throw new SyntaxError(`Invalid URL: ${t}`)}e._url=t}const h="wss:"===o.protocol,p="ws+unix:"===o.protocol;if("ws:"!==o.protocol&&!h&&!p)throw new SyntaxError('The URL\'s protocol must be one of "ws:", "wss:", or "ws+unix:"');if(p&&!o.pathname)throw new SyntaxError("The URL's pathname is empty");if(o.hash)throw new SyntaxError("The URL contains a fragment identifier");const f=h?443:80,m=l(16).toString("base64"),g=h?n.get:i.get,v=new Set;let y;if(a.createConnection=h?q:M,a.defaultPort=a.defaultPort||f,a.port=o.port||f,a.host=o.hostname.startsWith("[")?o.hostname.slice(1,-1):o.hostname,a.headers={"Sec-WebSocket-Version":a.protocolVersion,"Sec-WebSocket-Key":m,Connection:"Upgrade",Upgrade:"websocket",...a.headers},a.path=o.pathname+o.search,a.timeout=a.handshakeTimeout,a.perMessageDeflate&&(y=new u(!0!==a.perMessageDeflate?a.perMessageDeflate:{},!1,a.maxPayload),a.headers["Sec-WebSocket-Extensions"]=C({[u.extensionName]:y.offer()})),r.length){for(const e of r){if("string"!=typeof e||!T.test(e)||v.has(e))throw new SyntaxError("An invalid or duplicated subprotocol was specified");v.add(e)}a.headers["Sec-WebSocket-Protocol"]=r.join(",")}if(a.origin&&(a.protocolVersion<13?a.headers["Sec-WebSocket-Origin"]=a.origin:a.headers.Origin=a.origin),(o.username||o.password)&&(a.auth=`${o.username}:${o.password}`),p){const e=a.path.split(":");a.socketPath=e[0],a.path=e[1]}let w=e._req=g(a);a.timeout&&w.on("timeout",(()=>{D(e,w,"Opening handshake has timed out")})),w.on("error",(t=>{null===w||w.aborted||(w=e._req=null,e._readyState=A.CLOSING,e.emit("error",t),e.emitClose())})),w.on("response",(n=>{const i=n.headers.location,o=n.statusCode;if(i&&a.followRedirects&&o>=300&&o<400){if(++e._redirects>a.maxRedirects)return void D(e,w,"Maximum redirects exceeded");w.abort();const n=new d(i,t);O(e,n,r,s)}else e.emit("unexpected-response",w,n)||D(e,w,`Unexpected server response: ${n.statusCode}`)})),w.on("upgrade",((t,r,s)=>{if(e.emit("upgrade",t),e.readyState!==A.CONNECTING)return;w=e._req=null;const n=c("sha1").update(m+_).digest("base64");if(t.headers["sec-websocket-accept"]!==n)return void D(e,r,"Invalid Sec-WebSocket-Accept header");const i=t.headers["sec-websocket-protocol"];let o;if(void 0!==i?v.size?v.has(i)||(o="Server sent an invalid subprotocol"):o="Server sent a subprotocol but none was requested":v.size&&(o="Server sent no subprotocol"),o)return void D(e,r,o);i&&(e._protocol=i);const l=t.headers["sec-websocket-extensions"];if(void 0!==l){if(!y)return void D(e,r,"Server sent a Sec-WebSocket-Extensions header but no extension was requested");let s;try{s=P(l)}catch(t){return void D(e,r,"Invalid Sec-WebSocket-Extensions header")}const n=Object.keys(s);if(1!==n.length||n[0]!==u.extensionName)return void D(e,r,"Server indicated an extension that was not requested");try{y.accept(s[u.extensionName])}catch(t){return void D(e,r,"Invalid Sec-WebSocket-Extensions header")}e._extensions[u.extensionName]=y}e.setSocket(r,s,{maxPayload:a.maxPayload,skipUTF8Validation:a.skipUTF8Validation})}))}function M(e){return e.path=e.socketPath,a.connect(e)}function q(e){return e.path=void 0,e.servername||""===e.servername||(e.servername=a.isIP(e.host)?"":e.host),o.connect(e)}function D(e,t,r){e._readyState=A.CLOSING;const s=new Error(r);Error.captureStackTrace(s,D),t.setHeader?(t.abort(),t.socket&&!t.socket.destroyed&&t.socket.destroy(),t.once("abort",e.emitClose.bind(e)),e.emit("error",s)):(t.destroy(s),t.once("error",e.emit.bind(e,"error")),t.once("close",e.emitClose.bind(e)))}function L(e,t,r){if(t){const r=k(t).length;e._socket?e._sender._bufferedBytes+=r:e._bufferedAmount+=r}r&&r(new Error(`WebSocket is not open: readyState ${e.readyState} (${R[e.readyState]})`))}function j(e,t){const r=this[b];r._closeFrameReceived=!0,r._closeMessage=t,r._closeCode=e,void 0!==r._socket[b]&&(r._socket.removeListener("data",G),process.nextTick(W,r._socket),1005===e?r.close():r.close(e,t))}function I(){this[b]._socket.resume()}function H(e){const t=this[b];void 0!==t._socket[b]&&(t._socket.removeListener("data",G),process.nextTick(W,t._socket),t.close(e[w])),t.emit("error",e)}function $(){this[b].emitClose()}function U(e,t){this[b].emit("message",e,t)}function F(e){const t=this[b];t.pong(e,!t._isServer,x),t.emit("ping",e)}function B(e){this[b].emit("pong",e)}function W(e){e.resume()}function z(){const e=this[b];let t;this.removeListener("close",z),this.removeListener("data",G),this.removeListener("end",X),e._readyState=A.CLOSING,this._readableState.endEmitted||e._closeFrameReceived||e._receiver._writableState.errorEmitted||null===(t=e._socket.read())||e._receiver.write(t),e._receiver.end(),this[b]=void 0,clearTimeout(e._closeTimer),e._receiver._writableState.finished||e._receiver._writableState.errorEmitted?e.emitClose():(e._receiver.on("error",$),e._receiver.on("finish",$))}function G(e){this[b]._receiver.write(e)||this.pause()}function X(){const e=this[b];e._readyState=A.CLOSING,e._receiver.end(),this.end()}function K(){const e=this[b];this.removeListener("error",K),this.on("error",x),e&&(e._readyState=A.CLOSING,this.destroy())}Object.defineProperty(A,"CONNECTING",{enumerable:!0,value:R.indexOf("CONNECTING")}),Object.defineProperty(A.prototype,"CONNECTING",{enumerable:!0,value:R.indexOf("CONNECTING")}),Object.defineProperty(A,"OPEN",{enumerable:!0,value:R.indexOf("OPEN")}),Object.defineProperty(A.prototype,"OPEN",{enumerable:!0,value:R.indexOf("OPEN")}),Object.defineProperty(A,"CLOSING",{enumerable:!0,value:R.indexOf("CLOSING")}),Object.defineProperty(A.prototype,"CLOSING",{enumerable:!0,value:R.indexOf("CLOSING")}),Object.defineProperty(A,"CLOSED",{enumerable:!0,value:R.indexOf("CLOSED")}),Object.defineProperty(A.prototype,"CLOSED",{enumerable:!0,value:R.indexOf("CLOSED")}),["binaryType","bufferedAmount","extensions","protocol","readyState","url"].forEach((e=>{Object.defineProperty(A.prototype,e,{enumerable:!0})})),["open","error","close","message"].forEach((e=>{Object.defineProperty(A.prototype,`on${e}`,{enumerable:!0,get(){for(const t of this.listeners(e))if(t[v])return t[y];return null},set(t){for(const t of this.listeners(e))if(t[v]){this.removeListener(e,t);break}"function"==typeof t&&this.addEventListener(e,t,{[v]:!0})}})})),A.prototype.addEventListener=E,A.prototype.removeEventListener=S,e.exports=A},605:module=>{module.exports=eval("require")("bufferutil")},12:module=>{module.exports=eval("require")("utf-8-validate")},113:e=>{"use strict";e.exports=__webpack_require__("crypto")},361:e=>{"use strict";e.exports=__webpack_require__("events")},685:e=>{"use strict";e.exports=__webpack_require__("http")},687:e=>{"use strict";e.exports=__webpack_require__("https")},808:e=>{"use strict";e.exports=__webpack_require__("net")},781:e=>{"use strict";e.exports=__webpack_require__("stream")},404:e=>{"use strict";e.exports=__webpack_require__("tls")},310:e=>{"use strict";e.exports=__webpack_require__("url")},796:e=>{"use strict";e.exports=__webpack_require__("zlib")}},__webpack_module_cache__={};function __nccwpck_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var r=__webpack_module_cache__[e]={exports:{}},s=!0;try{__webpack_modules__[e](r,r.exports,__nccwpck_require__),s=!1}finally{s&&delete __webpack_module_cache__[e]}return r.exports}void 0!==__nccwpck_require__&&(__nccwpck_require__.ab=__dirname+"/");var __nested_webpack_exports__=__nccwpck_require__(28);module.exports=__nested_webpack_exports__})()},"./dist/esm/client/components/app-router-headers.js":(e,t,r)=>{"use strict";r.d(t,{Am:()=>l,H4:()=>h,eY:()=>o,i4:()=>s,om:()=>n,pz:()=>a,vu:()=>c});const s="RSC",n="Next-Action",i="Next-Router-State-Tree",a="Next-Router-Prefetch",o="text/x-component",l=s+", "+i+", "+a+", Next-Url",c=[[s],[i],[a]],h="_rsc"},"./dist/esm/lib/constants.js":(e,t,r)=>{"use strict";r.d(t,{Ar:()=>o,BR:()=>h,Et:()=>a,Jp:()=>u,Qq:()=>i,X_:()=>c,dN:()=>s,o$:()=>d,of:()=>l,y3:()=>n});const s="nxtP",n="x-prerender-revalidate",i="x-prerender-revalidate-if-generated",a="x-next-cache-tags",o="x-next-cache-soft-tags",l="x-next-revalidated-tags",c="x-next-revalidate-tag-token",h=31536e3,d="instrumentation",u={edge:"edge",experimentalEdge:"experimental-edge",nodejs:"nodejs"}},"./dist/esm/lib/interop-default.js":(e,t,r)=>{"use strict";function s(e){return e.default||e}r.d(t,{X:()=>s})},"./dist/esm/lib/is-error.js":(e,t,r)=>{"use strict";function s(e){return"object"==typeof e&&null!==e&&"name"in e&&"message"in e}function n(e){return s(e)?e:new Error(function(e){if("[object Object]"!==function(e){return Object.prototype.toString.call(e)}(e))return!1;const t=Object.getPrototypeOf(e);return null===t||t.hasOwnProperty("isPrototypeOf")}(e)?JSON.stringify(e):e+"")}r.d(t,{Z:()=>s,S:()=>n})},"./dist/esm/lib/web/chalk.js":(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const s=new Proxy((e=>e),{get:(e,t)=>["hex","rgb","ansi256","bgHex","bgRgb","bgAnsi256"].includes(t)?()=>s:s}),n=s},"./dist/esm/server/api-utils/get-cookie-parser.js":(e,t,r)=>{"use strict";function s(e){return function(){const{cookie:t}=e;if(!t)return{};const{parse:s}=r("./dist/compiled/cookie/index.js");return s(Array.isArray(t)?t.join("; "):t)}}r.d(t,{a:()=>s})},"./dist/esm/server/api-utils/index.js":(e,t,r)=>{"use strict";r.d(t,{Di:()=>d,Gy:()=>i,Iq:()=>o,Ku:()=>h,Lm:()=>p,MS:()=>f,OF:()=>u,QM:()=>c,dS:()=>l,gk:()=>g,uX:()=>a,y7:()=>m});var s=r("./dist/esm/server/web/spec-extension/adapters/headers.js"),n=r("./dist/esm/lib/constants.js");function i(e,t){return e.statusCode=t,e}function a(e,t,r){if("string"==typeof t&&(r=t,t=307),"number"!=typeof t||"string"!=typeof r)throw new Error("Invalid redirect arguments. Please use a single argument URL, e.g. res.redirect('/destination') or use a status code and URL, e.g. res.redirect(307, '/destination').");return e.writeHead(t,{Location:r}),e.write(r),e.end(),e}function o(e,t){const r=s.h.from(e.headers);return{isOnDemandRevalidate:r.get(n.y3)===t.previewModeId,revalidateOnlyGenerated:r.has(n.Qq)}}const l="__prerender_bypass",c="__next_preview_data",h=4194304,d=Symbol(c),u=Symbol(l);function p(e,t={}){if(u in e)return e;const{serialize:s}=r("./dist/compiled/cookie/index.js"),n=e.getHeader("Set-Cookie");return e.setHeader("Set-Cookie",[..."string"==typeof n?[n]:Array.isArray(n)?n:[],s(l,"",{expires:new Date(0),httpOnly:!0,sameSite:"none",secure:!0,path:"/",...void 0!==t.path?{path:t.path}:void 0}),s(c,"",{expires:new Date(0),httpOnly:!0,sameSite:"none",secure:!0,path:"/",...void 0!==t.path?{path:t.path}:void 0})]),Object.defineProperty(e,u,{value:!0,enumerable:!1}),e}class f extends Error{constructor(e,t){super(t),this.statusCode=e}}function m(e,t,r){e.statusCode=t,e.statusMessage=r,e.end(r)}function g({req:e},t,r){const s={configurable:!0,enumerable:!0},n={...s,writable:!0};Object.defineProperty(e,t,{...s,get:()=>{const s=r();return Object.defineProperty(e,t,{...n,value:s}),s},set:r=>{Object.defineProperty(e,t,{...n,value:r})}})}},"./dist/esm/server/api-utils/node.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{apiResolver:()=>b,parseBody:()=>y,tryGetPreviewData:()=>v});var s=r("./dist/esm/server/api-utils/index.js"),n=r("./dist/compiled/bytes/index.js"),i=r.n(n),a=r("./dist/esm/server/lib/etag.js"),o=r("./dist/esm/server/send-payload/index.js"),l=r("stream"),c=r("./dist/compiled/content-type/index.js"),h=r("./dist/esm/lib/is-error.js"),d=(r("./dist/esm/shared/lib/utils.js"),r("./dist/esm/lib/interop-default.js")),u=r("./dist/esm/server/api-utils/get-cookie-parser.js"),p=r("./lib/trace/tracer"),f=r("./dist/esm/server/lib/trace/constants.js"),m=r("./dist/esm/server/web/spec-extension/cookies.js"),g=r("./dist/esm/server/web/spec-extension/adapters/headers.js"),_=r("./dist/esm/lib/constants.js");function v(e,t,n){var i,a;if(n&&(0,s.Iq)(e,n).isOnDemandRevalidate)return!1;if(s.Di in e)return e[s.Di];const o=g.h.from(e.headers),l=new m.q(o),c=null==(i=l.get(s.dS))?void 0:i.value,h=null==(a=l.get(s.QM))?void 0:a.value;if(c&&!h&&c===n.previewModeId){const t={};return Object.defineProperty(e,s.Di,{value:t,enumerable:!1}),t}if(!c&&!h)return!1;if(!c||!h)return(0,s.Lm)(t),!1;if(c!==n.previewModeId)return(0,s.Lm)(t),!1;let d;try{d=r("next/dist/compiled/jsonwebtoken").verify(h,n.previewModeSigningKey)}catch{return(0,s.Lm)(t),!1}const{decryptWithSecret:u}=r("./dist/esm/server/crypto-utils.js"),p=u(Buffer.from(n.previewModeEncryptionKey),d.data);try{const t=JSON.parse(p);return Object.defineProperty(e,s.Di,{value:t,enumerable:!1}),t}catch{return!1}}async function y(e,t){let n;try{n=(0,c.parse)(e.headers["content-type"]||"text/plain")}catch{n=(0,c.parse)("text/plain")}const{type:i,parameters:a}=n,o=a.charset||"utf-8";let l;try{const s=r("next/dist/compiled/raw-body");l=await s(e,{encoding:o,limit:t})}catch(e){throw(0,h.Z)(e)&&"entity.too.large"===e.type?new s.MS(413,`Body exceeded ${t} limit`):new s.MS(400,"Invalid body")}const d=l.toString();return"application/json"===i||"application/ld+json"===i?function(e){if(0===e.length)return{};try{return JSON.parse(e)}catch(e){throw new s.MS(400,"Invalid JSON")}}(d):"application/x-www-form-urlencoded"===i?r("querystring").decode(d):d}function w(e){return"string"==typeof e&&e.length>=16}async function b(e,t,n,c,m,g,b,x){const E=e,S=t;try{var C,P,k,R;if(!c)return t.statusCode=404,void t.end("Not Found");const g=c.config||{},b=!1!==(null==(C=g.api)?void 0:C.bodyParser),T=(null==(P=g.api)?void 0:P.responseLimit)??!0;null==(k=g.api)||k.externalResolver,(0,s.gk)({req:E},"cookies",(0,u.a)(e.headers)),E.query=n,(0,s.gk)({req:E},"previewData",(()=>v(e,t,m))),(0,s.gk)({req:E},"preview",(()=>!1!==E.previewData||void 0)),(0,s.gk)({req:E},"draftMode",(()=>E.preview)),b&&!E.body&&(E.body=await y(E,g.api&&g.api.bodyParser&&g.api.bodyParser.sizeLimit?g.api.bodyParser.sizeLimit:"1mb"));let N=0;const A=function(e){return e&&"boolean"!=typeof e?i().parse(e):s.Ku}(T),O=S.write,M=S.end;S.write=(...e)=>(N+=Buffer.byteLength(e[0]||""),O.apply(S,e)),S.end=(...t)=>(t.length&&"function"!=typeof t[0]&&(N+=Buffer.byteLength(t[0]||"")),T&&N>=A&&console.warn(`API response for ${e.url} exceeds ${i().format(A)}. API Routes are meant to respond quickly. https://nextjs.org/docs/messages/api-routes-response-size-limit`),M.apply(S,t)),S.status=e=>(0,s.Gy)(S,e),S.send=e=>function(e,t,r){if(null==r)return void t.end();if(204===t.statusCode||304===t.statusCode)return t.removeHeader("Content-Type"),t.removeHeader("Content-Length"),t.removeHeader("Transfer-Encoding"),void t.end();const s=t.getHeader("Content-Type");if(r instanceof l.Stream)return s||t.setHeader("Content-Type","application/octet-stream"),void r.pipe(t);const n=["object","number","boolean"].includes(typeof r),i=n?JSON.stringify(r):r,c=(0,a.j)(i);if(!(0,o.Wz)(e,t,c)){if(Buffer.isBuffer(r))return s||t.setHeader("Content-Type","application/octet-stream"),t.setHeader("Content-Length",r.length),void t.end(r);n&&t.setHeader("Content-Type","application/json; charset=utf-8"),t.setHeader("Content-Length",Buffer.byteLength(i)),t.end(i)}}(E,S,e),S.json=e=>function(e,t){e.setHeader("Content-Type","application/json; charset=utf-8"),e.send(JSON.stringify(t))}(S,e),S.redirect=(e,t)=>(0,s.uX)(S,e,t),S.setDraftMode=(e={enable:!0})=>function(e,t){if(!w(t.previewModeId))throw new Error("invariant: invalid previewModeId");const n=t.enable?void 0:new Date(0),{serialize:i}=r("./dist/compiled/cookie/index.js"),a=e.getHeader("Set-Cookie");return e.setHeader("Set-Cookie",[..."string"==typeof a?[a]:Array.isArray(a)?a:[],i(s.dS,t.previewModeId,{httpOnly:!0,sameSite:"none",secure:!0,path:"/",expires:n})]),e}(S,Object.assign({},m,e)),S.setPreviewData=(e,t={})=>function(e,t,n){if(!w(n.previewModeId))throw new Error("invariant: invalid previewModeId");if(!w(n.previewModeEncryptionKey))throw new Error("invariant: invalid previewModeEncryptionKey");if(!w(n.previewModeSigningKey))throw new Error("invariant: invalid previewModeSigningKey");const i=r("next/dist/compiled/jsonwebtoken"),{encryptWithSecret:a}=r("./dist/esm/server/crypto-utils.js"),o=i.sign({data:a(Buffer.from(n.previewModeEncryptionKey),JSON.stringify(t))},n.previewModeSigningKey,{algorithm:"HS256",...void 0!==n.maxAge?{expiresIn:n.maxAge}:void 0});if(o.length>2048)throw new Error("Preview data is limited to 2KB currently, reduce how much data you are storing as preview data to continue");const{serialize:l}=r("./dist/compiled/cookie/index.js"),c=e.getHeader("Set-Cookie");return e.setHeader("Set-Cookie",[..."string"==typeof c?[c]:Array.isArray(c)?c:[],l(s.dS,n.previewModeId,{httpOnly:!0,sameSite:"none",secure:!0,path:"/",...void 0!==n.maxAge?{maxAge:n.maxAge}:void 0,...void 0!==n.path?{path:n.path}:void 0}),l(s.QM,o,{httpOnly:!0,sameSite:"none",secure:!0,path:"/",...void 0!==n.maxAge?{maxAge:n.maxAge}:void 0,...void 0!==n.path?{path:n.path}:void 0})]),e}(S,e,Object.assign({},m,t)),S.clearPreviewData=(e={})=>(0,s.Lm)(S,e),S.revalidate=(t,r)=>async function(e,t,r,s){if("string"!=typeof e||!e.startsWith("/"))throw new Error(`Invalid urlPath provided to revalidate(), must be a path e.g. /blog/post-1, received ${e}`);const n={[_.y3]:s.previewModeId,...t.unstable_onlyGenerated?{[_.Qq]:"1"}:{}},i=[...s.allowedRevalidateHeaderKeys||[],...s.trustHostHeader?["cookie","x-vercel-protection-bypass"]:[]];for(const e of Object.keys(r.headers))i.includes(e)&&(n[e]=r.headers[e]);try{if(s.trustHostHeader){const s=await fetch(`https://${r.headers.host}${e}`,{method:"HEAD",headers:n}),i=s.headers.get("x-vercel-cache")||s.headers.get("x-nextjs-cache");if("REVALIDATED"!==(null==i?void 0:i.toUpperCase())&&(404!==s.status||!t.unstable_onlyGenerated))throw new Error(`Invalid response ${s.status}`)}else{if(!s.revalidate)throw new Error("Invariant: required internal revalidate method not passed to api-utils");await s.revalidate({urlPath:e,revalidateHeaders:n,opts:t})}}catch(t){throw new Error(`Failed to revalidate ${e}: ${(0,h.Z)(t)?t.message:t}`)}}(t,r||{},e,m);const q=(0,d.X)(c);null==(R=(0,p.getTracer)().getRootSpanAttributes())||R.set("next.route",x),await(0,p.getTracer)().trace(f.Zq.runHandler,{spanName:`executing api route (pages) ${x}`},(()=>q(e,t)))}catch(e){if(e instanceof s.MS)(0,s.y7)(S,e.statusCode,e.message);else{if(b)throw(0,h.Z)(e)&&(e.page=x),e;if(console.error(e),g)throw e;(0,s.y7)(S,500,"Internal Server Error")}}}},"./dist/esm/server/crypto-utils.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{decryptWithSecret:()=>u,encryptWithSecret:()=>d});var s=r("crypto"),n=r.n(s);const i="aes-256-gcm",a=32,o=16,l=16,c=64,h=1e5;function d(e,t){const r=n().randomBytes(o),s=n().randomBytes(c),l=n().pbkdf2Sync(e,s,h,a,"sha512"),d=n().createCipheriv(i,l,r),u=Buffer.concat([d.update(t,"utf8"),d.final()]),p=d.getAuthTag();return Buffer.concat([s,r,p,u]).toString("hex")}function u(e,t){const r=Buffer.from(t,"hex"),s=r.slice(0,c),d=r.slice(c,c+o),u=r.slice(c+o,c+o+l),p=r.slice(c+o+l),f=n().pbkdf2Sync(e,s,h,a,"sha512"),m=n().createDecipheriv(i,f,d);return m.setAuthTag(u),m.update(p)+m.final("utf8")}},"./dist/esm/server/lib/etag.js":(e,t,r)=>{"use strict";r.d(t,{j:()=>s});const s=(e,t=!1)=>(t?'W/"':'"')+(e=>{const t=e.length;let r=0,s=0,n=8997,i=0,a=33826,o=0,l=40164,c=0,h=52210;for(;r<t;)n^=e.charCodeAt(r++),s=435*n,i=435*a,o=435*l,c=435*h,o+=n<<8,c+=a<<8,i+=s>>>16,n=65535&s,o+=i>>>16,a=65535&i,h=c+(o>>>16)&65535,l=65535&o;return 281474976710656*(15&h)+4294967296*l+65536*a+(n^h>>4)})(e).toString(36)+e.length.toString(36)+'"'},"./dist/esm/server/lib/server-ipc/invoke-request.js":(e,t,r)=>{"use strict";r.d(t,{R:()=>n});var s=r("./dist/esm/server/lib/server-ipc/utils.js");const n=async(e,t,r)=>{const n=(0,s.M2)({"cache-control":"",...t.headers},s.EK);return await fetch(e,{headers:n,method:t.method,redirect:"manual",signal:t.signal,..."GET"!==t.method&&"HEAD"!==t.method&&r?{body:r,duplex:"half"}:{},next:{internal:!0}})}},"./dist/esm/server/lib/server-ipc/request-utils.js":(e,t,r)=>{"use strict";r.d(t,{p:()=>a});var s=r("./dist/esm/shared/lib/utils.js"),n=r("./dist/esm/server/lib/server-ipc/invoke-request.js");const i=e=>{if(!e||"object"!=typeof e||!e.stack)return e;let t=Error;"PageNotFoundError"===e.name&&(t=s.GP);const n=new t(e.message);n.stack=e.stack,n.name=e.name,n.digest=e.digest;{const{decorateServerError:t}=r("next/dist/compiled/@next/react-dev-overlay/dist/middleware");t(n,e.source||"server")}return n};async function a({fetchHostname:e="localhost",method:t,args:r,ipcPort:s,ipcKey:a}){if(s){const o=await(0,n.R)(`http://${e}:${s}?key=${a}&method=${t}&args=${encodeURIComponent(JSON.stringify(r))}`,{method:"GET",headers:{}}),l=await o.text();if(l.startsWith("{")&&l.endsWith("}")){const e=JSON.parse(l);if(e&&"object"==typeof e&&"err"in e&&"stack"in e.err)throw i(e.err);return e}}}},"./dist/esm/server/lib/server-ipc/utils.js":(e,t,r)=>{"use strict";r.d(t,{EK:()=>s,M2:()=>n});const s=["accept-encoding","keepalive","keep-alive","content-encoding","transfer-encoding","connection","expect"],n=(e,t)=>{e["content-length"]&&"0"===e["content-length"]&&delete e["content-length"];for(const[r,s]of Object.entries(e))(t.includes(r)||!Array.isArray(s)&&"string"!=typeof s)&&delete e[r];return e}},"./dist/esm/server/lib/trace/constants.js":(e,t,r)=>{"use strict";var s,n,i,a,o,l,c,h,d,u,p;r.d(t,{Xy:()=>a,Zq:()=>d,_J:()=>s,qj:()=>n}),function(e){e.handleRequest="BaseServer.handleRequest",e.run="BaseServer.run",e.pipe="BaseServer.pipe",e.getStaticHTML="BaseServer.getStaticHTML",e.render="BaseServer.render",e.renderToResponseWithComponents="BaseServer.renderToResponseWithComponents",e.renderToResponse="BaseServer.renderToResponse",e.renderToHTML="BaseServer.renderToHTML",e.renderError="BaseServer.renderError",e.renderErrorToResponse="BaseServer.renderErrorToResponse",e.renderErrorToHTML="BaseServer.renderErrorToHTML",e.render404="BaseServer.render404"}(s||(s={})),function(e){e.loadDefaultErrorComponents="LoadComponents.loadDefaultErrorComponents",e.loadComponents="LoadComponents.loadComponents"}(n||(n={})),function(e){e.getRequestHandler="NextServer.getRequestHandler",e.getServer="NextServer.getServer",e.getServerRequestHandler="NextServer.getServerRequestHandler",e.createServer="createServer.createServer"}(i||(i={})),function(e){e.compression="NextNodeServer.compression",e.getBuildId="NextNodeServer.getBuildId",e.generateStaticRoutes="NextNodeServer.generateStaticRoutes",e.generateFsStaticRoutes="NextNodeServer.generateFsStaticRoutes",e.generatePublicRoutes="NextNodeServer.generatePublicRoutes",e.generateImageRoutes="NextNodeServer.generateImageRoutes.route",e.sendRenderResult="NextNodeServer.sendRenderResult",e.proxyRequest="NextNodeServer.proxyRequest",e.runApi="NextNodeServer.runApi",e.render="NextNodeServer.render",e.renderHTML="NextNodeServer.renderHTML",e.imageOptimizer="NextNodeServer.imageOptimizer",e.getPagePath="NextNodeServer.getPagePath",e.getRoutesManifest="NextNodeServer.getRoutesManifest",e.findPageComponents="NextNodeServer.findPageComponents",e.getFontManifest="NextNodeServer.getFontManifest",e.getServerComponentManifest="NextNodeServer.getServerComponentManifest",e.getRequestHandler="NextNodeServer.getRequestHandler",e.renderToHTML="NextNodeServer.renderToHTML",e.renderError="NextNodeServer.renderError",e.renderErrorToHTML="NextNodeServer.renderErrorToHTML",e.render404="NextNodeServer.render404",e.route="route",e.onProxyReq="onProxyReq",e.apiResolver="apiResolver",e.internalFetch="internalFetch"}(a||(a={})),function(e){e.startServer="startServer.startServer"}(o||(o={})),function(e){e.getServerSideProps="Render.getServerSideProps",e.getStaticProps="Render.getStaticProps",e.renderToString="Render.renderToString",e.renderDocument="Render.renderDocument",e.createBodyResult="Render.createBodyResult"}(l||(l={})),function(e){e.renderToString="AppRender.renderToString",e.renderToReadableStream="AppRender.renderToReadableStream",e.getBodyResult="AppRender.getBodyResult",e.fetch="AppRender.fetch"}(c||(c={})),function(e){e.executeRoute="Router.executeRoute"}(h||(h={})),function(e){e.runHandler="Node.runHandler"}(d||(d={})),function(e){e.runHandler="AppRouteRouteHandlers.runHandler"}(u||(u={})),function(e){e.generateMetadata="ResolveMetadata.generateMetadata"}(p||(p={}))},"./dist/esm/server/node-environment.js":(e,t,r)=>{if("function"!=typeof globalThis.AsyncLocalStorage){const{AsyncLocalStorage:e}=r("async_hooks");globalThis.AsyncLocalStorage=e}"function"!=typeof globalThis.WebSocket&&Object.defineProperty(globalThis,"WebSocket",{get:()=>r("./dist/compiled/ws/index.js").WebSocket}),"withResolvers"in Promise&&"function"==typeof Promise.withResolvers||(Promise.withResolvers=()=>{let e;return{promise:new Promise(((t,r)=>{e={resolve:t,reject:r}})),resolve:e.resolve,reject:e.reject}})},"./dist/esm/server/node-polyfill-crypto.js":(e,t,r)=>{if(!global.crypto){let e;Object.defineProperty(global,"crypto",{enumerable:!1,configurable:!0,get:()=>(e||(e=r("node:crypto").webcrypto),e),set(t){e=t}})}},"./dist/esm/server/node-polyfill-fetch.js":(e,t,r)=>{if("undefined"==typeof fetch&&void 0===globalThis.fetch){function s(){return r("next/dist/compiled/undici")}globalThis.fetch=(...e)=>{var t;const r=s();return(null==(t=global.__NEXT_HTTP_AGENT_OPTIONS)?void 0:t.keepAlive)||global.__NEXT_UNDICI_AGENT_SET||(global.__NEXT_UNDICI_AGENT_SET=!0,r.setGlobalDispatcher(new r.Agent({pipelining:0})),console.warn('Warning - Configuring `keepAlive: false` is deprecated. Use `{ headers: { connection: "close" } }` instead.')),r.fetch(...e)},Object.defineProperties(global,{Headers:{get:()=>s().Headers},Request:{get:()=>function(){const e=s().Request;return class extends e{constructor(e,t){super(e,t),this.next=null==t?void 0:t.next}}}()},Response:{get:()=>s().Response}})}},"./dist/esm/server/node-polyfill-form.js":(e,t,r)=>{if(!global.FormData){const{FormData:e}=r("next/dist/compiled/@edge-runtime/ponyfill");global.FormData=e}if(!global.Blob){const{Blob:e}=r("next/dist/compiled/@edge-runtime/ponyfill");global.Blob=e}},"./dist/esm/server/node-polyfill-web-streams.js":(e,t,r)=>{if(!global.ReadableStream)if(r("stream/web").ReadableStream)global.ReadableStream=r("stream/web").ReadableStream;else{const{ReadableStream:e}=r("next/dist/compiled/@edge-runtime/ponyfill");global.ReadableStream=e}if(!global.TransformStream)if(r("stream/web").TransformStream)global.TransformStream=r("stream/web").TransformStream;else{const{TransformStream:e}=r("next/dist/compiled/@edge-runtime/ponyfill");global.TransformStream=e}},"./dist/esm/server/send-payload/index.js":(e,t,r)=>{"use strict";r.d(t,{BR:()=>h,Wz:()=>c});var s=r("./dist/esm/shared/lib/utils.js"),n=r("./dist/esm/server/lib/etag.js"),i=r("./dist/compiled/fresh/index.js"),a=r.n(i),o=r("./dist/esm/server/send-payload/revalidate-headers.js"),l=r("./dist/esm/client/components/app-router-headers.js");function c(e,t,r){return r&&t.setHeader("ETag",r),!!a()(e.headers,{etag:r})&&(t.statusCode=304,t.end(),!0)}async function h({req:e,res:t,result:r,type:i,generateEtags:a,poweredByHeader:h,options:d}){if((0,s.aC)(t))return;h&&"html"===i&&t.setHeader("X-Powered-By","Next.js"),null!=d&&(0,o.l)(t,d);const u=r.isDynamic?null:await r.toUnchunkedString();null!==u&&c(e,t,a?(0,n.j)(u):void 0)||(t.getHeader("Content-Type")||t.setHeader("Content-Type",r.contentType?r.contentType:"rsc"===i?l.eY:"json"===i?"application/json":"text/html; charset=utf-8"),u&&t.setHeader("Content-Length",Buffer.byteLength(u)),"HEAD"===e.method?t.end(null):null!==u?t.end(u):await r.pipe(t))}},"./dist/esm/server/send-payload/revalidate-headers.js":(e,t,r)=>{"use strict";function s(e,t){if(t.private||t.stateful)!t.private&&e.getHeader("Cache-Control")||e.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");else if("number"==typeof t.revalidate){if(t.revalidate<1)throw new Error(`invariant: invalid Cache-Control duration provided: ${t.revalidate} < 1`);e.setHeader("Cache-Control",`s-maxage=${t.revalidate}, stale-while-revalidate`)}else!1===t.revalidate&&e.setHeader("Cache-Control","s-maxage=31536000, stale-while-revalidate")}r.d(t,{l:()=>s})},"./dist/esm/server/web/spec-extension/adapters/headers.js":(e,t,r)=>{"use strict";r.d(t,{h:()=>i});class s{static get(e,t,r){const s=Reflect.get(e,t,r);return"function"==typeof s?s.bind(e):s}static set(e,t,r,s){return Reflect.set(e,t,r,s)}static has(e,t){return Reflect.has(e,t)}static deleteProperty(e,t){return Reflect.deleteProperty(e,t)}}class n extends Error{constructor(){super("Headers cannot be modified. Read more: https://nextjs.org/docs/app/api-reference/functions/headers")}static callable(){throw new n}}class i extends Headers{constructor(e){super(),this.headers=new Proxy(e,{get(t,r,n){if("symbol"==typeof r)return s.get(t,r,n);const i=r.toLowerCase(),a=Object.keys(e).find((e=>e.toLowerCase()===i));return void 0!==a?s.get(t,a,n):void 0},set(t,r,n,i){if("symbol"==typeof r)return s.set(t,r,n,i);const a=r.toLowerCase(),o=Object.keys(e).find((e=>e.toLowerCase()===a));return s.set(t,o??r,n,i)},has(t,r){if("symbol"==typeof r)return s.has(t,r);const n=r.toLowerCase(),i=Object.keys(e).find((e=>e.toLowerCase()===n));return void 0!==i&&s.has(t,i)},deleteProperty(t,r){if("symbol"==typeof r)return s.deleteProperty(t,r);const n=r.toLowerCase(),i=Object.keys(e).find((e=>e.toLowerCase()===n));return void 0===i||s.deleteProperty(t,i)}})}static seal(e){return new Proxy(e,{get(e,t,r){switch(t){case"append":case"delete":case"set":return n.callable;default:return s.get(e,t,r)}}})}merge(e){return Array.isArray(e)?e.join(", "):e}static from(e){return e instanceof Headers?e:new i(e)}append(e,t){const r=this.headers[e];"string"==typeof r?this.headers[e]=[r,t]:Array.isArray(r)?r.push(t):this.headers[e]=t}delete(e){delete this.headers[e]}get(e){const t=this.headers[e];return void 0!==t?this.merge(t):null}has(e){return void 0!==this.headers[e]}set(e,t){this.headers[e]=t}forEach(e,t){for(const[r,s]of this.entries())e.call(t,s,r,this)}*entries(){for(const e of Object.keys(this.headers)){const t=e.toLowerCase(),r=this.get(t);yield[t,r]}}*keys(){for(const e of Object.keys(this.headers)){const t=e.toLowerCase();yield t}}*values(){for(const e of Object.keys(this.headers)){const t=this.get(e);yield t}}[Symbol.iterator](){return this.entries()}}},"./dist/esm/server/web/spec-extension/cookies.js":(e,t,r)=>{"use strict";r.d(t,{q:()=>s.RequestCookies});var s=r("./dist/compiled/@edge-runtime/cookies/index.js")},"./dist/esm/server sync recursive":e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id="./dist/esm/server sync recursive",e.exports=t},"./dist/esm/shared/lib/isomorphic/path.js":(e,t,r)=>{let s;s=r("path"),e.exports=s},"./dist/esm/shared/lib/modern-browserslist-target.js":e=>{e.exports=["chrome 64","edge 79","firefox 67","opera 51","safari 12"]},"./dist/esm/shared/lib/utils.js":(e,t,r)=>{"use strict";function s(e){let t,r=!1;return function(){for(var s=arguments.length,n=new Array(s),i=0;i<s;i++)n[i]=arguments[i];return r||(r=!0,t=e(...n)),t}}function n(e){return e.finished||e.headersSent}function i(e){const t=e.split("?");return t[0].replace(/\\/g,"/").replace(/\/\/+/g,"/")+(t[1]?"?"+t.slice(1).join("?"):"")}r.d(t,{At:()=>c,GP:()=>l,JW:()=>h,KM:()=>o,U3:()=>i,_9:()=>a,aC:()=>n,gf:()=>s}),"undefined"!=typeof performance&&["mark","measure","getEntriesByName"].every((e=>"function"==typeof performance[e]));class a extends Error{}class o extends Error{}class l extends Error{constructor(e){super(),this.code="ENOENT",this.name="PageNotFoundError",this.message="Cannot find module for page: "+e}}class c extends Error{constructor(e,t){super(),this.message="Failed to load static file for page: "+e+" "+t}}class h extends Error{constructor(){super(),this.code="ENOENT",this.message="Cannot find the middleware module"}}},"./lib/trace/tracer":e=>{"use strict";e.exports=require("next/dist/server/lib/trace/tracer")},"next/dist/compiled/@edge-runtime/ponyfill":e=>{"use strict";e.exports=require("next/dist/compiled/@edge-runtime/ponyfill")},"next/dist/compiled/@next/react-dev-overlay/dist/middleware":e=>{"use strict";e.exports=require("next/dist/compiled/@next/react-dev-overlay/dist/middleware")},"next/dist/compiled/jsonwebtoken":e=>{"use strict";e.exports=require("next/dist/compiled/jsonwebtoken")},"next/dist/compiled/raw-body":e=>{"use strict";e.exports=require("next/dist/compiled/raw-body")},"next/dist/compiled/undici":e=>{"use strict";e.exports=require("next/dist/compiled/undici")},"./web/sandbox":e=>{"use strict";e.exports=require("next/dist/server/web/sandbox")},async_hooks:e=>{"use strict";e.exports=require("async_hooks")},crypto:e=>{"use strict";e.exports=require("crypto")},events:e=>{"use strict";e.exports=require("events")},fs:e=>{"use strict";e.exports=require("fs")},http:e=>{"use strict";e.exports=require("http")},https:e=>{"use strict";e.exports=require("https")},module:e=>{"use strict";e.exports=require("module")},net:e=>{"use strict";e.exports=require("net")},"node:crypto":e=>{"use strict";e.exports=require("node:crypto")},os:e=>{"use strict";e.exports=require("os")},path:e=>{"use strict";e.exports=require("path")},querystring:e=>{"use strict";e.exports=require("querystring")},stream:e=>{"use strict";e.exports=require("stream")},"stream/web":e=>{"use strict";e.exports=require("stream/web")},tls:e=>{"use strict";e.exports=require("tls")},url:e=>{"use strict";e.exports=require("url")},zlib:e=>{"use strict";e.exports=require("zlib")}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var r=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](r,r.exports,__webpack_require__),r.exports}__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var r in t)__webpack_require__.o(t,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__={};(()=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{NoFallbackError:()=>Ft,WrappedBuildError:()=>Bt,default:()=>Mr});var e={};__webpack_require__.r(e),__webpack_require__.d(e,{bootstrap:()=>B,error:()=>z,event:()=>V,info:()=>K,prefixes:()=>$,ready:()=>X,trace:()=>J,wait:()=>W,warn:()=>G,warnOnce:()=>Z}),__webpack_require__("./dist/esm/server/node-environment.js");const t=__webpack_require__("path"),r=__webpack_require__("module"),s=r.prototype.require,n=r._resolveFilename;let i=require.resolve;const a=new Map;var o;!function(e=[]){for(const[t,r]of e)a.set(t,r)}((o={"styled-jsx":t.dirname(i("styled-jsx/package.json")),"styled-jsx/style":i("styled-jsx/style")},Object.entries(o).map((([e,t])=>[e,i(t)])))),r._resolveFilename=function(e,t,s,n,i,a){const o=t.get(s);return o&&(s=o),e.call(r,s,n,i,a)}.bind(null,n,a),r.prototype.require=function(e){return e.endsWith(".shared-runtime")?s.call(this,`next/dist/server/future/route-modules/pages/vendored/contexts/${t.basename(e,".shared-runtime")}`):s.call(this,e)},__webpack_require__("./dist/esm/server/node-polyfill-fetch.js"),__webpack_require__("./dist/esm/server/node-polyfill-form.js"),__webpack_require__("./dist/esm/server/node-polyfill-web-streams.js"),__webpack_require__("./dist/esm/server/node-polyfill-crypto.js");var l=__webpack_require__("./dist/esm/shared/lib/utils.js");function c(e){let{re:t,groups:r}=e;return e=>{const s=t.exec(e);if(!s)return!1;const n=e=>{try{return decodeURIComponent(e)}catch(e){throw new l._9("failed to decode param")}},i={};return Object.keys(r).forEach((e=>{const t=r[e],a=s[t.pos];void 0!==a&&(i[e]=~a.indexOf("/")?a.split("/").map((e=>n(e))):t.repeat?[n(a)]:n(a))})),i}}var h=__webpack_require__("fs"),d=__webpack_require__.n(h),u=__webpack_require__("path"),p=__webpack_require__.n(u);const f=Symbol.for("NextInternalRequestMeta");function m(e,t){const r=e[f]||{};return"string"==typeof t?r[t]:r}function g(e,t){return e[f]=t,t}function _(e,t,r){const s=m(e);return s[t]=r,g(e,s)}__webpack_require__("./dist/esm/shared/lib/modern-browserslist-target.js");const v=["x-invoke-path","x-invoke-status","x-invoke-error","x-invoke-query","x-middleware-invoke"],y="pages-manifest.json",w="app-paths-manifest.json",b="server",x=["/_document","/_app","/_error"],E="main",S=E+"-app",C=(Symbol("polyfills"),["/500"]),P=(new Set([E,"react-refresh","amp",S]),e=>{try{return d().accessSync(e,d().constants.F_OK),!0}catch(e){return!1}});var k=__webpack_require__("./dist/esm/server/api-utils/index.js"),R=__webpack_require__("./dist/esm/server/api-utils/node.js"),T=__webpack_require__("./dist/esm/server/api-utils/get-cookie-parser.js");class N{constructor(e,t,r){this.method=e,this.url=t,this.body=r}get cookies(){return this._cookies?this._cookies:this._cookies=(0,T.a)(this.headers)()}}class A{constructor(e){this.destination=e}redirect(e,t){return this.setHeader("Location",e),this.statusCode=t,308===t&&this.setHeader("Refresh",`0;url=${e}`),this}}let O=f;class M extends N{get originalRequest(){return this._req[f]=this[f],this._req.url=this.url,this._req.cookies=this.cookies,this._req}set originalRequest(e){this._req=e}constructor(e){super(e.method.toUpperCase(),e.url,e),this._req=e,this.headers=this._req.headers,this[O]=this._req[f]||{}}async parseBody(e){return(0,R.parseBody)(this._req,e)}}class q extends A{get originalResponse(){return k.OF in this&&(this._res[k.OF]=this[k.OF]),this._res}constructor(e){super(e),this._res=e,this.textBody=void 0}get sent(){return this._res.finished||this._res.headersSent}get statusCode(){return this._res.statusCode}set statusCode(e){this._res.statusCode=e}get statusMessage(){return this._res.statusMessage}set statusMessage(e){this._res.statusMessage=e}setHeader(e,t){return this._res.setHeader(e,t),this}removeHeader(e){return this._res.removeHeader(e),this}getHeaderValues(e){const t=this._res.getHeader(e);if(void 0!==t)return(Array.isArray(t)?t:[t]).map((e=>e.toString()))}hasHeader(e){return this._res.hasHeader(e)}getHeader(e){const t=this.getHeaderValues(e);return Array.isArray(t)?t.join(","):void 0}getHeaders(){return this._res.getHeaders()}appendHeader(e,t){const r=this.getHeaderValues(e)??[];return r.includes(t)||this._res.setHeader(e,[...r,t]),this}body(e){return this.textBody=e,this}send(){this._res.end(this.textBody)}}var D=__webpack_require__("./dist/esm/server/send-payload/index.js");function L(e){const t={};return e.forEach(((e,r)=>{void 0===t[r]?t[r]=e:Array.isArray(t[r])?t[r].push(e):t[r]=[t[r],e]})),t}function j(e){if(e.startsWith("/"))return function(e,t){const r=new URL("http://n"),s=e.startsWith(".")?new URL("http://n"):r,{pathname:n,searchParams:i,search:a,hash:o,href:l,origin:c}=new URL(e,s);if(c!==r.origin)throw new Error("invariant: invalid relative URL, router received "+e);return{pathname:n,query:L(i),search:a,hash:o,href:l.slice(r.origin.length)}}(e);const t=new URL(e);return{hash:t.hash,hostname:t.hostname,href:t.href,pathname:t.pathname,port:t.port,protocol:t.protocol,query:L(t.searchParams),search:t.search}}let I;I=__webpack_require__("./dist/esm/lib/web/chalk.js").Z;const H=I,$={wait:H.white(H.bold("○")),error:H.red(H.bold("⨯")),warn:H.yellow(H.bold("⚠")),ready:H.bold("▲"),info:H.white(H.bold(" ")),event:H.green(H.bold("✓")),trace:H.magenta(H.bold("»"))},U={log:"log",warn:"warn",error:"error"};function F(e,...t){""!==t[0]&&void 0!==t[0]||1!==t.length||t.shift();const r=e in U?U[e]:"log",s=$[e];0===t.length?console[r](""):console[r](" "+s,...t)}function B(...e){console.log(" ",...e)}function W(...e){F("wait",...e)}function z(...e){F("error",...e)}function G(...e){F("warn",...e)}function X(...e){F("ready",...e)}function K(...e){F("info",...e)}function V(...e){F("event",...e)}function J(...e){F("trace",...e)}const Y=new Set;function Z(...e){Y.has(e[0])||(Y.add(e.join(" ")),G(...e))}var Q=__webpack_require__("url");const ee="(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])",te=`(${ee}[.]){3}${ee}`,re="(?:[0-9a-fA-F]{1,4})",se=new RegExp(`^((?:${re}:){7}(?:${re}|:)|(?:${re}:){6}(?:${te}|:${re}|:)|(?:${re}:){5}(?::${te}|(:${re}){1,2}|:)|(?:${re}:){4}(?:(:${re}){0,1}:${te}|(:${re}){1,3}|:)|(?:${re}:){3}(?:(:${re}){0,2}:${te}|(:${re}){1,4}|:)|(?:${re}:){2}(?:(:${re}){0,3}:${te}|(:${re}){1,5}|:)|(?:${re}:){1}(?:(:${re}){0,4}:${te}|(:${re}){1,6}|:)|(?::((?::${re}){0,5}:${te}|(?::${re}){1,7}|:)))(%[0-9a-zA-Z-.:]{1,})?$`);new Set([301,302,303,307,308]);var ne=__webpack_require__("./dist/esm/lib/constants.js");const ie=/\/\[[^/]+?\](?=\/|$)/;function ae(e){return ie.test(e)}const oe=require("next/dist/shared/lib/runtime-config.external.js");var le=__webpack_require__("./dist/esm/server/send-payload/revalidate-headers.js");function ce(e){return/Googlebot|Mediapartners-Google|AdsBot-Google|googleweblight|Storebot-Google|Google-PageRenderer|Bingbot|BingPreview|Slurp|DuckDuckBot|baiduspider|yandex|sogou|LinkedInBot|bitlybot|tumblr|vkShare|quora link preview|facebookexternalhit|facebookcatalog|Twitterbot|applebot|redditbot|Slackbot|Discordbot|WhatsApp|SkypeUriPreview|ia_archiver/i.test(e)}async function he(e,t){const r=e.getReader();let s=!1,n=!1;function i(){n=!0,t.off("close",i),s||(s=!0,r.cancel().catch((()=>{})))}t.on("close",i);try{for(;;){const{done:e,value:i}=await r.read();if(s=e,e||n)break;i&&(t.write(Buffer.from(i)),null==t.flush||t.flush.call(t))}}catch(e){if(!function(e){return"AbortError"===(null==e?void 0:e.name)}(e))throw e}finally{t.off("close",i),s||r.cancel().catch((()=>{})),n||t.end()}}class de{static fromStatic(e){return new de(e)}constructor(e,{contentType:t,...r}={}){this.response=e,this.contentType=t,this.metadata=r}extendMetadata(e){Object.assign(this.metadata,e)}get isNull(){return null===this.response}get isDynamic(){return"string"!=typeof this.response}toUnchunkedString(){if("string"!=typeof this.response)throw new Error("Invariant: dynamic responses cannot be unchunked. This is a bug in Next.js");return this.response}async pipe(e){if(null===this.response)throw new Error("Invariant: response is null. This is a bug in Next.js");if("string"==typeof this.response)throw new Error("Invariant: static responses cannot be piped. This is a bug in Next.js");return await he(this.response,e)}}function ue(e){return e.replace(/\/$/,"")||"/"}function pe(e){let t=e.replace(/\\/g,"/");return t.startsWith("/index/")&&!ae(t)?t.slice(6):"/index"!==t?t:"/"}function fe(e,t){let r;const s=e.split("/");return(t||[]).some((t=>!(!s[1]||s[1].toLowerCase()!==t.toLowerCase()||(r=t,s.splice(1,1),e=s.join("/")||"/",0)))),{pathname:e,detectedLocale:r}}var me=__webpack_require__("./dist/compiled/path-to-regexp/index.js");function ge(e,t){const r=[],s=(0,me.Bo)(e,r,{delimiter:"/",sensitive:"boolean"==typeof(null==t?void 0:t.sensitive)&&t.sensitive,strict:null==t?void 0:t.strict}),n=(0,me.WS)((null==t?void 0:t.regexModifier)?new RegExp(t.regexModifier(s.source),s.flags):s,r);return(e,s)=>{if("string"!=typeof e)return!1;const i=n(e);if(!i)return!1;if(null==t?void 0:t.removeUnnamedParams)for(const e of r)"number"==typeof e.name&&delete i.params[e.name];return{...s,...i.params}}}const _e=["(..)(..)","(.)","(..)","(...)"],ve=/[|\\{}()[\]^$+*?.-]/,ye=/[|\\{}()[\]^$+*?.-]/g;function we(e){return ve.test(e)?e.replace(ye,"\\$&"):e}const be="nxtP",xe="nxtI";function Ee(e){const t=e.startsWith("[")&&e.endsWith("]");t&&(e=e.slice(1,-1));const r=e.startsWith("...");return r&&(e=e.slice(3)),{key:e,repeat:r,optional:t}}function Se(e){const{parameterizedRoute:t,groups:r}=function(e){const t=ue(e).slice(1).split("/"),r={};let s=1;return{parameterizedRoute:t.map((e=>{const t=_e.find((t=>e.startsWith(t))),n=e.match(/\[((?:\[.*\])|.+)\]/);if(t&&n){const{key:e,optional:i,repeat:a}=Ee(n[1]);return r[e]={pos:s++,repeat:a,optional:i},"/"+we(t)+"([^/]+?)"}if(n){const{key:e,repeat:t,optional:i}=Ee(n[1]);return r[e]={pos:s++,repeat:t,optional:i},t?i?"(?:/(.+?))?":"/(.+?)":"/([^/]+?)"}return"/"+we(e)})).join(""),groups:r}}(e);return{re:new RegExp("^"+t+"(?:/)?$"),groups:r}}function Ce(e){let{getSafeRouteKey:t,segment:r,routeKeys:s,keyPrefix:n}=e;const{key:i,optional:a,repeat:o}=Ee(r);let l=i.replace(/\W/g,"");n&&(l=""+n+l);let c=!1;return(0===l.length||l.length>30)&&(c=!0),isNaN(parseInt(l.slice(0,1)))||(c=!0),c&&(l=t()),s[l]=n?""+n+i:""+i,o?a?"(?:/(?<"+l+">.+?))?":"/(?<"+l+">.+?)":"/(?<"+l+">[^/]+?)"}var Pe=__webpack_require__("./dist/esm/client/components/app-router-headers.js");function ke(e){return e.replace(/__ESC_COLON_/gi,":")}function Re(e,t,r,s){void 0===r&&(r=[]),void 0===s&&(s=[]);const n={},i=r=>{let s,i=r.key;switch(r.type){case"header":i=i.toLowerCase(),s=e.headers[i];break;case"cookie":s="cookies"in e?e.cookies[r.key]:(0,T.a)(e.headers)()[r.key];break;case"query":s=t[i];break;case"host":{const{host:t}=(null==e?void 0:e.headers)||{};s=null==t?void 0:t.split(":")[0].toLowerCase();break}}if(!r.value&&s)return n[function(e){let t="";for(let r=0;r<e.length;r++){const s=e.charCodeAt(r);(s>64&&s<91||s>96&&s<123)&&(t+=e[r])}return t}(i)]=s,!0;if(s){const e=new RegExp("^"+r.value+"$"),t=Array.isArray(s)?s.slice(-1)[0].match(e):s.match(e);if(t)return Array.isArray(t)&&(t.groups?Object.keys(t.groups).forEach((e=>{n[e]=t.groups[e]})):"host"===r.type&&t[0]&&(n.host=t[0])),!0}return!1};return!(!r.every((e=>i(e)))||s.some((e=>i(e))))&&n}function Te(e,t){if(!e.includes(":"))return e;for(const r of Object.keys(t))e.includes(":"+r)&&(e=e.replace(new RegExp(":"+r+"\\*","g"),":"+r+"--ESCAPED_PARAM_ASTERISKS").replace(new RegExp(":"+r+"\\?","g"),":"+r+"--ESCAPED_PARAM_QUESTION").replace(new RegExp(":"+r+"\\+","g"),":"+r+"--ESCAPED_PARAM_PLUS").replace(new RegExp(":"+r+"(?!\\w)","g"),"--ESCAPED_PARAM_COLON"+r));return e=e.replace(/(:|\*|\?|\+|\(|\)|\{|\})/g,"\\$1").replace(/--ESCAPED_PARAM_PLUS/g,"+").replace(/--ESCAPED_PARAM_COLON/g,":").replace(/--ESCAPED_PARAM_QUESTION/g,"?").replace(/--ESCAPED_PARAM_ASTERISKS/g,"*"),(0,me.MY)("/"+e,{validate:!1})(t).slice(1)}function Ne(e){return e.startsWith("/")?e:"/"+e}function Ae(e){return Ne(e.split("/").reduce(((e,t,r,s)=>t?function(e){return"("===e[0]&&e.endsWith(")")}(t)||"@"===t[0]?e:"page"!==t&&"route"!==t||r!==s.length-1?e+"/"+t:e:e),""))}function Oe(e,t){return t?e.replace(/\.rsc($|\?)/,"$1"):e}function Me({page:e,i18n:t,basePath:r,rewrites:s,pageIsDynamic:n,trailingSlash:i,caseSensitive:a}){let o,l,h;return n&&(o=function(e,t){const r=function(e,t){const r=ue(e).slice(1).split("/"),s=function(){let e=0;return()=>{let t="",r=++e;for(;r>0;)t+=String.fromCharCode(97+(r-1)%26),r=Math.floor((r-1)/26);return t}}(),n={};return{namedParameterizedRoute:r.map((e=>{const r=_e.some((t=>e.startsWith(t))),i=e.match(/\[((?:\[.*\])|.+)\]/);return r&&i?Ce({getSafeRouteKey:s,segment:i[1],routeKeys:n,keyPrefix:t?xe:void 0}):i?Ce({getSafeRouteKey:s,segment:i[1],routeKeys:n,keyPrefix:t?be:void 0}):"/"+we(e)})).join(""),routeKeys:n}}(e,!1);return{...Se(e),namedRegex:"^"+r.namedParameterizedRoute+"(?:/)?$",routeKeys:r.routeKeys}}(e),l=c(o),h=l(e)),{handleRewrites:function(o,c){const h={};let d=c.pathname;const u=s=>{let u=ge(s.source+(i?"(/)?":""),{removeUnnamedParams:!0,strict:!0,sensitive:!!a})(c.pathname);if((s.has||s.missing)&&u){const e=Re(o,c.query,s.has,s.missing);e?Object.assign(u,e):u=!1}if(u){const{parsedDestination:i,destQuery:a}=function(e){const t=Object.assign({},e.query);delete t.__nextLocale,delete t.__nextDefaultLocale,delete t.__nextDataReq,delete t.__nextInferredLocaleFromDefault,delete t[Pe.H4];let r=e.destination;for(const n of Object.keys({...e.params,...t}))s=n,r=r.replace(new RegExp(":"+we(s),"g"),"__ESC_COLON_"+s);var s;const n=j(r),i=n.query,a=ke(""+n.pathname+(n.hash||"")),o=ke(n.hostname||""),l=[],c=[];(0,me.Bo)(a,l),(0,me.Bo)(o,c);const h=[];l.forEach((e=>h.push(e.name))),c.forEach((e=>h.push(e.name)));const d=(0,me.MY)(a,{validate:!1}),u=(0,me.MY)(o,{validate:!1});for(const[t,r]of Object.entries(i))Array.isArray(r)?i[t]=r.map((t=>Te(ke(t),e.params))):"string"==typeof r&&(i[t]=Te(ke(r),e.params));let p,f=Object.keys(e.params).filter((e=>"nextInternalLocale"!==e));if(e.appendParamsToQuery&&!f.some((e=>h.includes(e))))for(const t of f)t in i||(i[t]=e.params[t]);if(void 0!==a.split("/").find((e=>_e.find((t=>e.startsWith(t))))))for(const t of a.split("/")){const r=_e.find((e=>t.startsWith(e)));if(r){e.params[0]=r;break}}try{p=d(e.params);const[t,r]=p.split("#");n.hostname=u(e.params),n.pathname=t,n.hash=(r?"#":"")+(r||""),delete n.search}catch(e){if(e.message.match(/Expected .*? to not repeat, but got an array/))throw new Error("To use a multi-match in the destination you must add `*` at the end of the param name to signify it should repeat. https://nextjs.org/docs/messages/invalid-multi-match");throw e}return n.query={...t,...n.query},{newUrl:p,destQuery:i,parsedDestination:n}}({appendParamsToQuery:!0,destination:s.destination,params:u,query:c.query});if(i.protocol)return!0;if(Object.assign(h,a,u),Object.assign(c.query,i.query),delete i.query,Object.assign(c,i),d=c.pathname,r&&(d=d.replace(new RegExp(`^${r}`),"")||"/"),t){const e=fe(d,t.locales);d=e.pathname,c.query.nextInternalLocale=e.detectedLocale||u.nextInternalLocale}if(d===e)return!0;if(n&&l){const e=l(d);if(e)return c.query={...c.query,...e},!0}}return!1};for(const e of s.beforeFiles||[])u(e);if(d!==e){let t=!1;for(const e of s.afterFiles||[])if(t=u(e),t)break;if(!t&&!(()=>{const t=ue(d||"");return t===ue(e)||(null==l?void 0:l(t))})())for(const e of s.fallback||[])if(t=u(e),t)break}return h},defaultRouteRegex:o,dynamicRouteMatcher:l,defaultRouteMatches:h,getParamsFromRouteMatches:function(e,r,s){return c(function(){const{groups:e,routeKeys:n}=o;return{re:{exec:i=>{const a=Object.fromEntries(new URLSearchParams(i)),o=t&&s&&a[1]===s;for(const e of Object.keys(a)){const t=a[e];if(e!==ne.dN&&e.startsWith(ne.dN)){const r=e.substring(ne.dN.length);a[r]=t,delete a[e]}}const l=Object.keys(n||{}),c=e=>{if(t){const n=Array.isArray(e),i=n?e[0]:e;if("string"==typeof i&&t.locales.some((e=>e.toLowerCase()===i.toLowerCase()&&(s=e,r.locale=s,!0))))return n&&e.splice(0,1),!n||0===e.length}return!1};return l.every((e=>a[e]))?l.reduce(((t,r)=>{const s=null==n?void 0:n[r];return s&&!c(a[r])&&(t[e[s].pos]=a[r]),t}),{}):Object.keys(a).reduce(((e,t)=>{if(!c(a[t])){let r=t;return o&&(r=parseInt(t,10)-1+""),Object.assign(e,{[r]:a[t]})}return e}),{})}},groups:e}}())(e.headers["x-now-route-matches"])},normalizeDynamicRouteParams:function(e,t){let r=!0;return o?{params:e=Object.keys(o.groups).reduce(((s,n)=>{let i=e[n];"string"==typeof i&&(i=Oe(i,!0)),Array.isArray(i)&&(i=i.map((e=>("string"==typeof e&&(e=Oe(e,!0)),e))));const a=h[n],l=o.groups[n].optional;return!(Array.isArray(a)?a.some((e=>Array.isArray(i)?i.some((t=>t.includes(e))):null==i?void 0:i.includes(e))):null==i?void 0:i.includes(a))&&(void 0!==i||l&&t)||(r=!1),!l||i&&(!Array.isArray(i)||1!==i.length||"index"!==i[0]&&i[0]!==`[[...${n}]]`)||(i=void 0,delete e[n]),i&&"string"==typeof i&&o.groups[n].repeat&&(i=i.split("/")),i&&(s[n]=i),s}),{}),hasValidParams:r}:{params:e,hasValidParams:!1}},normalizeVercelUrl:(e,t,r)=>function(e,t,r,s,n){if(s&&t&&n){const t=(0,Q.parse)(e.url,!0);delete t.search;for(const e of Object.keys(t.query))(e!==ne.dN&&e.startsWith(ne.dN)||(r||Object.keys(n.groups)).includes(e))&&delete t.query[e];e.url=(0,Q.format)(t)}}(e,t,r,n,o),interpolateDynamicPath:(e,t)=>function(e,t,r){if(!r)return e;for(const s of Object.keys(r.groups)){const{optional:n,repeat:i}=r.groups[s];let a=`[${i?"...":""}${s}]`;n&&(a=`[${a}]`);const o=e.indexOf(a);if(o>-1){let r;const n=t[s];r=Array.isArray(n)?n.map((e=>e&&encodeURIComponent(e))).join("/"):n?encodeURIComponent(n):"",e=e.slice(0,o)+r+e.slice(o+a.length)}}return e}(e,t,o)}}var qe=__webpack_require__("./dist/esm/lib/is-error.js");function De(e){const t=e.indexOf("#"),r=e.indexOf("?"),s=r>-1&&(t<0||r<t);return s||t>-1?{pathname:e.substring(0,s?r:t),query:s?e.substring(r,t>-1?t:void 0):"",hash:t>-1?e.slice(t):""}:{pathname:e,query:"",hash:""}}function Le(e,t){if("string"!=typeof e)return!1;const{pathname:r}=De(e);return r===t||r.startsWith(t+"/")}function je(e,t){if(!Le(e,t))return e;const r=e.slice(t.length);return r.startsWith("/")?r:"/"+r}function Ie(e,t){let r;if((null==t?void 0:t.host)&&!Array.isArray(t.host))r=t.host.toString().split(":")[0];else{if(!e.hostname)return;r=e.hostname}return r.toLowerCase()}function He(e,t){var r;const{basePath:s,i18n:n,trailingSlash:i}=null!=(r=t.nextConfig)?r:{},a={pathname:e,trailingSlash:"/"!==e?e.endsWith("/"):i};s&&Le(a.pathname,s)&&(a.pathname=je(a.pathname,s),a.basePath=s);let o=a.pathname;if(a.pathname.startsWith("/_next/data/")&&a.pathname.endsWith(".json")){const e=a.pathname.replace(/^\/_next\/data\//,"").replace(/\.json$/,"").split("/"),r=e[0];a.buildId=r,o="index"!==e[1]?"/"+e.slice(1).join("/"):"/",!0===t.parseData&&(a.pathname=o)}if(n){let e=t.i18nProvider?t.i18nProvider.analyze(a.pathname):fe(a.pathname,n.locales);var l;a.locale=e.detectedLocale,a.pathname=null!=(l=e.pathname)?l:a.pathname,!e.detectedLocale&&a.buildId&&(e=t.i18nProvider?t.i18nProvider.analyze(o):fe(o,n.locales),e.detectedLocale&&(a.locale=e.detectedLocale))}return a}class $e{constructor(e){this.provider=e}normalize(e){return this.provider.analyze(e).pathname}}class Ue{insert(e){this._insert(e.split("/").filter(Boolean),[],!1)}smoosh(){return this._smoosh()}_smoosh(e){void 0===e&&(e="/");const t=[...this.children.keys()].sort();null!==this.slugName&&t.splice(t.indexOf("[]"),1),null!==this.restSlugName&&t.splice(t.indexOf("[...]"),1),null!==this.optionalRestSlugName&&t.splice(t.indexOf("[[...]]"),1);const r=t.map((t=>this.children.get(t)._smoosh(""+e+t+"/"))).reduce(((e,t)=>[...e,...t]),[]);if(null!==this.slugName&&r.push(...this.children.get("[]")._smoosh(e+"["+this.slugName+"]/")),!this.placeholder){const t="/"===e?"/":e.slice(0,-1);if(null!=this.optionalRestSlugName)throw new Error('You cannot define a route with the same specificity as a optional catch-all route ("'+t+'" and "'+t+"[[..."+this.optionalRestSlugName+']]").');r.unshift(t)}return null!==this.restSlugName&&r.push(...this.children.get("[...]")._smoosh(e+"[..."+this.restSlugName+"]/")),null!==this.optionalRestSlugName&&r.push(...this.children.get("[[...]]")._smoosh(e+"[[..."+this.optionalRestSlugName+"]]/")),r}_insert(e,t,r){if(0===e.length)return void(this.placeholder=!1);if(r)throw new Error("Catch-all must be the last part of the URL.");let s=e[0];if(s.startsWith("[")&&s.endsWith("]")){let n=s.slice(1,-1),i=!1;if(n.startsWith("[")&&n.endsWith("]")&&(n=n.slice(1,-1),i=!0),n.startsWith("...")&&(n=n.substring(3),r=!0),n.startsWith("[")||n.endsWith("]"))throw new Error("Segment names may not start or end with extra brackets ('"+n+"').");if(n.startsWith("."))throw new Error("Segment names may not start with erroneous periods ('"+n+"').");function a(e,r){if(null!==e&&e!==r)throw new Error("You cannot use different slug names for the same dynamic path ('"+e+"' !== '"+r+"').");t.forEach((e=>{if(e===r)throw new Error('You cannot have the same slug name "'+r+'" repeat within a single dynamic path');if(e.replace(/\W/g,"")===s.replace(/\W/g,""))throw new Error('You cannot have the slug names "'+e+'" and "'+r+'" differ only by non-word symbols within a single dynamic path')})),t.push(r)}if(r)if(i){if(null!=this.restSlugName)throw new Error('You cannot use both an required and optional catch-all route at the same level ("[...'+this.restSlugName+']" and "'+e[0]+'" ).');a(this.optionalRestSlugName,n),this.optionalRestSlugName=n,s="[[...]]"}else{if(null!=this.optionalRestSlugName)throw new Error('You cannot use both an optional and required catch-all route at the same level ("[[...'+this.optionalRestSlugName+']]" and "'+e[0]+'").');a(this.restSlugName,n),this.restSlugName=n,s="[...]"}else{if(i)throw new Error('Optional route parameters are not yet supported ("'+e[0]+'").');a(this.slugName,n),this.slugName=n,s="[]"}}this.children.has(s)||this.children.set(s,new Ue),this.children.get(s)._insert(e.slice(1),t,r)}constructor(){this.placeholder=!0,this.children=new Map,this.slugName=null,this.restSlugName=null,this.optionalRestSlugName=null}}class Fe{constructor(e){this.definition=e,ae(e.pathname)&&(this.dynamic=c(Se(e.pathname)))}get identity(){return this.definition.pathname}get isDynamic(){return void 0!==this.dynamic}match(e){const t=this.test(e);return t?{definition:this.definition,params:t.params}:null}test(e){if(this.dynamic){const t=this.dynamic(e);return t?{params:t}:null}return e===this.definition.pathname?{}:null}}class Be extends Fe{get identity(){var e;return`${this.definition.pathname}?__nextLocale=${null==(e=this.definition.i18n)?void 0:e.locale}`}match(e,t){var r,s;const n=this.test(e,t);return n?{definition:this.definition,params:n.params,detectedLocale:(null==t||null==(r=t.i18n)?void 0:r.detectedLocale)??(null==(s=this.definition.i18n)?void 0:s.locale)}:null}test(e,t){return this.definition.i18n&&(null==t?void 0:t.i18n)?this.definition.i18n.locale&&t.i18n.detectedLocale&&this.definition.i18n.locale!==t.i18n.detectedLocale?null:super.test(t.i18n.pathname):super.test(e)}}class We{get compilationID(){return this.providers.length}async waitTillReady(){this.waitTillReadyPromise&&(await this.waitTillReadyPromise,delete this.waitTillReadyPromise)}async reload(){let e;this.waitTillReadyPromise=new Promise(((t,r)=>{e={resolve:t,reject:r}}));const t=this.compilationID;try{const e=[],r=await Promise.all(this.providers.map((e=>e.matchers()))),s=new Map,n={};for(const t of r)for(const r of t){r.duplicated&&delete r.duplicated;const t=s.get(r.definition.pathname);if(t){const e=n[r.definition.pathname]??[t];e.push(r),n[r.definition.pathname]=e,t.duplicated=e,r.duplicated=e}e.push(r),s.set(r.definition.pathname,r)}if(this.matchers.duplicates=n,this.previousMatchers.length===e.length&&this.previousMatchers.every(((t,r)=>t===e[r])))return;this.previousMatchers=e,this.matchers.static=e.filter((e=>!e.isDynamic));const i=e.filter((e=>e.isDynamic)),a=new Map,o=new Array;for(let e=0;e<i.length;e++){const t=i[e].definition.pathname,r=a.get(t)??[];r.push(e),1===r.length&&(a.set(t,r),o.push(t))}const l=function(e){const t=new Ue;return e.forEach((e=>t.insert(e))),t.smoosh()}(o),c=[];for(const e of l){const t=a.get(e);if(!Array.isArray(t))throw new Error("Invariant: expected to find identity in indexes map");const r=t.map((e=>i[e]));c.push(...r)}if(this.matchers.dynamic=c,this.compilationID!==t)throw new Error("Invariant: expected compilation to finish before new matchers were added, possible missing await")}catch(t){e.reject(t)}finally{this.lastCompilationID=t,e.resolve()}}push(e){this.providers.push(e)}async test(e,t){return null!==await this.match(e,t)}async match(e,t){for await(const r of this.matchAll(e,t))return r;return null}validate(e,t,r){var s;return t instanceof Be?t.match(e,r):(null==(s=r.i18n)?void 0:s.inferredFromDefault)?t.match(r.i18n.pathname):t.match(e)}async*matchAll(e,t){if(this.lastCompilationID!==this.compilationID)throw new Error("Invariant: expected routes to have been loaded before match");if(!ae(e=Ne(e)))for(const r of this.matchers.static){const s=this.validate(e,r,t);s&&(yield s)}if(null==t?void 0:t.skipDynamic)return null;for(const r of this.matchers.dynamic){const s=this.validate(e,r,t);s&&(yield s)}return null}constructor(){this.providers=[],this.matchers={static:[],dynamic:[],duplicates:{}},this.lastCompilationID=this.compilationID,this.previousMatchers=[]}}var ze,Ge=__webpack_require__("./dist/esm/shared/lib/isomorphic/path.js"),Xe=__webpack_require__.n(Ge);class Ke{constructor(...e){this.prefix=Xe().posix.join(...e)}normalize(e){return Xe().posix.join(this.prefix,e)}}function Ve(e){const t=/^\/index(\/|$)/.test(e)&&!ae(e)?"/index"+e:"/"===e?"/index":Ne(e);{const{posix:e}=__webpack_require__("path"),r=e.normalize(t);if(r!==t)throw new l.KM("Requested and resolved page mismatch: "+t+" "+r)}return t}class Je extends Ke{constructor(){super("app")}normalize(e){return super.normalize(Ve(e))}}class Ye extends Ke{constructor(e){super(e,b)}normalize(e){return super.normalize(e)}}class Ze{constructor(e=[]){this.normalizers=e}push(e){this.normalizers.push(e)}normalize(e){return this.normalizers.reduce(((e,t)=>t.normalize(e)),e)}}function Qe(e){return{normalize:e}}class et{normalize(e){return e.replace(/%5F/g,"_")}}class tt extends Ze{constructor(){super([Qe(Ae),new et])}normalize(e){return super.normalize(e)}}class rt{constructor(e){this.filename=new Ye(e),this.pathname=new tt,this.bundlePath=new Je}}!function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(ze||(ze={}));class st extends Fe{get identity(){return`${this.definition.pathname}?__nextPage=${this.definition.page}`}}class nt{constructor(e){this.loader=e,this.cached=[]}async matchers(){const e=await this.loader.load();if(!e)return[];if(this.data&&this.loader.compare(this.data,e))return this.cached;this.data=e;const t=await this.transform(e);return this.cached=t,t}}class it extends nt{constructor(e,t){super({load:async()=>t.load(e),compare:(e,t)=>e===t})}}class at extends it{constructor(e,t){super(w,t),this.normalizers=new rt(e)}async transform(e){const t=Object.keys(e).filter((e=>e.endsWith("/page"))),r={};for(const e of t){const t=this.normalizers.pathname.normalize(e);t in r?r[t].push(e):r[t]=[e]}const s=[];for(const[t,n]of Object.entries(r)){const r=n[0],i=this.normalizers.filename.normalize(e[r]),a=this.normalizers.bundlePath.normalize(r);s.push(new st({kind:ze.APP_PAGE,pathname:t,page:r,bundlePath:a,filename:i,appPaths:n}))}return s}}class ot extends Fe{}class lt extends it{constructor(e,t){super(w,t),this.normalizers=new rt(e)}async transform(e){const t=Object.keys(e).filter((e=>e.endsWith("/route"))),r=[];for(const s of t){const t=this.normalizers.filename.normalize(e[s]),n=this.normalizers.pathname.normalize(s),i=this.normalizers.bundlePath.normalize(s);r.push(new ot({kind:ze.APP_ROUTE,pathname:n,page:s,bundlePath:i,filename:t}))}return r}}function ct(e){return"/api"===e||Boolean(null==e?void 0:e.startsWith("/api/"))}class ht extends Fe{}class dt extends Be{}class ut extends Ze{constructor(){super([Qe(Ve),new Ke("pages")])}normalize(e){return super.normalize(e)}}class pt extends Ke{constructor(e){super(e,b)}normalize(e){return super.normalize(e)}}class ft{constructor(e){this.filename=new pt(e),this.bundlePath=new ut}}class mt extends it{constructor(e,t,r){super(y,t),this.i18nProvider=r,this.normalizers=new ft(e)}async transform(e){const t=Object.keys(e).filter((e=>ct(e))),r=[];for(const s of t)if(this.i18nProvider){const{detectedLocale:t,pathname:n}=this.i18nProvider.analyze(s);r.push(new dt({kind:ze.PAGES_API,pathname:n,page:s,bundlePath:this.normalizers.bundlePath.normalize(s),filename:this.normalizers.filename.normalize(e[s]),i18n:{locale:t}}))}else r.push(new ht({kind:ze.PAGES_API,pathname:s,page:s,bundlePath:this.normalizers.bundlePath.normalize(s),filename:this.normalizers.filename.normalize(e[s])}));return r}}class gt extends Fe{}class _t extends Be{}class vt extends it{constructor(e,t,r){super(y,t),this.i18nProvider=r,this.normalizers=new ft(e)}async transform(e){const t=Object.keys(e).filter((e=>!ct(e))).filter((e=>{var t;const r=(null==(t=this.i18nProvider)?void 0:t.analyze(e).pathname)??e;return!x.includes(r)})),r=[];for(const s of t)if(this.i18nProvider){const{detectedLocale:t,pathname:n}=this.i18nProvider.analyze(s);r.push(new _t({kind:ze.PAGES,pathname:n,page:s,bundlePath:this.normalizers.bundlePath.normalize(s),filename:this.normalizers.filename.normalize(e[s]),i18n:{locale:t}}))}else r.push(new gt({kind:ze.PAGES,pathname:s,page:s,bundlePath:this.normalizers.bundlePath.normalize(s),filename:this.normalizers.filename.normalize(e[s])}));return r}}class yt{constructor(e){this.getter=e}load(e){return this.getter(e)}}var wt=__webpack_require__("./lib/trace/tracer"),bt=__webpack_require__("./dist/esm/server/lib/trace/constants.js");class xt{constructor(e){var t;if(this.config=e,!e.locales.length)throw new Error("Invariant: No locales provided");this.lowerCaseLocales=e.locales.map((e=>e.toLowerCase())),this.lowerCaseDomains=null==(t=e.domains)?void 0:t.map((e=>{var t;const r=e.domain.toLowerCase();return{defaultLocale:e.defaultLocale.toLowerCase(),hostname:r.split(":")[0],domain:r,locales:null==(t=e.locales)?void 0:t.map((e=>e.toLowerCase())),http:e.http}}))}detectDomainLocale(e,t){if(e&&this.lowerCaseDomains&&this.config.domains){t&&(t=t.toLowerCase());for(let s=0;s<this.lowerCaseDomains.length;s++){var r;const n=this.lowerCaseDomains[s];if(n.hostname===e||(null==(r=n.locales)?void 0:r.some((e=>e===t))))return this.config.domains[s]}}}fromQuery(e,t){const r=t.__nextLocale;if(r){const t=this.analyze(e);if(t.detectedLocale){if(t.detectedLocale!==r)throw new Error(`Invariant: The detected locale does not match the locale in the query. Expected to find '${r}' in '${e}' but found '${t.detectedLocale}'}`);e=t.pathname}}return{pathname:e,detectedLocale:r,inferredFromDefault:"1"===t.__nextInferredLocaleFromDefault}}analyze(e,t={}){let r=t.defaultLocale,s="string"==typeof r;const n=e.split("/");if(!n[1])return{detectedLocale:r,pathname:e,inferredFromDefault:s};const i=n[1].toLowerCase(),a=this.lowerCaseLocales.indexOf(i);return a<0?{detectedLocale:r,pathname:e,inferredFromDefault:s}:(r=this.config.locales[a],s=!1,{detectedLocale:r,pathname:e=e.slice(r.length+1)||"/",inferredFromDefault:s})}}function Et(e){const t=new Headers;for(let[r,s]of Object.entries(e)){const e=Array.isArray(s)?s:[s];for(let s of e)void 0!==s&&("number"==typeof s&&(s=s.toString()),t.append(r,s))}return t}function St(e){var t,r,s,n,i,a=[],o=0;function l(){for(;o<e.length&&/\s/.test(e.charAt(o));)o+=1;return o<e.length}for(;o<e.length;){for(t=o,i=!1;l();)if(","===(r=e.charAt(o))){for(s=o,o+=1,l(),n=o;o<e.length&&"="!==(r=e.charAt(o))&&";"!==r&&","!==r;)o+=1;o<e.length&&"="===e.charAt(o)?(i=!0,o=n,a.push(e.substring(t,s)),t=o):o=s+1}else o+=1;(!i||o>=e.length)&&a.push(e.substring(t,e.length))}return a}function Ct(e){const t={},r=[];if(e)for(const[s,n]of e.entries())"set-cookie"===s.toLowerCase()?(r.push(...St(n)),t[s]=1===r.length?r[0]:r):t[s]=n;return t}async function Pt(e,t,r){{var s;t.statusCode=r.status,t.statusMessage=r.statusText,null==(s=r.headers)||s.forEach(((e,r)=>{if("set-cookie"===r.toLowerCase())for(const s of St(e))t.appendHeader(r,s);else t.appendHeader(r,e)}));const n=t.originalResponse;r.body&&"HEAD"!==e.method?await he(r.body,n):n.end()}}var kt=__webpack_require__("./dist/esm/server/web/spec-extension/cookies.js");function Rt(e,t){if(!e.startsWith("/")||!t)return e;const{pathname:r,query:s,hash:n}=De(e);return""+t+r+s+n}function Tt(e,t){if(!e.startsWith("/")||!t)return e;const{pathname:r,query:s,hash:n}=De(e);return""+r+t+s+n}Symbol.for("next.mutated.cookies");const Nt=/(?!^https?:\/\/)(127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}|\[::1\]|localhost)/;function At(e,t){return new URL(String(e).replace(Nt,"localhost"),t&&String(t).replace(Nt,"localhost"))}const Ot=Symbol("NextURLInternal");class Mt{constructor(e,t,r){let s,n;"object"==typeof t&&"pathname"in t||"string"==typeof t?(s=t,n=r||{}):n=r||t||{},this[Ot]={url:At(e,s??n.base),options:n,basePath:""},this.analyze()}analyze(){var e,t,r,s,n;const i=He(this[Ot].url.pathname,{nextConfig:this[Ot].options.nextConfig,parseData:!process.env.__NEXT_NO_MIDDLEWARE_URL_NORMALIZE,i18nProvider:this[Ot].options.i18nProvider}),a=Ie(this[Ot].url,this[Ot].options.headers);this[Ot].domainLocale=this[Ot].options.i18nProvider?this[Ot].options.i18nProvider.detectDomainLocale(a):function(e,t,r){if(e){r&&(r=r.toLowerCase());for(const i of e){var s,n;if(t===(null==(s=i.domain)?void 0:s.split(":")[0].toLowerCase())||r===i.defaultLocale.toLowerCase()||(null==(n=i.locales)?void 0:n.some((e=>e.toLowerCase()===r))))return i}}}(null==(t=this[Ot].options.nextConfig)||null==(e=t.i18n)?void 0:e.domains,a);const o=(null==(r=this[Ot].domainLocale)?void 0:r.defaultLocale)||(null==(n=this[Ot].options.nextConfig)||null==(s=n.i18n)?void 0:s.defaultLocale);this[Ot].url.pathname=i.pathname,this[Ot].defaultLocale=o,this[Ot].basePath=i.basePath??"",this[Ot].buildId=i.buildId,this[Ot].locale=i.locale??o,this[Ot].trailingSlash=i.trailingSlash}formatPathname(){return function(e){let t=function(e,t,r,s){if(!t||t===r)return e;const n=e.toLowerCase();if(!s){if(Le(n,"/api"))return e;if(Le(n,"/"+t.toLowerCase()))return e}return Rt(e,"/"+t)}(e.pathname,e.locale,e.buildId?void 0:e.defaultLocale,e.ignorePrefix);return!e.buildId&&e.trailingSlash||(t=ue(t)),e.buildId&&(t=Tt(Rt(t,"/_next/data/"+e.buildId),"/"===e.pathname?"index.json":".json")),t=Rt(t,e.basePath),!e.buildId&&e.trailingSlash?t.endsWith("/")?t:Tt(t,"/"):ue(t)}({basePath:this[Ot].basePath,buildId:this[Ot].buildId,defaultLocale:this[Ot].options.forceLocale?void 0:this[Ot].defaultLocale,locale:this[Ot].locale,pathname:this[Ot].url.pathname,trailingSlash:this[Ot].trailingSlash})}formatSearch(){return this[Ot].url.search}get buildId(){return this[Ot].buildId}set buildId(e){this[Ot].buildId=e}get locale(){return this[Ot].locale??""}set locale(e){var t,r;if(!this[Ot].locale||!(null==(r=this[Ot].options.nextConfig)||null==(t=r.i18n)?void 0:t.locales.includes(e)))throw new TypeError(`The NextURL configuration includes no locale "${e}"`);this[Ot].locale=e}get defaultLocale(){return this[Ot].defaultLocale}get domainLocale(){return this[Ot].domainLocale}get searchParams(){return this[Ot].url.searchParams}get host(){return this[Ot].url.host}set host(e){this[Ot].url.host=e}get hostname(){return this[Ot].url.hostname}set hostname(e){this[Ot].url.hostname=e}get port(){return this[Ot].url.port}set port(e){this[Ot].url.port=e}get protocol(){return this[Ot].url.protocol}set protocol(e){this[Ot].url.protocol=e}get href(){const e=this.formatPathname(),t=this.formatSearch();return`${this.protocol}//${this.host}${e}${t}${this.hash}`}set href(e){this[Ot].url=At(e),this.analyze()}get origin(){return this[Ot].url.origin}get pathname(){return this[Ot].url.pathname}set pathname(e){this[Ot].url.pathname=e}get hash(){return this[Ot].url.hash}set hash(e){this[Ot].url.hash=e}get search(){return this[Ot].url.search}set search(e){this[Ot].url.search=e}get password(){return this[Ot].url.password}set password(e){this[Ot].url.password=e}get username(){return this[Ot].url.username}set username(e){this[Ot].url.username=e}get basePath(){return this[Ot].basePath}set basePath(e){this[Ot].basePath=e.startsWith("/")?e:`/${e}`}toString(){return this.href}toJSON(){return this.href}[Symbol.for("edge-runtime.inspect.custom")](){return{href:this.href,origin:this.origin,protocol:this.protocol,username:this.username,password:this.password,host:this.host,hostname:this.hostname,port:this.port,pathname:this.pathname,search:this.search,searchParams:this.searchParams,hash:this.hash}}clone(){return new Mt(String(this),this[Ot].options)}}class qt extends Error{constructor(){super("The request.page has been deprecated in favour of `URLPattern`.\n  Read more: https://nextjs.org/docs/messages/middleware-request-page\n  ")}}class Dt extends Error{constructor(){super("The request.ua has been removed in favour of `userAgent` function.\n  Read more: https://nextjs.org/docs/messages/middleware-parse-user-agent\n  ")}}const Lt=Symbol("internal request");class jt extends Request{constructor(e,t={}){const r="string"!=typeof e&&"url"in e?e.url:String(e);!function(e){try{return String(new URL(String(e)))}catch(t){throw new Error(`URL is malformed "${String(e)}". Please use only absolute URLs - https://nextjs.org/docs/messages/middleware-relative-urls`,{cause:t})}}(r),e instanceof Request?super(e,t):super(r,t);const s=new Mt(r,{headers:Ct(this.headers),nextConfig:t.nextConfig});this[Lt]={cookies:new kt.q(this.headers),geo:t.geo||{},ip:t.ip,nextUrl:s,url:process.env.__NEXT_NO_MIDDLEWARE_URL_NORMALIZE?r:s.toString()}}[Symbol.for("edge-runtime.inspect.custom")](){return{cookies:this.cookies,geo:this.geo,ip:this.ip,nextUrl:this.nextUrl,url:this.url,bodyUsed:this.bodyUsed,cache:this.cache,credentials:this.credentials,destination:this.destination,headers:Object.fromEntries(this.headers),integrity:this.integrity,keepalive:this.keepalive,method:this.method,mode:this.mode,redirect:this.redirect,referrer:this.referrer,referrerPolicy:this.referrerPolicy,signal:this.signal}}get cookies(){return this[Lt].cookies}get geo(){return this[Lt].geo}get ip(){return this[Lt].ip}get nextUrl(){return this[Lt].nextUrl}get page(){throw new qt}get ua(){throw new Dt}get url(){return this[Lt].url}}class It{static fromBaseNextRequest(e,t){return"request"in e&&e.request?It.fromWebNextRequest(e):It.fromNodeNextRequest(e,t)}static fromNodeNextRequest(e,t){let r,s=null;if("GET"!==e.method&&"HEAD"!==e.method&&e.body&&(s=e.body),e.url.startsWith("http"))r=new URL(e.url);else{const t=m(e,"__NEXT_INIT_URL");r=t&&t.startsWith("http")?new URL(e.url,t):new URL(e.url,"http://n")}return new jt(r,{body:s,method:e.method,headers:Et(e.headers),duplex:"half",signal:t})}static fromWebNextRequest(e){let t=null;return"GET"!==e.method&&"HEAD"!==e.method&&(t=e.body),new jt(e.url,{body:t,method:e.method,headers:Et(e.headers),duplex:"half",signal:e.request.signal})}}const Ht=ge("/_next/data/:path*");Pe.H4;const $t=["x-invoke-path","x-invoke-status","x-invoke-error","x-invoke-query","x-invoke-output","x-middleware-invoke"];function Ut(e){for(const t of $t)delete e[t]}class Ft extends Error{}class Bt extends Error{constructor(e){super(),this.innerError=e}}class Wt{constructor(e){var t,r,s;this.prepared=!1,this.preparedPromise=null,this.customErrorNo404Warn=(0,l.gf)((()=>{G("You have added a custom /_error page without a custom /404 page. This prevents the 404 page from being auto statically optimized.\nSee here for info: https://nextjs.org/docs/messages/custom-error-no-custom-404")}));const{dir:n=".",quiet:i=!1,conf:a,dev:o=!1,minimalMode:c=!1,customServer:h=!0,hostname:d,port:u}=e;this.serverOptions=e,this.isRenderWorker=e._renderWorker,this.dir=__webpack_require__("path").resolve(n),this.quiet=i,this.loadEnvConfig({dev:o}),this.nextConfig=a,this.hostname=d,this.hostname&&(this.fetchHostname=function(e){return t=e,se.test(t)?`[${e}]`:e;var t}(this.hostname)),this.port=u,this.distDir=__webpack_require__("path").join(this.dir,this.nextConfig.distDir),this.publicDir=this.getPublicDir(),this.hasStaticDir=!c&&this.getHasStaticDir(),this.i18nProvider=(null==(t=this.nextConfig.i18n)?void 0:t.locales)?new xt(this.nextConfig.i18n):void 0,this.localeNormalizer=this.i18nProvider?new $e(this.i18nProvider):void 0;const{serverRuntimeConfig:p={},publicRuntimeConfig:f,assetPrefix:m,generateEtags:g}=this.nextConfig;this.buildId=this.getBuildId(),this.minimalMode=c||!!process.env.NEXT_PRIVATE_MINIMAL_MODE,this.hasAppDir=this.getHasAppDir(o);const _=this.hasAppDir;this.nextFontManifest=this.getNextFontManifest(),this.nextConfig.experimental.deploymentId&&(process.env.NEXT_DEPLOYMENT_ID=this.nextConfig.experimental.deploymentId),this.renderOpts={deploymentId:this.nextConfig.experimental.deploymentId,strictNextHead:!!this.nextConfig.experimental.strictNextHead,poweredByHeader:this.nextConfig.poweredByHeader,canonicalBase:this.nextConfig.amp.canonicalBase||"",buildId:this.buildId,generateEtags:g,previewProps:this.getPrerenderManifest().preview,customServer:!0===h||void 0,ampOptimizerConfig:null==(r=this.nextConfig.experimental.amp)?void 0:r.optimizer,basePath:this.nextConfig.basePath,images:this.nextConfig.images,optimizeFonts:this.nextConfig.optimizeFonts,fontManifest:this.nextConfig.optimizeFonts&&!o?this.getFontManifest():void 0,optimizeCss:this.nextConfig.experimental.optimizeCss,nextConfigOutput:this.nextConfig.output,nextScriptWorkers:this.nextConfig.experimental.nextScriptWorkers,disableOptimizedLoading:this.nextConfig.experimental.disableOptimizedLoading,domainLocales:null==(s=this.nextConfig.i18n)?void 0:s.domains,distDir:this.distDir,serverComponents:_,crossOrigin:this.nextConfig.crossOrigin?this.nextConfig.crossOrigin:void 0,largePageDataBytes:this.nextConfig.experimental.largePageDataBytes,runtimeConfig:Object.keys(f).length>0?f:void 0},(0,oe.setConfig)({serverRuntimeConfig:p,publicRuntimeConfig:f}),this.pagesManifest=this.getPagesManifest(),this.appPathsManifest=this.getAppPathsManifest(),this.appPathRoutes=this.getAppPathRoutes(),this.matchers=this.getRouteMatchers(),this.matchers.reload(),this.setAssetPrefix(m),this.responseCache=this.getResponseCache({dev:o})}reloadMatchers(){return this.matchers.reload()}async handleNextDataRequest(e,t,r){const s=this.getMiddleware(),n=function(e){return"string"==typeof e&&Ht(e)}(r.pathname);if(!n||!n.path)return{finished:!1};if(n.path[0]!==this.buildId)return e.headers["x-middleware-invoke"]?{finished:!1}:(await this.render404(e,t,r),{finished:!0});n.path.shift();const i=n.path[n.path.length-1];if("string"!=typeof i||!i.endsWith(".json"))return await this.render404(e,t,r),{finished:!0};let a=`/${n.path.join("/")}`;var o,l;if(void 0===(l=".json")&&(l=""),o=(o=a).replace(/\\/g,"/"),(o=l&&o.endsWith(l)?o.slice(0,-l.length):o).startsWith("/index/")&&!ae(o)?o=o.slice(6):"/index"===o&&(o="/"),a=o,s&&(this.nextConfig.trailingSlash&&!a.endsWith("/")&&(a+="/"),!this.nextConfig.trailingSlash&&a.length>1&&a.endsWith("/")&&(a=a.substring(0,a.length-1))),this.i18nProvider){var c;const n=null==e||null==(c=e.headers.host)?void 0:c.split(":")[0].toLowerCase(),i=this.i18nProvider.detectDomainLocale(n),o=(null==i?void 0:i.defaultLocale)??this.i18nProvider.config.defaultLocale,l=this.i18nProvider.analyze(a);if(l.detectedLocale&&(a=l.pathname),r.query.__nextLocale=l.detectedLocale,r.query.__nextDefaultLocale=o,l.detectedLocale||delete r.query.__nextInferredLocaleFromDefault,!l.detectedLocale&&!s)return r.query.__nextLocale=o,await this.render404(e,t,r),{finished:!0}}return r.pathname=a,r.query.__nextDataReq="1",{finished:!1}}async handleNextImageRequest(e,t,r){return{finished:!1}}async handleCatchallRenderRequest(e,t,r){return{finished:!1}}async handleCatchallMiddlewareRequest(e,t,r){return{finished:!1}}getRouteMatchers(){const e=new yt((e=>{switch(e){case y:return this.getPagesManifest()??null;case w:return this.getAppPathsManifest()??null;default:return null}})),t=new We;return t.push(new vt(this.distDir,e,this.i18nProvider)),t.push(new mt(this.distDir,e,this.i18nProvider)),this.hasAppDir&&(t.push(new at(this.distDir,e)),t.push(new lt(this.distDir,e))),t}logError(e){this.quiet||console.error(e)}async handleRequest(e,t,r){await this.prepare();const s=e.method.toUpperCase();return(0,wt.getTracer)().trace(bt._J.handleRequest,{spanName:`${s} ${e.url}`,kind:wt.SpanKind.SERVER,attributes:{"http.method":s,"http.target":e.url}},(async n=>this.handleRequestImpl(e,t,r).finally((()=>{if(!n)return;n.setAttributes({"http.status_code":t.statusCode});const e=(0,wt.getTracer)().getRootSpanAttributes();if(!e)return;if(e.get("next.span_type")!==bt._J.handleRequest)return void console.warn(`Unexpected root span type '${e.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);const r=e.get("next.route");if(r){const e=`${s} ${r}`;n.setAttributes({"next.route":r,"http.route":r,"next.span_name":e}),n.updateName(e)}}))))}async handleRequestImpl(e,t,r){try{var s,n;await this.matchers.waitTillReady();const h=t.originalResponse||t,d=h.setHeader.bind(h);h.setHeader=(t,r)=>{if(!h.headersSent){if("set-cookie"===t.toLowerCase()){const t=m(e,"_nextMiddlewareCookie");t&&Array.isArray(r)&&r.every(((e,r)=>e===t[r]))||(r=[...new Set([...t||[],..."string"==typeof r?[r]:Array.isArray(r)?r:[]])])}return d(t,r)}};const u=(e.url||"").split("?")[0];if(null==u?void 0:u.match(/(\\|\/\/)/)){const r=(0,l.U3)(e.url);return void t.redirect(r,308).body(r).send()}if(r&&"object"==typeof r||(r=(0,Q.parse)(e.url,!0)),"string"==typeof r.query&&(r.query=Object.fromEntries(new URLSearchParams(r.query))),e.url.endsWith(".rsc"))r.query.__nextDataReq="1";else if(e.headers["x-now-route-matches"])for(const t of Pe.vu)delete e.headers[t.toString().toLowerCase()];e.url=Oe(e.url,this.hasAppDir),r.pathname=Oe(r.pathname||"",this.hasAppDir),this.attachRequestMeta(e,r);const p=null==(s=this.i18nProvider)?void 0:s.detectDomainLocale(Ie(r,e.headers)),f=(null==p?void 0:p.defaultLocale)||(null==(n=this.nextConfig.i18n)?void 0:n.defaultLocale);r.query.__nextDefaultLocale=f;const g=j(e.url.replace(/^\/+/,"/")),v=He(g.pathname,{nextConfig:this.nextConfig,i18nProvider:this.i18nProvider});g.pathname=v.pathname,v.basePath&&(e.url=je(e.url,this.nextConfig.basePath),_(e,"_nextHadBasePath",!0));const y="string"==typeof e.headers["x-matched-path"];if(y)try{var i,a;this.hasAppDir&&(e.url.match(/^\/index($|\?)/)&&(e.url=e.url.replace(/^\/index/,"/")),r.pathname="/index"===r.pathname?"/":r.pathname);let s=Oe(new URL(e.headers["x-matched-path"],"http://localhost").pathname,this.hasAppDir),n=new URL(e.url,"http://localhost").pathname;n.startsWith("/_next/data/")&&(r.query.__nextDataReq="1");const l=this.stripNextDataPath(n);s=this.stripNextDataPath(s,!1);const c=null==(i=this.i18nProvider)?void 0:i.analyze(s,{defaultLocale:f});c&&(r.query.__nextLocale=c.detectedLocale,c.inferredFromDefault?r.query.__nextInferredLocaleFromDefault="1":delete r.query.__nextInferredLocaleFromDefault),s=pe(s);let h=s;const d=await this.matchers.match(s,{i18n:c});d&&(h=d.definition.pathname);const u=void 0!==(null==d?void 0:d.params);c&&(s=c.pathname);const p=Me({pageIsDynamic:u,page:h,i18n:this.nextConfig.i18n,basePath:this.nextConfig.basePath,rewrites:(null==(a=this.getRoutesManifest())?void 0:a.rewrites)||{beforeFiles:[],afterFiles:[],fallback:[]},caseSensitive:!!this.nextConfig.experimental.caseSensitiveRoutes});f&&!v.locale&&(r.pathname=`/${f}${r.pathname}`);const m=r.pathname,y=p.handleRewrites(e,r),w=Object.keys(y),b=m!==r.pathname;b&&(_(e,"_nextRewroteUrl",r.pathname),_(e,"_nextDidRewrite",!0));const x=new Set;for(const e of Object.keys(r.query)){const t=r.query[e];if(e!==ne.dN&&e.startsWith(ne.dN)){const s=e.substring(ne.dN.length);r.query[s]=t,x.add(s),delete r.query[e]}}if(u){let t={},n=p.normalizeDynamicRouteParams(r.query);if(!n.hasValidParams&&u&&!ae(l)){let e=null==p.dynamicRouteMatcher?void 0:p.dynamicRouteMatcher.call(p,l);e&&(p.normalizeDynamicRouteParams(e),Object.assign(n.params,e),n.hasValidParams=!0)}if(n.hasValidParams&&(t=n.params),e.headers["x-now-route-matches"]&&ae(s)&&!n.hasValidParams){const s={},i=p.getParamsFromRouteMatches(e,s,r.query.__nextLocale||"");s.locale&&(r.query.__nextLocale=s.locale,delete r.query.__nextInferredLocaleFromDefault),n=p.normalizeDynamicRouteParams(i,!0),n.hasValidParams&&(t=n.params)}u&&p.defaultRouteMatches&&l===h&&!n.hasValidParams&&!p.normalizeDynamicRouteParams({...t},!0).hasValidParams&&(t=p.defaultRouteMatches),t&&(s=p.interpolateDynamicPath(h,t),e.url=p.interpolateDynamicPath(e.url,t))}var o;(u||b)&&p.normalizeVercelUrl(e,!0,[...w,...Object.keys((null==(o=p.defaultRouteRegex)?void 0:o.groups)||{})]);for(const e of x)delete r.query[e];if(r.pathname=s,g.pathname=r.pathname,(await this.handleNextDataRequest(e,t,r)).finished)return}catch(r){if(r instanceof l._9||r instanceof l.KM)return t.statusCode=400,this.renderError(null,e,t,"/_error",{});throw r}if(_(e,"__nextIsLocaleDomain",Boolean(p)),v.locale&&(e.url=(0,Q.format)(g),_(e,"__nextStrippedLocale",!0)),r.query.__nextLocale||(v.locale?r.query.__nextLocale=v.locale:f&&(r.query.__nextLocale=f,r.query.__nextInferredLocaleFromDefault="1")),!this.serverOptions.webServerConfig&&!m(e,"_nextIncrementalCache")){let t="https:";try{t=new URL(m(e,"__NEXT_INIT_URL")||"/","http://n").protocol}catch{}const r=this.getIncrementalCache({requestHeaders:Object.assign({},e.headers),requestProtocol:t.substring(0,t.length-1)});_(e,"_nextIncrementalCache",r),globalThis.__incrementalCache=r}const w=e.headers["x-invoke-path"],b=!y&&w;if(b){var c;if(e.headers["x-invoke-status"]){const s=e.headers["x-invoke-query"];"string"==typeof s&&Object.assign(r.query,JSON.parse(decodeURIComponent(s))),t.statusCode=Number(e.headers["x-invoke-status"]);let n=null;if("string"==typeof e.headers["x-invoke-error"]){const t=JSON.parse(e.headers["x-invoke-error"]||"{}");n=new Error(t.message)}return this.renderError(n,e,t,"/_error",r.query)}const s=new URL(w||"/","http://n"),n=He(s.pathname,{nextConfig:this.nextConfig,parseData:!1});n.locale&&(r.query.__nextLocale=n.locale),r.pathname!==s.pathname&&(r.pathname=s.pathname,_(e,"_nextRewroteUrl",n.pathname),_(e,"_nextDidRewrite",!0));const i=fe(je(r.pathname,this.nextConfig.basePath||""),(null==(c=this.nextConfig.i18n)?void 0:c.locales)||[]);i.detectedLocale&&(r.query.__nextLocale=i.detectedLocale),r.pathname=i.pathname;for(const e of Object.keys(r.query))e.startsWith("__next")||e.startsWith("_next")||delete r.query[e];const a=e.headers["x-invoke-query"];if("string"==typeof a&&Object.assign(r.query,JSON.parse(decodeURIComponent(a))),r.pathname.startsWith("/_next/image")&&(await this.handleNextImageRequest(e,t,r)).finished)return;if((await this.handleNextDataRequest(e,t,r)).finished)return;return void await this.handleCatchallRenderRequest(e,t,r)}if(e.headers["x-middleware-invoke"]){if((await this.handleNextDataRequest(e,t,r)).finished)return;if((await this.handleCatchallMiddlewareRequest(e,t,r)).finished)return;{const e=new Error;throw e.result={response:new Response(null,{headers:{"x-middleware-next":"1"}})},e.bubble=!0,e}}return y||b||!v.basePath||(r.pathname=je(r.pathname,v.basePath)),t.statusCode=200,await this.run(e,t,r)}catch(r){if(r instanceof Ft)throw r;if(r&&"object"==typeof r&&"ERR_INVALID_URL"===r.code||r instanceof l._9||r instanceof l.KM)return t.statusCode=400,this.renderError(null,e,t,"/_error",{});throw r}}getRequestHandler(){return this.handleRequest.bind(this)}setAssetPrefix(e){this.renderOpts.assetPrefix=e?e.replace(/\/$/,""):""}async prepare(){if(!this.prepared)return null===this.preparedPromise&&(this.preparedPromise=this.prepareImpl().then((()=>{this.prepared=!0,this.preparedPromise=null}))),this.preparedPromise}async prepareImpl(){}async close(){}getAppPathRoutes(){const e={};return Object.keys(this.appPathsManifest||{}).forEach((t=>{const r=Ae(t);e[r]||(e[r]=[]),e[r].push(t)})),e}async run(e,t,r){return(0,wt.getTracer)().trace(bt._J.run,(async()=>this.runImpl(e,t,r)))}async runImpl(e,t,r){await this.handleCatchallRenderRequest(e,t,r)}async pipe(e,t){return(0,wt.getTracer)().trace(bt._J.pipe,(async()=>this.pipeImpl(e,t)))}async pipeImpl(e,t){const r=ce(t.req.headers["user-agent"]||""),s={...t,renderOpts:{...this.renderOpts,supportsDynamicHTML:!r,isBot:!!r}},n=await e(s);if(null===n)return;const{req:i,res:a}=s,{body:o,type:l,revalidateOptions:c}=n;if(!a.sent){const{generateEtags:e,poweredByHeader:t,dev:r}=this.renderOpts;return r&&a.setHeader("Cache-Control","no-store, must-revalidate"),this.sendRenderResult(i,a,{result:o,type:l,generateEtags:e,poweredByHeader:t,options:c})}}async getStaticHTML(e,t){const r={...t,renderOpts:{...this.renderOpts,supportsDynamicHTML:!1}},s=await e(r);return null===s?null:s.body.toUnchunkedString()}async render(e,t,r,s={},n,i=!1){return(0,wt.getTracer)().trace(bt._J.render,(async()=>this.renderImpl(e,t,r,s,n,i)))}async renderImpl(e,t,r,s={},n,i=!1){var a;return r.startsWith("/")||console.warn(`Cannot render page with path "${r}", did you mean "/${r}"?. See more info here: https://nextjs.org/docs/messages/render-no-starting-slash`),this.renderOpts.customServer&&"/index"===r&&!await this.hasPage("/index")&&(r="/"),a=r,x.includes(a)?this.render404(e,t,n):this.pipe((e=>this.renderToResponse(e)),{req:e,res:t,pathname:r,query:s})}async getStaticPaths({pathname:e}){var t;const r=null==(t=this.getPrerenderManifest().dynamicRoutes[e])?void 0:t.fallback;return{staticPaths:void 0,fallbackMode:"string"==typeof r?"static":null===r?"blocking":r}}async renderToResponseWithComponents(e,t){return(0,wt.getTracer)().trace(bt._J.renderToResponseWithComponents,(async()=>this.renderToResponseWithComponentsImpl(e,t)))}stripInternalHeaders(e){process.env.__NEXT_TEST_MODE&&"1"===process.env.__NEXT_NO_STRIP_INTERNAL_HEADERS||(Ut(e.headers),"originalRequest"in e&&"headers"in e.originalRequest&&Ut(e.originalRequest.headers))}async renderToResponseWithComponentsImpl({req:e,res:t,pathname:r,renderOpts:s},{components:n,query:i}){var a,o,c;const h="/404"===r;this.stripInternalHeaders(e);const d="/500"===r,u=!0===n.isAppPath,p=!!n.getServerSideProps;let f=!!n.getStaticPaths;const g=e.headers[Pe.om.toLowerCase()],_=e.headers["content-type"],v="POST"===e.method&&(null==_?void 0:_.startsWith("multipart/form-data")),y=void 0!==g&&"string"==typeof g&&"POST"===e.method||v,w=!!(null==(a=n.Component)?void 0:a.getInitialProps);let b,x,E=!!n.getStaticProps,S=(0,Q.parse)(e.url||"").pathname||"/",P=m(e,"_nextRewroteUrl")||S,R=!1;const T=ae(n.page);if(u&&T){const t=await this.getStaticPaths({pathname:r,page:n.page,isAppPath:u,requestHeaders:e.headers});if(b=t.staticPaths,x=t.fallbackMode,R=void 0!==x,"export"===this.nextConfig.output){const e=n.page;if("static"!==x)throw new Error(`Page "${e}" is missing exported function "generateStaticParams()", which is required with "output: export" config.`);const t=ue(P);if(!(null==b?void 0:b.includes(t)))throw new Error(`Page "${e}" is missing param "${t}" in "generateStaticParams()", which is required with "output: export" config.`)}R&&(f=!0)}if(R||(null==b?void 0:b.includes(P))||e.headers["x-now-route-matches"])E=!0;else{const e=this.getPrerenderManifest();E=E||!!e.routes["/index"===r?"/":r]}let N=!!(i.__nextDataReq||e.headers["x-nextjs-data"]&&this.serverOptions.webServerConfig)&&(E||p);if(!E&&e.headers["x-middleware-prefetch"]&&!h&&"/_error"!==r)return t.setHeader("x-middleware-skip","1"),t.setHeader("cache-control","private, no-cache, no-store, max-age=0, must-revalidate"),t.body("{}").send(),null;delete i.__nextDataReq,E&&e.headers["x-matched-path"]&&e.url.startsWith("/_next/data")&&(e.url=this.stripNextDataPath(e.url)),!e.headers["x-nextjs-data"]||t.statusCode&&200!==t.statusCode||t.setHeader("x-nextjs-matched-path",`${i.__nextLocale?`/${i.__nextLocale}`:""}${r}`);const A=Boolean(e.headers[Pe.i4.toLowerCase()]);if(!u&&A&&t.setHeader("vary",Pe.Am),!h||N||A||(t.statusCode=404),C.includes(r)&&(t.statusCode=parseInt(r.slice(1),10)),!y&&!h&&!d&&"/_error"!==r&&"HEAD"!==e.method&&"GET"!==e.method&&("string"==typeof n.Component||E))return t.statusCode=405,t.setHeader("Allow",["GET","HEAD"]),await this.renderError(null,e,t,r),null;if("string"==typeof n.Component)return{type:"html",body:de.fromStatic(n.Component)};if(i.amp||delete i.amp,!0===s.supportsDynamicHTML){var O;const t=ce(e.headers["user-agent"]||""),r="function"!=typeof(null==(O=n.Document)?void 0:O.getInitialProps)||"__NEXT_BUILTIN_DOCUMENT__"in n.Document;s.supportsDynamicHTML=!E&&!t&&!i.amp&&r,s.isBot=t}!N&&u&&s.dev&&!1===s.supportsDynamicHTML&&(s.supportsDynamicHTML=!0);const M=E?null==(o=this.nextConfig.i18n)?void 0:o.defaultLocale:i.__nextDefaultLocale,q=i.__nextLocale,D=null==(c=this.nextConfig.i18n)?void 0:c.locales;let L,j=!1;if(p||E){const{tryGetPreviewData:r}=__webpack_require__("./dist/esm/server/api-utils/node.js");L=r(e,t,this.renderOpts.previewProps),j=!1!==L}if(u&&(t.setHeader("vary",Pe.Am),!j&&E&&e.headers[Pe.i4.toLowerCase()]&&((I=s.runtime)!==ne.Jp.experimentalEdge&&I!==ne.Jp.edge||this.serverOptions.webServerConfig)))for(const t of Pe.vu)delete e.headers[t.toString().toLowerCase()];var I;let H=!1,$=!1;E&&({isOnDemandRevalidate:H,revalidateOnlyGenerated:$}=(0,k.Iq)(e,this.renderOpts.previewProps)),E&&e.headers["x-matched-path"]&&(P=S),S=ue(S),P=ue(P),this.localeNormalizer&&(P=this.localeNormalizer.normalize(P));const U=e=>{const r={destination:e.pageProps.__N_REDIRECT,statusCode:e.pageProps.__N_REDIRECT_STATUS,basePath:e.pageProps.__N_REDIRECT_BASE_PATH},s=(n=r).statusCode||(n.permanent?308:307);var n;const{basePath:i}=this.nextConfig;i&&!1!==r.basePath&&r.destination.startsWith("/")&&(r.destination=`${i}${r.destination}`),r.destination.startsWith("/")&&(r.destination=(0,l.U3)(r.destination)),t.redirect(r.destination,s).body(r.destination).send()};N&&(P=this.stripNextDataPath(P),S=this.stripNextDataPath(S));let F=j||!E||s.supportsDynamicHTML||y?null:`${q?`/${q}`:""}${"/"!==r&&"/"!==P||!q?P:""}${i.amp?".amp":""}`;(h||d)&&E&&(F=`${q?`/${q}`:""}${r}${i.amp?".amp":""}`),F&&(F=F.split("/").map((e=>{try{t=decodeURIComponent(e),!0,e=t.replace(new RegExp("([/#?]|%(2f|23|3f))","gi"),(e=>encodeURIComponent(e)))}catch(e){throw new l._9("failed to decode param")}var t;return e})).join("/"),F="/index"===F&&"/"===r?"/":F);let B="https:";try{B=new URL(m(e,"__NEXT_INIT_URL")||"/","http://n").protocol}catch{}const W=globalThis.__incrementalCache||this.getIncrementalCache({requestHeaders:Object.assign({},e.headers),requestProtocol:B.substring(0,B.length-1)}),G=async()=>{var a,o,l;const c=!N&&s.dev||!(E||f);let d;const m=(0,Q.parse)(e.url||"",!0).query;s.params&&Object.keys(s.params).forEach((e=>{delete m[e]}));const g="/"!==S&&this.nextConfig.trailingSlash,_=(0,Q.format)({pathname:`${P}${g?"/":""}`,query:m}),v={...n,...s,...u?{incrementalCache:W,isRevalidate:E,originalPathname:n.ComponentMod.originalPathname,serverActionsBodySizeLimit:this.nextConfig.experimental.serverActionsBodySizeLimit}:{},isDataReq:N,resolvedUrl:_,locale:q,locales:D,defaultLocale:M,resolvedAsPath:p||w?(0,Q.format)({pathname:`${S}${g?"/":""}`,query:m}):_,supportsDynamicHTML:c,isOnDemandRevalidate:H,isDraftMode:j,isServerAction:y};let b;if((null==(a=n.routeModule)?void 0:a.definition.kind)===ze.APP_ROUTE){const r=n.routeModule,i={params:s.params,prerenderManifest:this.getPrerenderManifest(),staticGenerationContext:{originalPathname:n.ComponentMod.originalPathname,supportsDynamicHTML:c,incrementalCache:W,isRevalidate:E}};try{const s=It.fromBaseNextRequest(e,function(e){const{errored:t,destroyed:r}=e;if(t||r)return AbortSignal.abort(t);const s=new AbortController;function n(){s.abort(),e.off("finish",i)}function i(){e.off("close",n)}return e.once("close",n),e.once("finish",i),s.signal}(t.originalResponse)),n=await r.handle(s,i);e.fetchMetrics=i.staticGenerationContext.fetchMetrics;const a=i.staticGenerationContext.fetchTags;if(E){var x;const e=await n.blob();d=Ct(n.headers),a&&(d[ne.Et]=a),!d["content-type"]&&e.type&&(d["content-type"]=e.type);const t=(null==(x=i.staticGenerationContext.store)?void 0:x.revalidate)??!1;return{value:{kind:"ROUTE",status:n.status,body:Buffer.from(await e.arrayBuffer()),headers:d},revalidate:t}}return await Pt(e,t,n),null}catch(r){if(E)throw r;return z(r),await Pt(e,t,new Response(null,{status:500})),null}}else if((null==(o=n.routeModule)?void 0:o.definition.kind)===ze.PAGES){const a=n.routeModule;v.nextFontManifest=this.nextFontManifest,v.clientReferenceManifest=n.clientReferenceManifest,b=await a.render(e.originalRequest??e,t.originalResponse??t,{page:r,params:s.params,query:i,renderOpts:v})}else if((null==(l=n.routeModule)?void 0:l.definition.kind)===ze.APP_PAGE){if(e.headers[Pe.pz.toLowerCase()]&&F)try{const e=await this.getPrefetchRsc(F);if(e)return t.setHeader("cache-control","private, no-cache, no-store, max-age=0, must-revalidate"),t.setHeader("content-type",Pe.eY),t.body(e).send(),null}catch(e){}const a=n.routeModule;v.nextFontManifest=this.nextFontManifest,b=await a.render(e.originalRequest??e,t.originalResponse??t,{page:h?"/404":r,params:s.params,query:i,renderOpts:v})}else b=await this.renderHTML(e,t,r,i,v);const{metadata:C}=b,k=C.fetchTags;if(k&&(d={[ne.Et]:k}),e.fetchMetrics=C.fetchMetrics,u&&E&&0===C.revalidate){const e=C.staticBailoutInfo||{},t=new Error(`Page changed from static to dynamic at runtime ${S}${e.description?`, reason: ${e.description}`:""}\nsee more here https://nextjs.org/docs/messages/app-static-to-dynamic-error`);if(e.stack){const r=e.stack;t.stack=t.message+r.substring(r.indexOf("\n"))}throw t}return C.isNotFound?{value:null,revalidate:C.revalidate}:C.isRedirect?{value:{kind:"REDIRECT",props:C.pageData},revalidate:C.revalidate}:b.isNull?null:{value:{kind:"PAGE",html:b,pageData:C.pageData,headers:d,status:u?t.statusCode:void 0},revalidate:C.revalidate}},X=await this.responseCache.get(F,(async(a,o)=>{a||t.sent,b||({staticPaths:b,fallbackMode:x}=f?await this.getStaticPaths({pathname:r,requestHeaders:e.headers,isAppPath:u,page:n.page}):{staticPaths:void 0,fallbackMode:!1}),"static"===x&&ce(e.headers["user-agent"]||"")&&(x="blocking"),-1===(null==o?void 0:o.isStale)&&(H=!0),H&&(!1!==x||o)&&(x="blocking");let l=F??(s.dev&&u?P:null);l&&i.amp&&(l=l.replace(/\.amp$/,"")),l&&(null==b||b.includes(l));const c=await G();return c?{...c,revalidate:void 0!==c.revalidate?c.revalidate:1}:null}),{incrementalCache:W,isOnDemandRevalidate:H,isPrefetch:"prefetch"===e.headers.purpose});if(!X){if(F&&(!H||!$))throw new Error("invariant: cache entry required but not generated");return null}const{revalidate:K,value:V}=X,J=void 0!==K?{private:j||h&&V,stateful:!E,revalidate:K}:void 0;if(V){if("REDIRECT"===V.kind)return J&&(0,le.l)(t,J),N?{type:"json",body:de.fromStatic(JSON.stringify(V.props)),revalidateOptions:J}:(await U(V.props),null);if("IMAGE"===V.kind)throw new Error("invariant SSG should not return an image cache value");if("ROUTE"===V.kind){const r={...V.headers};return E||delete r[ne.Et],await Pt(e,t,new Response(V.body,{headers:Et(r),status:V.status||200})),null}if(u){var Y;if(E&&(null==(Y=V.headers)?void 0:Y[ne.Et])&&t.setHeader(ne.Et,V.headers[ne.Et]),N&&"string"!=typeof V.pageData)throw new Error("invariant: Expected pageData to be a string for app data request but received "+typeof V.pageData+". This is a bug in Next.js.");return V.status&&(t.statusCode=V.status),{type:N?"rsc":"html",body:N?de.fromStatic(V.pageData):V.html,revalidateOptions:J}}return{type:N?"json":"html",body:N?de.fromStatic(JSON.stringify(V.pageData)):V.html,revalidateOptions:J}}return J&&(0,le.l)(t,J),N?(t.statusCode=404,t.body('{"notFound":true}').send(),null):(await this.render404(e,t,{pathname:r,query:i},!1),null)}stripNextDataPath(e,t=!0){if(e.includes(this.buildId)){const t=e.substring(e.indexOf(this.buildId)+this.buildId.length);e=pe(t.replace(/\.json$/,""))}return this.localeNormalizer&&t?this.localeNormalizer.normalize(e):e}getOriginalAppPaths(e){if(this.hasAppDir){var t;return(null==(t=this.appPathRoutes)?void 0:t[e])||null}return null}async renderPageComponent(e,t){var r;const{query:s,pathname:n}=e,i=this.getOriginalAppPaths(n),a=Array.isArray(i);let o=n;a&&(o=i[i.length-1]);const l=await this.findPageComponents({page:o,query:s,params:e.renderOpts.params||{},isAppPath:a,sriEnabled:!!(null==(r=this.nextConfig.experimental.sri)?void 0:r.algorithm),appPaths:i,shouldEnsure:!1});if(l)try{return await this.renderToResponseWithComponents(e,l)}catch(e){const r=e instanceof Ft;if(!r||r&&t)throw e}return!1}async renderToResponse(e){return(0,wt.getTracer)().trace(bt._J.renderToResponse,{spanName:"rendering page",attributes:{"next.route":e.pathname}},(async()=>this.renderToResponseImpl(e)))}async renderToResponseImpl(e){var t;const{res:r,query:s,pathname:n}=e;let i=n;const a=!!s._nextBubbleNoFallback;delete s[Pe.H4],delete s._nextBubbleNoFallback;const o={i18n:null==(t=this.i18nProvider)?void 0:t.fromQuery(n,s)};try{for await(const t of this.matchers.matchAll(n,o)){e.req.headers["x-invoke-output"];const r=await this.renderPageComponent({...e,pathname:t.definition.pathname,renderOpts:{...e.renderOpts,params:t.params}},a);if(!1!==r)return r}if(this.serverOptions.webServerConfig){e.pathname=this.serverOptions.webServerConfig.page;const t=await this.renderPageComponent(e,a);if(!1!==t)return t}}catch(t){const s=(0,qe.S)(t);if(t instanceof l.At)throw console.error("Invariant: failed to load static page",JSON.stringify({page:i,url:e.req.url,matchedPath:e.req.headers["x-matched-path"],initUrl:m(e.req,"__NEXT_INIT_URL"),didRewrite:m(e.req,"_nextDidRewrite"),rewroteUrl:m(e.req,"_nextRewroteUrl")},null,2)),s;if(s instanceof Ft&&a)throw s;if(s instanceof l._9||s instanceof l.KM)return r.statusCode=400,await this.renderErrorToResponse(e,s);r.statusCode=500,await this.hasPage("/500")&&(e.query.__nextCustomErrorRender="1",await this.renderErrorToResponse(e,s),delete e.query.__nextCustomErrorRender);const n=s instanceof Bt;if(!n)throw(0,qe.Z)(s)&&(s.page=i),s;return await this.renderErrorToResponse(e,n?s.innerError:s)}return!this.getMiddleware()||!e.req.headers["x-nextjs-data"]||r.statusCode&&200!==r.statusCode&&404!==r.statusCode?(r.statusCode=404,this.renderErrorToResponse(e,null)):(r.setHeader("x-nextjs-matched-path",`${s.__nextLocale?`/${s.__nextLocale}`:""}${n}`),r.statusCode=200,r.setHeader("content-type","application/json"),r.body("{}"),r.send(),null)}async renderToHTML(e,t,r,s={}){return(0,wt.getTracer)().trace(bt._J.renderToHTML,(async()=>this.renderToHTMLImpl(e,t,r,s)))}async renderToHTMLImpl(e,t,r,s={}){return this.getStaticHTML((e=>this.renderToResponse(e)),{req:e,res:t,pathname:r,query:s})}async renderError(e,t,r,s,n={},i=!0){return(0,wt.getTracer)().trace(bt._J.renderError,(async()=>this.renderErrorImpl(e,t,r,s,n,i)))}async renderErrorImpl(e,t,r,s,n={},i=!0){return i&&r.setHeader("Cache-Control","no-cache, no-store, max-age=0, must-revalidate"),this.pipe((async t=>{const s=await this.renderErrorToResponse(t,e);if(500===r.statusCode)throw e;return s}),{req:t,res:r,pathname:s,query:n})}async renderErrorToResponse(e,t){return(0,wt.getTracer)().trace(bt._J.renderErrorToResponse,(async()=>this.renderErrorToResponseImpl(e,t)))}async renderErrorToResponseImpl(e,t){const{res:r,query:s}=e;try{let n=null;const i=404===r.statusCode;let a=!1;i&&(this.hasAppDir&&(n=await this.findPageComponents({page:"/_not-found",query:s,params:{},isAppPath:!0,shouldEnsure:!0}),a=null!==n),!n&&await this.hasPage("/404")&&(n=await this.findPageComponents({page:"/404",query:s,params:{},isAppPath:!1,shouldEnsure:!0}),a=null!==n));let o=`/${r.statusCode}`;if(e.query.__nextCustomErrorRender||n||!C.includes(o)||(n=await this.findPageComponents({page:o,query:s,params:{},isAppPath:!1,shouldEnsure:!0})),n||(n=await this.findPageComponents({page:"/_error",query:s,params:{},isAppPath:!1,shouldEnsure:!0}),o="/_error"),!n)throw new Bt(new Error("missing required error components"));n.components.routeModule?_(e.req,"_nextMatch",{definition:n.components.routeModule.definition,params:void 0}):function(e,t){const r=m(e);delete r._nextMatch,g(e,r)}(e.req);try{return await this.renderToResponseWithComponents({...e,pathname:o,renderOpts:{...e.renderOpts,err:t}},n)}catch(e){if(e instanceof Ft)throw new Error("invariant: failed to render error page");throw e}}catch(t){const n=(0,qe.S)(t),i=n instanceof Bt;i||this.logError(n),r.statusCode=500;const a=await this.getFallbackErrorComponents();return a?(_(e.req,"_nextMatch",{definition:a.routeModule.definition,params:void 0}),this.renderToResponseWithComponents({...e,pathname:"/_error",renderOpts:{...e.renderOpts,err:i?n.innerError:n}},{query:s,components:a})):{type:"html",body:de.fromStatic("Internal Server Error")}}}async renderErrorToHTML(e,t,r,s,n={}){return this.getStaticHTML((t=>this.renderErrorToResponse(t,e)),{req:t,res:r,pathname:s,query:n})}async render404(e,t,r,s=!0){const{pathname:n,query:i}=r||(0,Q.parse)(e.url,!0);return this.nextConfig.i18n&&(i.__nextLocale||=this.nextConfig.i18n.defaultLocale,i.__nextDefaultLocale||=this.nextConfig.i18n.defaultLocale),t.statusCode=404,this.renderError(null,e,t,n,i,s)}}var zt=__webpack_require__("./dist/compiled/lru-cache/index.js"),Gt=__webpack_require__.n(zt);const Xt=new Map;function Kt(e,t=!0){const r=t&&Xt.get(e);if(r)return r;const s=JSON.parse((0,h.readFileSync)(e,"utf8"));return t&&Xt.set(e,s),s}const Vt=!1,Jt=Vt?null:new(Gt())({max:1e3});function Yt(e,t,r,s){const n=`${e}:${t}:${r}:${s}`;let i=null==Jt?void 0:Jt.get(n);if(i)return i;const a=p().join(t,b);let o;s&&(o=Kt(p().join(a,w),!Vt));const c=Kt(p().join(a,y),!Vt);try{e=pe(Ve(e))}catch(t){throw console.error(t),new l.GP(e)}const h=t=>{let s=t[e];if(!t[s]&&r){const n={};for(const e of Object.keys(t))n[fe(e,r).pathname]=c[e];s=n[e]}return s};return o&&(i=h(o)),i||(i=h(c)),i?(i=p().join(a,i),null==Jt||Jt.set(n,i),i):(null==Jt||Jt.set(n,null),null)}function Zt(e,t,r,s){const n=Yt(e,t,r,s);if(!n)throw new l.GP(e);return n}function Qt(e,t,r){const s=Zt(e,t,void 0,r);if(s.endsWith(".html"))return h.promises.readFile(s,"utf8").catch((t=>{throw new l.At(e,t.message)}));try{return process.env.__NEXT_PRIVATE_RUNTIME_TYPE=r?"app":"pages",require(s)}finally{process.env.__NEXT_PRIVATE_RUNTIME_TYPE=""}}var er=__webpack_require__("./dist/esm/lib/interop-default.js");async function tr(e){return new Promise((t=>setTimeout(t,e)))}async function rr(e,t=3){for(;;)try{return Kt(e)}catch(e){if(--t<=0)throw e;await tr(100)}}async function sr(e,t){require(e);try{return globalThis.__RSC_MANIFEST[t]}catch(e){return}}const nr=(0,wt.getTracer)().wrap(bt.qj.loadComponents,(async function({distDir:e,page:t,isAppPath:r}){let s={},n={};r||([s,n]=await Promise.all([Promise.resolve().then((()=>Qt("/_document",e,!1))),Promise.resolve().then((()=>Qt("/_app",e,!1)))]));const i=await Promise.resolve().then((()=>Qt(t,e,r))),a=r&&(t.endsWith("/page")||"/not-found"===t||"/_not-found"===t),[o,l,c,h]=await Promise.all([rr((0,u.join)(e,"build-manifest.json")),rr((0,u.join)(e,"react-loadable-manifest.json")),a?sr((0,u.join)(e,"server","app",t.replace(/%5F/g,"_")+"_client-reference-manifest.js"),t.replace(/%5F/g,"_")):void 0,r?rr((0,u.join)(e,"server","server-reference-manifest.json")).catch((()=>null)):null]),d=(0,er.X)(i),p=(0,er.X)(s),f=(0,er.X)(n),{getServerSideProps:m,getStaticProps:g,getStaticPaths:_,routeModule:v}=i;return{App:f,Document:p,Component:d,buildManifest:o,reactLoadableManifest:l,pageConfig:i.config||{},ComponentMod:i,getServerSideProps:m,getStaticProps:g,getStaticPaths:_,clientReferenceManifest:c,serverActionsManifest:h,isAppPath:r,page:t,routeModule:v}}));var ir=__webpack_require__("../next-env/dist/index.js"),ar=__webpack_require__("stream"),or=__webpack_require__.n(ar);class lr{constructor(e){this.pendingResponses=new Map,this.minimalMode=e}get(e,t,r){var s;const{incrementalCache:n}=r,i=e?`${e}-${r.isOnDemandRevalidate?"1":"0"}`:null,a=i?this.pendingResponses.get(i):null;if(a)return a;let o=()=>{},l=()=>{};const c=new Promise(((e,t)=>{o=e,l=t}));i&&this.pendingResponses.set(i,c);let h=!1;const d=e=>{i&&this.pendingResponses.set(i,Promise.resolve(e)),h||(h=!0,o(e))};return i&&(null==(s=this.previousCacheItem)?void 0:s.key)===i&&this.previousCacheItem.expiresAt>Date.now()?(d(this.previousCacheItem.entry),this.pendingResponses.delete(i),c):((async()=>{let s=null;try{if(s=null,s&&!r.isOnDemandRevalidate){var a,o;if("FETCH"===(null==(a=s.value)?void 0:a.kind))throw new Error("invariant: unexpected cachedResponse of kind fetch in response cache");if(d({isStale:s.isStale,revalidate:s.curRevalidate,value:"PAGE"===(null==(o=s.value)?void 0:o.kind)?{kind:"PAGE",html:de.fromStatic(s.value.html),pageData:s.value.pageData,headers:s.value.headers,status:s.value.status}:s.value}),!s.isStale||r.isPrefetch)return}const n=await t(h,s),l=null===n?null:{...n,isMiss:!s};r.isOnDemandRevalidate||d(l),e&&n&&void 0!==n.revalidate?this.previousCacheItem={key:i||e,entry:n,expiresAt:Date.now()+1e3}:this.previousCacheItem=void 0,r.isOnDemandRevalidate&&d(l)}catch(t){s&&e&&await n.set(e,s.value,{revalidate:Math.min(Math.max(s.revalidate||3,3),30)}),h?console.error(t):l(t)}finally{i&&this.pendingResponses.delete(i)}})(),c)}}let cr,hr=0;const dr="x-vercel-cache-tags",ur="x-vercel-sc-headers",pr="x-vercel-revalidate",fr="x-vercel-cache-item-name";class mr{static isAvailable(e){return!(!e._requestHeaders["x-vercel-sc-host"]&&!process.env.SUSPENSE_CACHE_URL)}constructor(e){if(this.debug=!!process.env.NEXT_PRIVATE_DEBUG_CACHE,this.headers={},this.headers["Content-Type"]="application/json",ur in e._requestHeaders){const t=JSON.parse(e._requestHeaders[ur]);for(const e in t)this.headers[e]=t[e];delete e._requestHeaders[ur]}const t=e._requestHeaders["x-vercel-sc-host"]||process.env.SUSPENSE_CACHE_URL,r=e._requestHeaders["x-vercel-sc-basepath"]||process.env.SUSPENSE_CACHE_BASEPATH;process.env.SUSPENSE_CACHE_AUTH_TOKEN&&(this.headers.Authorization=`Bearer ${process.env.SUSPENSE_CACHE_AUTH_TOKEN}`),t?(this.cacheEndpoint=`https://${t}${r||""}`,this.debug&&console.log("using cache endpoint",this.cacheEndpoint)):this.debug&&console.log("no cache endpoint available"),e.maxMemoryCacheSize?cr||(this.debug&&console.log("using memory store for fetch cache"),cr=new(Gt())({max:e.maxMemoryCacheSize,length({value:e}){var t;if(!e)return 25;if("REDIRECT"===e.kind)return JSON.stringify(e.props).length;if("IMAGE"===e.kind)throw new Error("invariant image should not be incremental-cache");return"FETCH"===e.kind?JSON.stringify(e.data||"").length:"ROUTE"===e.kind?e.body.length:e.html.length+((null==(t=JSON.stringify(e.pageData))?void 0:t.length)||0)}})):this.debug&&console.log("not using memory store for fetch cache")}async revalidateTag(e){if(this.debug&&console.log("revalidateTag",e),Date.now()<hr)this.debug&&console.log("rate limited ",hr);else try{const t=await fetch(`${this.cacheEndpoint}/v1/suspense-cache/revalidate?tags=${e}`,{method:"POST",headers:this.headers,next:{internal:!0}});if(429===t.status){const e=t.headers.get("retry-after")||"60000";hr=Date.now()+parseInt(e)}if(!t.ok)throw new Error(`Request failed with status ${t.status}.`)}catch(t){console.warn(`Failed to revalidate tag ${e}`,t)}}async get(e,t){const{tags:r,softTags:s,fetchCache:n,fetchIdx:i,fetchUrl:a}=t;if(!n)return null;if(Date.now()<hr)return this.debug&&console.log("rate limited"),null;let o=null==cr?void 0:cr.get(e);if(Date.now()-((null==o?void 0:o.lastModified)||0)>2e3&&(o=void 0),!o&&this.cacheEndpoint)try{const t=Date.now(),n={internal:!0,fetchType:"cache-get",fetchUrl:a,fetchIdx:i},l=await fetch(`${this.cacheEndpoint}/v1/suspense-cache/${e}`,{method:"GET",headers:{...this.headers,[fr]:a,[dr]:(null==r?void 0:r.join(","))||"",[ne.Ar]:(null==s?void 0:s.join(","))||""},next:n});if(429===l.status){const e=l.headers.get("retry-after")||"60000";hr=Date.now()+parseInt(e)}if(404===l.status)return this.debug&&console.log(`no fetch cache entry for ${e}, duration: ${Date.now()-t}ms`),null;if(!l.ok)throw console.error(await l.text()),new Error(`invalid response from cache ${l.status}`);const c=await l.json();if(!c||"FETCH"!==c.kind)throw this.debug&&console.log({cached:c}),new Error("invalid cache value");const h=l.headers.get("x-vercel-cache-state"),d=l.headers.get("age");o={value:c,lastModified:"fresh"!==h?Date.now()-ne.BR:Date.now()-1e3*parseInt(d||"0",10)},this.debug&&console.log(`got fetch cache entry for ${e}, duration: ${Date.now()-t}ms, size: ${Object.keys(c).length}, cache-state: ${h} tags: ${null==r?void 0:r.join(",")} softTags: ${null==s?void 0:s.join(",")}`),o&&(null==cr||cr.set(e,o))}catch(e){this.debug&&console.error("Failed to get from fetch-cache",e)}return o||null}async set(e,t,{fetchCache:r,fetchIdx:s,fetchUrl:n,tags:i}){if(r)if(Date.now()<hr)this.debug&&console.log("rate limited");else if(null==cr||cr.set(e,{value:t,lastModified:Date.now()}),this.cacheEndpoint)try{const r=Date.now();null!==t&&"revalidate"in t&&(this.headers[pr]=t.revalidate.toString()),!this.headers[pr]&&null!==t&&"data"in t&&(this.headers["x-vercel-cache-control"]=t.data.headers["cache-control"]);const a=JSON.stringify({...t,tags:void 0});this.debug&&console.log("set cache",e);const o={internal:!0,fetchType:"cache-set",fetchUrl:n,fetchIdx:s},l=await fetch(`${this.cacheEndpoint}/v1/suspense-cache/${e}`,{method:"POST",headers:{...this.headers,[fr]:n||"",[dr]:(null==i?void 0:i.join(","))||""},body:a,next:o});if(429===l.status){const e=l.headers.get("retry-after")||"60000";hr=Date.now()+parseInt(e)}if(!l.ok)throw this.debug&&console.log(await l.text()),new Error(`invalid response ${l.status}`);this.debug&&console.log(`successfully set to fetch-cache for ${e}, duration: ${Date.now()-r}ms, size: ${a.length}`)}catch(e){this.debug&&console.error("Failed to update fetch cache",e)}}}let gr,_r;class vr{constructor(e){this.fs=e.fs,this.flushToDisk=e.flushToDisk,this.serverDistDir=e.serverDistDir,this.appDir=!!e._appDir,this.revalidatedTags=e.revalidatedTags,e.maxMemoryCacheSize&&!gr&&(gr=new(Gt())({max:e.maxMemoryCacheSize,length({value:e}){var t;if(!e)return 25;if("REDIRECT"===e.kind)return JSON.stringify(e.props).length;if("IMAGE"===e.kind)throw new Error("invariant image should not be incremental-cache");return"FETCH"===e.kind?JSON.stringify(e.data||"").length:"ROUTE"===e.kind?e.body.length:e.html.length+((null==(t=JSON.stringify(e.pageData))?void 0:t.length)||0)}})),this.serverDistDir&&this.fs&&(this.tagsManifestPath=Xe().join(this.serverDistDir,"..","cache","fetch-cache","tags-manifest.json"),this.loadTagsManifest())}loadTagsManifest(){if(this.tagsManifestPath&&this.fs&&!_r)try{_r=JSON.parse(this.fs.readFileSync(this.tagsManifestPath).toString("utf8"))}catch(e){_r={version:1,items:{}}}}async revalidateTag(e){if(this.loadTagsManifest(),!_r||!this.tagsManifestPath)return;const t=_r.items[e]||{};t.revalidatedAt=Date.now(),_r.items[e]=t;try{await this.fs.mkdir(Xe().dirname(this.tagsManifestPath)),await this.fs.writeFile(this.tagsManifestPath,JSON.stringify(_r||{}))}catch(e){console.warn("Failed to update tags manifest.",e)}}async get(e,{tags:t,softTags:r,fetchCache:s}={}){var n,i;let a=null==gr?void 0:gr.get(e);if(!a){try{const{filePath:t}=await this.getFsPath({pathname:`${e}.body`,appDir:!0}),r=await this.fs.readFile(t),{mtime:s}=await this.fs.stat(t),n=JSON.parse((await this.fs.readFile(t.replace(/\.body$/,".meta"))).toString("utf8"));return{lastModified:s.getTime(),value:{kind:"ROUTE",body:r,headers:n.headers,status:n.status}}}catch(e){}try{const{filePath:r,isAppPath:n}=await this.getFsPath({pathname:s?e:`${e}.html`,fetchCache:s}),i=(await this.fs.readFile(r)).toString("utf-8"),{mtime:h}=await this.fs.stat(r);if(s){var o;const r=h.getTime(),s=JSON.parse(i);if(a={lastModified:r,value:s},"FETCH"===(null==(o=a.value)?void 0:o.kind)){var l,c;const r=null==(c=a.value)||null==(l=c.data)?void 0:l.tags;(null==t?void 0:t.every((e=>null==r?void 0:r.includes(e))))||await this.set(e,a.value,{tags:t})}}else{const t=n?(await this.fs.readFile((await this.getFsPath({pathname:`${e}.rsc`,appDir:!0})).filePath)).toString("utf8"):JSON.parse((await this.fs.readFile((await this.getFsPath({pathname:`${e}.json`,appDir:!1})).filePath)).toString("utf8"));let s={};if(n)try{s=JSON.parse((await this.fs.readFile(r.replace(/\.html$/,".meta"))).toString("utf-8"))}catch{}a={lastModified:h.getTime(),value:{kind:"PAGE",html:i,pageData:t,headers:s.headers,status:s.status}}}a&&(null==gr||gr.set(e,a))}catch(e){}}if("PAGE"===(null==a||null==(n=a.value)?void 0:n.kind)){var h;let e;const t=null==(h=a.value.headers)?void 0:h[ne.Et];"string"==typeof t&&(e=t.split(",")),(null==e?void 0:e.length)&&(this.loadTagsManifest(),e.some((e=>{var t;return(null==_r||null==(t=_r.items[e])?void 0:t.revalidatedAt)&&(null==_r?void 0:_r.items[e].revalidatedAt)>=((null==a?void 0:a.lastModified)||Date.now())}))&&(a=void 0))}return a&&"FETCH"===(null==a||null==(i=a.value)?void 0:i.kind)&&(this.loadTagsManifest(),[...t||[],...r||[]].some((e=>{var t;return!!this.revalidatedTags.includes(e)||(null==_r||null==(t=_r.items[e])?void 0:t.revalidatedAt)&&(null==_r?void 0:_r.items[e].revalidatedAt)>=((null==a?void 0:a.lastModified)||Date.now())}))&&(a=void 0)),a||null}async set(e,t,r){if(null==gr||gr.set(e,{value:t,lastModified:Date.now()}),this.flushToDisk){if("ROUTE"===(null==t?void 0:t.kind)){const{filePath:r}=await this.getFsPath({pathname:`${e}.body`,appDir:!0});return await this.fs.mkdir(Xe().dirname(r)),await this.fs.writeFile(r,t.body),void await this.fs.writeFile(r.replace(/\.body$/,".meta"),JSON.stringify({headers:t.headers,status:t.status}))}if("PAGE"===(null==t?void 0:t.kind)){const r="string"==typeof t.pageData,{filePath:s}=await this.getFsPath({pathname:`${e}.html`,appDir:r});await this.fs.mkdir(Xe().dirname(s)),await this.fs.writeFile(s,t.html),await this.fs.writeFile((await this.getFsPath({pathname:`${e}.${r?"rsc":"json"}`,appDir:r})).filePath,r?t.pageData:JSON.stringify(t.pageData)),(t.headers||t.status)&&await this.fs.writeFile(s.replace(/\.html$/,".meta"),JSON.stringify({headers:t.headers,status:t.status}))}else if("FETCH"===(null==t?void 0:t.kind)){const{filePath:s}=await this.getFsPath({pathname:e,fetchCache:!0});await this.fs.mkdir(Xe().dirname(s)),await this.fs.writeFile(s,JSON.stringify({...t,tags:r.tags}))}}}async getFsPath({pathname:e,appDir:t,fetchCache:r}){if(r)return{filePath:Xe().join(this.serverDistDir,"..","cache","fetch-cache",e),isAppPath:!1};let s=Xe().join(this.serverDistDir,"pages",e);if(!this.appDir||!1===t)return{filePath:s,isAppPath:!1};try{return await this.fs.readFile(s),{filePath:s,isAppPath:!1}}catch(t){return{filePath:Xe().join(this.serverDistDir,"app",e),isAppPath:!0}}}}const yr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",wr="undefined"==typeof Uint8Array?[]:new Uint8Array(256);for(let e=0;e<64;e++)wr[yr.charCodeAt(e)]=e;const br=e=>{let t,r=new Uint8Array(e),s=r.length,n="";for(t=0;t<s;t+=3)n+=yr[r[t]>>2],n+=yr[(3&r[t])<<4|r[t+1]>>4],n+=yr[(15&r[t+1])<<2|r[t+2]>>6],n+=yr[63&r[t+2]];return s%3==2?n=n.substring(0,n.length-1)+"=":s%3==1&&(n=n.substring(0,n.length-2)+"=="),n};function xr(e){return e.replace(/\/$/,"").replace(/\/index$/,"")||"/"}class Er{constructor({fs:e,dev:t,appDir:r,flushToDisk:s,fetchCache:n,minimalMode:i,serverDistDir:a,requestHeaders:o,requestProtocol:l,maxMemoryCacheSize:c,getPrerenderManifest:h,fetchCacheKeyPrefix:d,CurCacheHandler:u,allowedRevalidateHeaderKeys:p}){var f,m,g,_;this.locks=new Map,this.unlocks=new Map;const v=!!process.env.NEXT_PRIVATE_DEBUG_CACHE;u?v&&console.log("using custom cache handler",u.name):(e&&a&&(v&&console.log("using filesystem cache handler"),u=vr),mr.isAvailable({_requestHeaders:o})&&i&&n&&(v&&console.log("using fetch cache handler"),u=mr)),process.env.__NEXT_TEST_MAX_ISR_CACHE&&(c=parseInt(process.env.__NEXT_TEST_MAX_ISR_CACHE,10)),this.dev=t,this.minimalMode=i,this.requestHeaders=o,this.requestProtocol=l,this.allowedRevalidateHeaderKeys=p,this.prerenderManifest=h(),this.fetchCacheKeyPrefix=d;let y=[];o[ne.y3]===(null==(m=this.prerenderManifest)||null==(f=m.preview)?void 0:f.previewModeId)&&(this.isOnDemandRevalidate=!0),i&&"string"==typeof o[ne.of]&&o[ne.X_]===(null==(_=this.prerenderManifest)||null==(g=_.preview)?void 0:g.previewModeId)&&(y=o[ne.of].split(",")),u&&(this.cacheHandler=new u({dev:t,fs:e,flushToDisk:s,serverDistDir:a,revalidatedTags:y,maxMemoryCacheSize:c,_appDir:!!r,_requestHeaders:o,fetchCacheKeyPrefix:d}))}calculateRevalidate(e,t,r){if(r)return(new Date).getTime()-1e3;const{initialRevalidateSeconds:s}=this.prerenderManifest.routes[xr(e)]||{initialRevalidateSeconds:1};return"number"==typeof s?1e3*s+t:s}_getPathname(e,t){return t?e:Ve(e)}async unlock(e){const t=this.unlocks.get(e);t&&(t(),this.locks.delete(e),this.unlocks.delete(e))}async lock(e){if(process.env.__NEXT_INCREMENTAL_CACHE_IPC_PORT&&process.env.__NEXT_INCREMENTAL_CACHE_IPC_KEY){const t=__webpack_require__("./dist/esm/server/lib/server-ipc/request-utils.js").p;return await t({method:"lock",ipcPort:process.env.__NEXT_INCREMENTAL_CACHE_IPC_PORT,ipcKey:process.env.__NEXT_INCREMENTAL_CACHE_IPC_KEY,args:[e]}),async()=>{await t({method:"unlock",ipcPort:process.env.__NEXT_INCREMENTAL_CACHE_IPC_PORT,ipcKey:process.env.__NEXT_INCREMENTAL_CACHE_IPC_KEY,args:[e]})}}let t=()=>Promise.resolve();const r=this.locks.get(e);if(r)await r;else{const r=new Promise((e=>{t=async()=>{e()}}));this.locks.set(e,r),this.unlocks.set(e,t)}return t}async revalidateTag(e){var t,r;return process.env.__NEXT_INCREMENTAL_CACHE_IPC_PORT&&process.env.__NEXT_INCREMENTAL_CACHE_IPC_KEY?(0,__webpack_require__("./dist/esm/server/lib/server-ipc/request-utils.js").p)({method:"revalidateTag",ipcPort:process.env.__NEXT_INCREMENTAL_CACHE_IPC_PORT,ipcKey:process.env.__NEXT_INCREMENTAL_CACHE_IPC_KEY,args:[...arguments]}):null==(r=this.cacheHandler)||null==(t=r.revalidateTag)?void 0:t.call(r,e)}async fetchCacheKey(e,t={}){let r;const s=[];if(t.body)if("function"==typeof t.body.getReader){const i=t.body.getReader();let a=new Uint8Array;function o({done:e,value:t}){if(!e){if(t)try{s.push("string"==typeof t?t:br(t));const e="string"==typeof t?(r=t,(new TextEncoder).encode(r)):new Uint8Array(t),n=a;a=new Uint8Array(n.byteLength+e.byteLength),a.set(n),a.set(e,n.byteLength)}catch(e){console.error(e)}var r;i.read().then(o)}}await i.read().then(o),t._ogBody=a}else if("function"==typeof t.body.keys){const l=t.body;t._ogBody=t.body;for(const c of new Set([...l.keys()])){const h=l.getAll(c);s.push(`${c}=${(await Promise.all(h.map((async e=>"string"==typeof e?e:await e.text())))).join(",")}`)}}else if("function"==typeof t.body.arrayBuffer){const d=t.body,u=await d.arrayBuffer();s.push(br(await t.body.arrayBuffer())),t._ogBody=new Blob([u],{type:d.type})}else"string"==typeof t.body&&(s.push(t.body),t._ogBody=t.body);const n=JSON.stringify(["v3",this.fetchCacheKeyPrefix||"",e,t.method,"function"==typeof(t.headers||{}).keys?Object.fromEntries(t.headers):t.headers,t.mode,t.redirect,t.credentials,t.referrer,t.referrerPolicy,t.integrity,t.cache,s]);return r=__webpack_require__("crypto").createHash("sha256").update(n).digest("hex"),r}async get(e,t={}){var r,s,n;if(process.env.__NEXT_INCREMENTAL_CACHE_IPC_PORT&&process.env.__NEXT_INCREMENTAL_CACHE_IPC_KEY)return(0,__webpack_require__("./dist/esm/server/lib/server-ipc/request-utils.js").p)({method:"get",ipcPort:process.env.__NEXT_INCREMENTAL_CACHE_IPC_PORT,ipcKey:process.env.__NEXT_INCREMENTAL_CACHE_IPC_KEY,args:[...arguments]});if(this.dev&&(!t.fetchCache||"no-cache"===this.requestHeaders["cache-control"]))return null;e=this._getPathname(e,t.fetchCache);let i=null,a=t.revalidate;const o=await(null==(r=this.cacheHandler)?void 0:r.get(e,t));if("FETCH"===(null==o||null==(s=o.value)?void 0:s.kind))return[...t.tags||[],...t.softTags||[]].some((e=>{var t;return null==(t=this.revalidatedTags)?void 0:t.includes(e)}))?null:(a=a||o.value.revalidate,{isStale:Math.round((Date.now()-(o.lastModified||0))/1e3)>a,value:{kind:"FETCH",data:o.value.data,revalidate:a},revalidateAfter:Date.now()+1e3*a});const l=null==(n=this.prerenderManifest.routes[xr(e)])?void 0:n.initialRevalidateSeconds;let c,h;return-1===(null==o?void 0:o.lastModified)?(c=-1,h=-1*ne.BR):(h=this.calculateRevalidate(e,(null==o?void 0:o.lastModified)||Date.now(),this.dev&&!t.fetchCache),c=!1!==h&&h<Date.now()||void 0),o&&(i={isStale:c,curRevalidate:l,revalidateAfter:h,value:o.value}),!o&&this.prerenderManifest.notFoundRoutes.includes(e)&&(i={isStale:c,value:null,curRevalidate:l,revalidateAfter:h},this.set(e,i.value,t)),i}async set(e,t,r){if(process.env.__NEXT_INCREMENTAL_CACHE_IPC_PORT&&process.env.__NEXT_INCREMENTAL_CACHE_IPC_KEY)return(0,__webpack_require__("./dist/esm/server/lib/server-ipc/request-utils.js").p)({method:"set",ipcPort:process.env.__NEXT_INCREMENTAL_CACHE_IPC_PORT,ipcKey:process.env.__NEXT_INCREMENTAL_CACHE_IPC_KEY,args:[...arguments]});if(!this.dev||r.fetchCache)if(r.fetchCache&&JSON.stringify(t).length>2097152){if(this.dev)throw new Error("fetch for over 2MB of data can not be cached")}else{e=this._getPathname(e,r.fetchCache);try{var s;void 0===r.revalidate||r.fetchCache||(this.prerenderManifest.routes[e]={dataRoute:Xe().posix.join("/_next/data",`${Ve(e)}.json`),srcRoute:null,initialRevalidateSeconds:r.revalidate}),await(null==(s=this.cacheHandler)?void 0:s.set(e,t,r))}catch(t){console.warn("Failed to update prerender cache for",e,t)}}}}var Sr=__webpack_require__("http"),Cr=__webpack_require__("https");const Pr={readFile:e=>d().promises.readFile(e),readFileSync:e=>d().readFileSync(e),writeFile:(e,t)=>d().promises.writeFile(e,t),mkdir:e=>d().promises.mkdir(e,{recursive:!0}),stat:e=>d().promises.stat(e)};__webpack_require__("./dist/esm/server/lib/server-ipc/invoke-request.js"),__webpack_require__("./dist/esm/server/lib/server-ipc/utils.js");class kr extends or().Readable{constructor({url:e,headers:t,method:r,socket:s=null,readable:n}){super(),this.httpVersion="1.0",this.httpVersionMajor=1,this.httpVersionMinor=0,this.socket=new Proxy({},{get:(e,t)=>{if("encrypted"!==t)throw new Error("Method not implemented");return!1}}),this.url=e,this.headers=t,this.method=r,n&&(this.bodyReadable=n,this.bodyReadable.on("end",(()=>this.emit("end"))),this.bodyReadable.on("close",(()=>this.emit("close")))),s&&(this.socket=s)}get headersDistinct(){const e={};for(const[t,r]of Object.entries(this.headers))r&&(e[t]=Array.isArray(r)?r:[r]);return e}_read(e){if(this.bodyReadable)return this.bodyReadable._read(e);this.emit("end"),this.emit("close")}get connection(){return this.socket}get aborted(){throw new Error("Method not implemented")}get complete(){throw new Error("Method not implemented")}get trailers(){throw new Error("Method not implemented")}get trailersDistinct(){throw new Error("Method not implemented")}get rawTrailers(){throw new Error("Method not implemented")}get rawHeaders(){throw new Error("Method not implemented.")}setTimeout(){throw new Error("Method not implemented.")}}class Rr extends or().Writable{constructor(e={}){super(),this.statusMessage="",this.finished=!1,this.headersSent=!1,this.buffers=[],this.statusCode=e.statusCode??200,this.socket=e.socket??null,this.headers=e.headers?Et(e.headers):new Headers,this.headPromise=new Promise((e=>{this.headPromiseResolve=e})),this.hasStreamed=new Promise(((e,t)=>{this.on("finish",(()=>e(!0))),this.on("end",(()=>e(!0))),this.on("error",(e=>t(e)))})).then((e=>{var t;return null==(t=this.headPromiseResolve)||t.call(this),e})),e.resWriter&&(this.resWriter=e.resWriter)}appendHeader(e,t){const r=Array.isArray(t)?t:[t];for(const t of r)this.headers.append(e,t);return this}get isSent(){return this.finished||this.headersSent}get connection(){return this.socket}write(e){return this.resWriter?this.resWriter(e):(this.buffers.push(Buffer.isBuffer(e)?e:Buffer.from(e)),!0)}end(){return this.finished=!0,super.end(...arguments)}_implicitHeader(){}_write(e,t,r){this.write(e),r()}writeHead(e,t,r){var s;if(r||"string"==typeof t?"string"==typeof t&&t.length>0&&(this.statusMessage=t):r=t,r)if(Array.isArray(r))for(let e=0;e<r.length;e+=2)this.setHeader(r[e],r[e+1]);else for(const[e,t]of Object.entries(r))void 0!==t&&this.setHeader(e,t);return this.statusCode=e,this.headersSent=!0,null==(s=this.headPromiseResolve)||s.call(this),this}hasHeader(e){return this.headers.has(e)}getHeader(e){return this.headers.get(e)??void 0}getHeaders(){return Ct(this.headers)}getHeaderNames(){return Array.from(this.headers.keys())}setHeader(e,t){if(Array.isArray(t)){this.headers.delete(e);for(const r of t)this.headers.append(e,r)}else"number"==typeof t?this.headers.set(e,t.toString()):this.headers.set(e,t);return this}removeHeader(e){this.headers.delete(e)}get strictContentLength(){throw new Error("Method not implemented.")}writeEarlyHints(){throw new Error("Method not implemented.")}get req(){throw new Error("Method not implemented.")}assignSocket(){throw new Error("Method not implemented.")}detachSocket(){throw new Error("Method not implemented.")}writeContinue(){throw new Error("Method not implemented.")}writeProcessing(){throw new Error("Method not implemented.")}get upgrading(){throw new Error("Method not implemented.")}get chunkedEncoding(){throw new Error("Method not implemented.")}get shouldKeepAlive(){throw new Error("Method not implemented.")}get useChunkedEncodingByDefault(){throw new Error("Method not implemented.")}get sendDate(){throw new Error("Method not implemented.")}setTimeout(){throw new Error("Method not implemented.")}addTrailers(){throw new Error("Method not implemented.")}flushHeaders(){throw new Error("Method not implemented.")}}class Tr{async load(e){return await require(e)}}class Nr{static async load(e,t=new Tr){const r=await t.load(e);if("routeModule"in r)return r.routeModule;throw new Error(`Module "${e}" does not export a routeModule.`)}}const Ar=new WeakMap;function Or(e){const t=Ar.get(e);if(t)return t;if(!Array.isArray(e.matchers))throw new Error(`Invariant: invalid matchers for middleware ${JSON.stringify(e)}`);const r=(s=e.matchers,(e,t,r)=>{for(const n of s)if(new RegExp(n.regexp).exec(e)){if((n.has||n.missing)&&!Re(t,r,n.has,n.missing))continue;return!0}return!1});var s;return Ar.set(e,r),r}class Mr extends Wt{constructor(e){super(e),this.renderOpts.optimizeFonts&&(process.env.__NEXT_OPTIMIZE_FONTS=JSON.stringify(this.renderOpts.optimizeFonts)),this.renderOpts.optimizeCss&&(process.env.__NEXT_OPTIMIZE_CSS=JSON.stringify(!0)),this.renderOpts.nextScriptWorkers&&(process.env.__NEXT_SCRIPT_WORKERS=JSON.stringify(!0)),this.nextConfig.experimental.deploymentId&&(process.env.NEXT_DEPLOYMENT_ID=this.nextConfig.experimental.deploymentId);const{appDocumentPreloading:t}=this.nextConfig.experimental,r=void 0===t;if(e.dev||!0!==t&&r||(nr({distDir:this.distDir,page:"/_document",isAppPath:!1}).catch((()=>{})),nr({distDir:this.distDir,page:"/_app",isAppPath:!1}).catch((()=>{}))),!e.dev){const{dynamicRoutes:e=[]}=this.getRoutesManifest()??{};this.dynamicRoutes=e.map((e=>{const t=Se(e.page);return{match:c(t),page:e.page,re:t.re}}))}!function(e){if(!globalThis.__NEXT_HTTP_AGENT){if(!e)throw new Error("Expected config.httpAgentOptions to be an object");globalThis.__NEXT_HTTP_AGENT_OPTIONS=e.httpAgentOptions,globalThis.__NEXT_HTTP_AGENT=new Sr.Agent(e.httpAgentOptions),globalThis.__NEXT_HTTPS_AGENT=new Cr.Agent(e.httpAgentOptions)}}(this.nextConfig),this.middlewareManifestPath=(0,u.join)(this.serverDistDir,"middleware-manifest.json")}async handleUpgrade(){}async prepareImpl(){if(await super.prepareImpl(),!this.serverOptions.dev&&this.nextConfig.experimental.instrumentationHook)try{const e=await __webpack_require__("./dist/esm/server sync recursive")((0,u.resolve)(this.serverOptions.dir||".",this.serverOptions.conf.distDir,"server",ne.o$));await(null==e.register?void 0:e.register.call(e))}catch(e){if("MODULE_NOT_FOUND"!==e.code)throw e.message=`An error occurred while loading instrumentation hook: ${e.message}`,e}}loadEnvConfig({dev:t,forceReload:r,silent:s}){(0,ir.loadEnvConfig)(this.dir,t,s?{info:()=>{},error:()=>{}}:e,r)}getIncrementalCache({requestHeaders:e,requestProtocol:t}){let r;const{incrementalCacheHandlerPath:s}=this.nextConfig.experimental;return s&&(r=__webpack_require__("./dist/esm/server sync recursive")((0,u.isAbsolute)(s)?s:(0,u.join)(this.distDir,s)),r=r.default||r),new Er({fs:this.getCacheFilesystem(),dev:!1,requestHeaders:e,requestProtocol:t,appDir:this.hasAppDir,allowedRevalidateHeaderKeys:this.nextConfig.experimental.allowedRevalidateHeaderKeys,minimalMode:!0,serverDistDir:this.serverDistDir,fetchCache:!0,fetchCacheKeyPrefix:this.nextConfig.experimental.fetchCacheKeyPrefix,maxMemoryCacheSize:this.nextConfig.experimental.isrMemoryCacheSize,flushToDisk:!1,getPrerenderManifest:()=>this.getPrerenderManifest(),CurCacheHandler:r})}getResponseCache(){return new lr(!0)}getPublicDir(){return(0,u.join)(this.dir,"public")}getHasStaticDir(){return d().existsSync((0,u.join)(this.dir,"static"))}getPagesManifest(){return Kt((0,u.join)(this.serverDistDir,y))}getAppPathsManifest(){if(this.hasAppDir)return Kt((0,u.join)(this.serverDistDir,w))}async hasPage(e){var t;return!!Yt(e,this.distDir,null==(t=this.nextConfig.i18n)?void 0:t.locales,this.hasAppDir)}getBuildId(){const e=(0,u.join)(this.distDir,"BUILD_ID");try{return d().readFileSync(e,"utf8").trim()}catch(t){if(!d().existsSync(e))throw new Error(`Could not find a production build in the '${this.distDir}' directory. Try building your app with 'next build' before starting the production server. https://nextjs.org/docs/messages/production-start-no-build-id`);throw t}}getHasAppDir(e){return Boolean(function(e,t){let r=p().join(e,t);return P(r)?r:(r=p().join(e,"src",t),P(r)?r:null)}(e?this.dir:this.serverDistDir,"app"))}sendRenderResult(e,t,r){return(0,D.BR)({req:e.originalRequest,res:t.originalResponse,...r})}async runApi(e,t,r,s){const n=this.getEdgeFunctionsPages();for(const i of n)if(i===s.definition.pathname&&await this.runEdgeFunction({req:e,res:t,query:r,params:s.params,page:s.definition.pathname,appPaths:null}))return!0;const i=await Nr.load(s.definition.filename);return delete(r={...r,...s.params}).__nextLocale,delete r.__nextDefaultLocale,delete r.__nextInferredLocaleFromDefault,await i.render(e.originalRequest,t.originalResponse,{previewProps:this.renderOpts.previewProps,revalidate:this.revalidate.bind(this),trustHostHeader:this.nextConfig.experimental.trustHostHeader,allowedRevalidateHeaderKeys:this.nextConfig.experimental.allowedRevalidateHeaderKeys,hostname:this.fetchHostname,minimalMode:!0,dev:!1,query:r,params:s.params,page:s.definition.pathname}),!0}async renderHTML(e,t,r,s,n){return(0,wt.getTracer)().trace(bt.Xy.renderHTML,(async()=>this.renderHTMLImpl(e,t,r,s,n)))}async renderHTMLImpl(e,t,r,s,n){throw new Error("invariant: renderHTML should not be called in minimal mode")}async imageOptimizer(e,t,r){throw new Error("invariant: imageOptimizer should not be called in minimal mode")}getPagePath(e,t){return Zt(e,this.distDir,t,this.hasAppDir)}async renderPageComponent(e,t){const r=this.getEdgeFunctionsPages()||[];if(r.length){const t=this.getOriginalAppPaths(e.pathname),s=Array.isArray(t);let n=e.pathname;s&&(n=t[0]);for(const s of r)if(s===n)return await this.runEdgeFunction({req:e.req,res:e.res,query:e.query,params:e.renderOpts.params,page:n,appPaths:t}),null}return super.renderPageComponent(e,t)}async findPageComponents({page:e,query:t,params:r,isAppPath:s}){return(0,wt.getTracer)().trace(bt.Xy.findPageComponents,{spanName:"resolving page into components",attributes:{"next.route":s?Ae(e):e}},(()=>this.findPageComponentsImpl({page:e,query:t,params:r,isAppPath:s})))}async findPageComponentsImpl({page:e,query:t,params:r,isAppPath:s}){const n=[e];t.amp&&n.unshift((s?Ae(e):Ve(e))+".amp"),t.__nextLocale&&n.unshift(...n.map((e=>`/${t.__nextLocale}${"/"===e?"":e}`)));for(const e of n)try{const n=await nr({distDir:this.distDir,page:e,isAppPath:s});if(t.__nextLocale&&"string"==typeof n.Component&&!e.startsWith(`/${t.__nextLocale}`))continue;return{components:n,query:{...n.getStaticProps?{amp:t.amp,__nextDataReq:t.__nextDataReq,__nextLocale:t.__nextLocale,__nextDefaultLocale:t.__nextDefaultLocale}:t,...(s?{}:r)||{}}}}catch(e){if(!(e instanceof l.GP))throw e}return null}getFontManifest(){return function(e){const t=p().join(e,b);return Kt(p().join(t,"font-manifest.json"))}(this.distDir)}getNextFontManifest(){return Kt((0,u.join)(this.distDir,"server","next-font-manifest.json"))}async getFallback(e){e=Ve(e);const t=this.getCacheFilesystem();return(await t.readFile((0,u.join)(this.serverDistDir,"pages",`${e}.html`))).toString("utf8")}async handleNextImageRequest(e,t,r){return t.statusCode=400,t.body("Bad Request").send(),{finished:!0}}async handleCatchallRenderRequest(e,t,r){let{pathname:s,query:n}=r;if(!s)throw new Error("Invariant: pathname is undefined");n._nextBubbleNoFallback="1";try{var i;s=ue(s);const a={i18n:null==(i=this.i18nProvider)?void 0:i.fromQuery(s,n)},o=await this.matchers.match(s,a);if(!o)return await this.render(e,t,s,n,r,!0),{finished:!0};_(e,"_nextMatch",o);const l=this.getEdgeFunctionsPages();for(const s of l)if(s===o.definition.page){if("export"===this.nextConfig.output)return await this.render404(e,t,r),{finished:!0};if(delete n._nextBubbleNoFallback,delete n[Pe.H4],await this.runEdgeFunction({req:e,res:t,query:n,params:o.params,page:o.definition.page,match:o,appPaths:null}))return{finished:!0}}if(function(e){return e.definition.kind===ze.PAGES_API}(o)){if("export"===this.nextConfig.output)return await this.render404(e,t,r),{finished:!0};if(delete n._nextBubbleNoFallback,await this.handleApiRequest(e,t,n,o))return{finished:!0}}return await this.render(e,t,s,n,r,!0),{finished:!0}}catch(r){if(r instanceof Ft){if(this.isRenderWorker)throw r;return{finished:!1}}try{return this.logError(r),t.statusCode=500,await this.renderError(r,e,t,s,n),{finished:!0}}catch{}throw r}}async logErrorWithOriginalStack(e,t){throw new Error("Invariant: logErrorWithOriginalStack can only be called on the development server")}async ensurePage(e){throw new Error("Invariant: ensurePage can only be called on the development server")}async handleApiRequest(e,t,r,s){return this.runApi(e,t,r,s)}async getPrefetchRsc(e){return this.getCacheFilesystem().readFile((0,u.join)(this.serverDistDir,"app",`${e}.prefetch.rsc`)).then((e=>e.toString()))}getCacheFilesystem(){return Pr}normalizeReq(e){return e instanceof M?e:new M(e)}normalizeRes(e){return e instanceof q?e:new q(e)}getRequestHandler(){return this.makeRequestHandler()}makeRequestHandler(){this.prepare();const e=super.getRequestHandler();return(t,r,s)=>{var n,i;const a=this.normalizeReq(t),o=this.normalizeRes(r);return null==(n=this.nextConfig.experimental.logging)||n.level,null==(i=this.nextConfig.experimental.logging)||i.fullUrl,e(a,o,s)}}async revalidate({urlPath:e,revalidateHeaders:t,opts:r}){const s=function({url:e,headers:t={},method:r="GET",bodyReadable:s,resWriter:n,socket:i=null}){return{req:new kr({url:e,headers:t,method:r,socket:i,readable:s}),res:new Rr({socket:i,resWriter:n})}}({url:e,headers:t}),n=this.getRequestHandler();if(await n(new M(s.req),new q(s.res)),await s.res.hasStreamed,"REVALIDATED"!==s.res.getHeader("x-nextjs-cache")&&(404!==s.res.statusCode||!r.unstable_onlyGenerated))throw new Error(`Invalid response ${s.res.statusCode}`)}async render(e,t,r,s,n,i=!1){return super.render(this.normalizeReq(e),this.normalizeRes(t),r,s,n,i)}async renderToHTML(e,t,r,s){return super.renderToHTML(this.normalizeReq(e),this.normalizeRes(t),r,s)}async renderErrorToResponseImpl(e,t){const{req:r,res:s,query:n}=e;if(404===s.statusCode&&this.hasAppDir&&this.isRenderWorker){const e="/_not-found";if(this.getEdgeFunctionsPages().includes(e))return await this.runEdgeFunction({req:r,res:s,query:n||{},params:{},page:e,appPaths:null}),null}return super.renderErrorToResponseImpl(e,t)}async renderError(e,t,r,s,n,i){return super.renderError(e,this.normalizeReq(t),this.normalizeRes(r),s,n,i)}async renderErrorToHTML(e,t,r,s,n){return super.renderErrorToHTML(e,this.normalizeReq(t),this.normalizeRes(r),s,n)}async render404(e,t,r,s){return super.render404(this.normalizeReq(e),this.normalizeRes(t),r,s)}getMiddlewareManifest(){return null}getMiddleware(){var e;const t=this.getMiddlewareManifest(),r=null==t||null==(e=t.middleware)?void 0:e["/"];if(r)return{match:Or(r),page:"/"}}getEdgeFunctionsPages(){const e=this.getMiddlewareManifest();return e?Object.keys(e.functions):[]}getEdgeFunctionInfo(e){const t=this.getMiddlewareManifest();if(!t)return null;let r;try{r=pe(Ve(e.page))}catch(e){return null}let s=e.middleware?t.middleware[r]:t.functions[r];if(!s){if(!e.middleware)throw new l.GP(r);return null}return{name:s.name,paths:s.files.map((e=>(0,u.join)(this.distDir,e))),wasm:(s.wasm??[]).map((e=>({...e,filePath:(0,u.join)(this.distDir,e.filePath)}))),assets:(s.assets??[]).map((e=>({...e,filePath:(0,u.join)(this.distDir,e.filePath)})))}}async hasMiddleware(e){const t=this.getEdgeFunctionInfo({page:e,middleware:!0});return Boolean(t&&t.paths.length>0)}async ensureMiddleware(){}async ensureEdgeFunction(e){}async runMiddleware(e){throw new Error("invariant: runMiddleware should not be called in minimal mode")}async handleCatchallMiddlewareRequest(e,t,r){const s=this.isRenderWorker&&e.headers["x-middleware-invoke"],n=(e=!1)=>s&&!e?(t.setHeader("x-middleware-invoke","1"),t.body("").send(),{finished:!0}):{finished:e};if(this.isRenderWorker&&!s)return{finished:!1};const i=this.getMiddleware();if(!i)return n();const a=j(m(e,"__NEXT_INIT_URL")),o=He(a.pathname,{nextConfig:this.nextConfig,i18nProvider:this.i18nProvider});a.pathname=o.pathname;const c=ue(r.pathname||"");if(!i.match(c,e,a.query))return n();let h,d=!1;for(const t of v)delete e.headers[t];this.stripInternalHeaders(e);try{if(await this.ensureMiddleware(),h=await this.runMiddleware({request:e,response:t,parsedUrl:a,parsed:r}),"response"in h){if(s){d=!0;const e=new Error;throw e.result=h,e.bubble=!0,e}for(const[e,r]of Object.entries(Ct(h.response.headers)))"content-encoding"!==e&&void 0!==r&&t.setHeader(e,r);t.statusCode=h.response.status;const{originalResponse:e}=t;return h.response.body?await he(h.response.body,e):e.end(),{finished:!0}}}catch(s){if(d)throw s;if((0,qe.Z)(s)&&"ENOENT"===s.code)return await this.render404(e,t,r),{finished:!0};if(s instanceof l._9)return t.statusCode=400,await this.renderError(s,e,t,r.pathname||""),{finished:!0};const n=(0,qe.S)(s);return console.error(n),t.statusCode=500,await this.renderError(n,e,t,r.pathname||""),{finished:!0}}return"finished"in h?h:{finished:!1}}getPrerenderManifest(){var e,t;if(this._cachedPreviewManifest)return this._cachedPreviewManifest;if(this.renderOpts,(null==(e=this.serverOptions)?void 0:e.dev)||(null==(t=this.renderWorkerOpts)?void 0:t.dev)||"phase-production-build"===process.env.NEXT_PHASE)return this._cachedPreviewManifest={version:4,routes:{},dynamicRoutes:{},notFoundRoutes:[],preview:{previewModeId:__webpack_require__("crypto").randomBytes(16).toString("hex"),previewModeSigningKey:__webpack_require__("crypto").randomBytes(32).toString("hex"),previewModeEncryptionKey:__webpack_require__("crypto").randomBytes(32).toString("hex")}},this._cachedPreviewManifest;const r=Kt((0,u.join)(this.distDir,"prerender-manifest.json"));return this._cachedPreviewManifest=r}getRoutesManifest(){return(0,wt.getTracer)().trace(bt.Xy.getRoutesManifest,(()=>{const e=Kt((0,u.join)(this.distDir,"routes-manifest.json"));let t=e.rewrites??{beforeFiles:[],afterFiles:[],fallback:[]};return Array.isArray(t)&&(t={beforeFiles:[],afterFiles:t,fallback:[]}),{...e,rewrites:t}}))}attachRequestMeta(e,t,r){var s,n,i;const a=(null==(s=null==(n=e.originalRequest)?void 0:n.socket)?void 0:s.encrypted)||(null==(i=e.headers["x-forwarded-proto"])?void 0:i.includes("https"))?"https":"http";_(e,"__NEXT_INIT_URL",this.fetchHostname&&this.port?`${a}://${this.fetchHostname}:${this.port}${e.url}`:this.nextConfig.experimental.trustHostHeader?`https://${e.headers.host||"localhost"}${e.url}`:e.url),_(e,"__NEXT_INIT_QUERY",{...t.query}),_(e,"_protocol",a),r||_(e,"__NEXT_CLONABLE_BODY",function(e){let t=null;const r=new Promise(((t,r)=>{e.on("end",t),e.on("error",r)})).catch((e=>({error:e})));return{async finalize(){if(t){const s=await r;if(s&&"object"==typeof s&&s.error)throw s.error;!function(e,t){for(const r in t){let s=t[r];"function"==typeof s&&(s=s.bind(e)),e[r]=s}}(e,t),t=e}},cloneBodyStream(){const r=t??e,s=new ar.PassThrough,n=new ar.PassThrough;return r.on("data",(e=>{s.push(e),n.push(e)})),r.on("end",(()=>{s.push(null),n.push(null)})),t=n,s}}}(e.body))}async runEdgeFunction(e){throw new Error("Middleware is not supported in minimal mode. Please remove the `NEXT_MINIMAL` environment variable.")}get serverDistDir(){if(this._serverDistDir)return this._serverDistDir;const e=(0,u.join)(this.distDir,b);return this._serverDistDir=e,e}async getFallbackErrorComponents(){return null}}})(),module.exports=__webpack_exports__})();