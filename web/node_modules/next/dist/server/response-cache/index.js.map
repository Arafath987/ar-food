{"version":3,"sources":["../../../src/server/response-cache/index.ts"],"names":["ResponseCache","constructor","minimalMode","pendingResponses","Map","minimalModeKey","get","key","responseGenerator","context","incrementalCache","pendingResponseKey","isOnDemandRevalidate","pendingResponse","resolver","rejecter","promise","Promise","resolve","reject","set","resolved","cacheEntry","previousCacheItem","expiresAt","Date","now","entry","delete","cachedResponse","value","kind","Error","isStale","revalidate","curRevalidate","html","RenderResult","fromStatic","pageData","headers","status","isPrefetch","resolveValue","isMiss","toUnchunkedString","undefined","err","Math","min","max","console","error"],"mappings":"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"}